# ═══════════════════════════════════════════════════════════════════
# PilotProOS Production Environment Configuration Template
# ═══════════════════════════════════════════════════════════════════
# IMPORTANT: Copy this file to .env.production and update all values
# ═══════════════════════════════════════════════════════════════════

# ┌─────────────────────────────────────────────────────────────────┐
# │                     DEPLOYMENT CONFIGURATION                      │
# └─────────────────────────────────────────────────────────────────┘

# Environment mode (do not change)
NODE_ENV=production

# Deployment tier (auto-detected by scripts/detect-and-configure-environment.sh)
# Options: vps, enterprise-s, enterprise-l
DEPLOYMENT_TIER=vps

# ┌─────────────────────────────────────────────────────────────────┐
# │                      DOMAIN CONFIGURATION                         │
# └─────────────────────────────────────────────────────────────────┘

# Your domain name (REQUIRED - must be configured in DNS)
DOMAIN_NAME=your-domain.com

# Admin email for Let's Encrypt SSL certificates (REQUIRED)
ADMIN_EMAIL=admin@your-domain.com

# Frontend URL (usually https://your-domain.com)
FRONTEND_URL=https://your-domain.com

# ┌─────────────────────────────────────────────────────────────────┐
# │                    DATABASE CONFIGURATION                         │
# └─────────────────────────────────────────────────────────────────┘

# PostgreSQL Configuration
POSTGRES_USER=pilotpros_user
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_123!@#
POSTGRES_DB=pilotpros_db

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# ┌─────────────────────────────────────────────────────────────────┐
# │                  AUTHENTICATION & SECURITY                        │
# └─────────────────────────────────────────────────────────────────┘

# JWT Secret (generate with: openssl rand -base64 64)
JWT_SECRET=CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_BASE64_64

# Session Secret (generate with: openssl rand -base64 32)
SESSION_SECRET=CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_BASE64_32

# Cookie settings
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=strict

# Session timeout (in minutes)
SESSION_TIMEOUT=30

# Password policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true


# ┌─────────────────────────────────────────────────────────────────┐
# │                       N8N CONFIGURATION                           │
# └─────────────────────────────────────────────────────────────────┘

# n8n host configuration
N8N_HOST=your-domain.com
N8N_PROTOCOL=https
N8N_PORT=5678

# n8n authentication
N8N_USER=admin
N8N_PASSWORD=CHANGE_THIS_SECURE_N8N_PASSWORD_456!@#

# n8n webhook URL
WEBHOOK_URL=https://your-domain.com/webhook

# n8n execution settings
N8N_EXECUTIONS_TIMEOUT=300
N8N_EXECUTIONS_TIMEOUT_MAX=3600
N8N_PAYLOAD_SIZE_MAX=16

# ┌─────────────────────────────────────────────────────────────────┐
# │                    MONITORING & LOGGING                           │
# └─────────────────────────────────────────────────────────────────┘

# Grafana (Enterprise tiers only)
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD_789!@#

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# Log retention (days)
LOG_RETENTION_DAYS=30

# Error reporting
ENABLE_ERROR_REPORTING=true
ERROR_REPORTING_EMAIL=admin@your-domain.com

# ┌─────────────────────────────────────────────────────────────────┐
# │                      BACKUP CONFIGURATION                         │
# └─────────────────────────────────────────────────────────────────┘

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backup

# S3 backup (optional)
S3_BACKUP_ENABLED=false
S3_BACKUP_BUCKET=
S3_BACKUP_ACCESS_KEY=
S3_BACKUP_SECRET_KEY=
S3_BACKUP_REGION=us-east-1

# ┌─────────────────────────────────────────────────────────────────┐
# │                    PERFORMANCE TUNING                             │
# └─────────────────────────────────────────────────────────────────┘

# Node.js settings
NODE_OPTIONS="--max-old-space-size=2048"
UV_THREADPOOL_SIZE=4

# Cluster workers (for Enterprise tiers)
CLUSTER_WORKERS=2

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ┌─────────────────────────────────────────────────────────────────┐
# │                 REPLICATION (Enterprise-L only)                   │
# └─────────────────────────────────────────────────────────────────┘

# PostgreSQL replication
REPLICATION_ENABLED=false
REPLICATION_USER=replicator
REPLICATION_PASSWORD=CHANGE_THIS_REPLICATION_PASSWORD

# ┌─────────────────────────────────────────────────────────────────┐
# │                    FEATURE FLAGS                                  │
# └─────────────────────────────────────────────────────────────────┘

# Feature toggles
FEATURE_MFA_ENABLED=false
FEATURE_LDAP_ENABLED=false
FEATURE_SAML_ENABLED=false
FEATURE_AUDIT_LOG_ENABLED=true
FEATURE_WORKFLOW_TEMPLATES=true
FEATURE_API_KEYS_ENABLED=false

# ┌─────────────────────────────────────────────────────────────────┐
# │                  THIRD-PARTY INTEGRATIONS                         │
# └─────────────────────────────────────────────────────────────────┘

# SendGrid (optional)
SENDGRID_ENABLED=false
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@your-domain.com

# Slack (optional)
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=

# Sentry (optional)
SENTRY_ENABLED=false
SENTRY_DSN=

# ┌─────────────────────────────────────────────────────────────────┐
# │                         CORS SETTINGS                             │
# └─────────────────────────────────────────────────────────────────┘

# CORS configuration
CORS_ORIGIN=https://your-domain.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ┌─────────────────────────────────────────────────────────────────┐
# │                      HEALTH CHECK SETTINGS                        │
# └─────────────────────────────────────────────────────────────────┘

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_START_PERIOD=60000

# ═══════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
#
# IMPORTANT SECURITY NOTES:
# 1. Never commit this file with real passwords to version control
# 2. Use strong, unique passwords for all services
# 3. Regularly rotate all secrets and passwords
# 4. Keep this file with restrictive permissions (chmod 600)
# 5. Store a backup of this configuration securely
#
# To generate secure passwords:
# - openssl rand -base64 32  (for general passwords)
# - openssl rand -base64 64  (for JWT secrets)
#
# To validate this configuration:
# - ./scripts/validate-env.sh
#
# ═══════════════════════════════════════════════════════════════════