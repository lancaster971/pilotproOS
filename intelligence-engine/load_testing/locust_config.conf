# ðŸš€ PilotProOS Enterprise Load Testing Configuration
# =================================================
#
# Basato su documentazione ufficiale Locust:
# https://docs.locust.io/en/stable/configuration.html
#
# Per distributed testing enterprise:
# https://docs.locust.io/en/stable/running-distributed.html

# Target Configuration
host = http://localhost:8000

# Load Testing Parameters
users = 1000                    # Target: 1000 concurrent users
spawn-rate = 50                 # Spawn 50 users per second (gradual ramp-up)
run-time = 10m                  # 10 minute test duration

# Performance Thresholds (enterprise targets)
# P95 Latency < 2000ms
# P99 Latency < 3000ms
# System health > 80%

# Distributed Testing Configuration
# Use for scaling beyond single machine limits
# processes = 4                 # Use 4 worker processes (uncomment for distributed)
# expect-workers = 4            # Wait for 4 workers in headless mode

# Output & Reporting
html = ./reports/load_test_report.html
csv = ./reports/load_test_results
csv-full-history = true
print-stats = true
only-summary = false

# Web UI Configuration (for monitoring during test)
web-host = 0.0.0.0
web-port = 8089

# Headless Mode (for automated testing)
# headless = true              # Uncomment for CI/CD automation

# Logging Configuration
loglevel = INFO
logfile = ./logs/locust.log

# Enterprise Monitoring Integration
# Custom tags for metric correlation
tags = environment:production,service:intelligence-engine,version:v1.0

# Stop Conditions (fail-safe for enterprise)
stop-timeout = 30              # Grace period before force stop
reset-stats = false            # Keep stats for analysis

# Advanced Configuration
max-request-workers = 100      # Max concurrent HTTP workers
connection-timeout = 10        # HTTP connection timeout (seconds)
network-timeout = 30           # Network operation timeout (seconds)

# Memory Management (for long-running tests)
# These prevent memory leaks during extended testing
stats-history-enabled = true
max-stats-entries = 10000

# Enterprise Security
# skip-log-setup = false       # Enable full logging for audit trail

# Custom Environment Variables for Test Data
# Set via environment or override here
# LOAD_TEST_HOST = http://localhost:8000
# PROMETHEUS_GATEWAY = http://localhost:9091
# TEST_ENVIRONMENT = production