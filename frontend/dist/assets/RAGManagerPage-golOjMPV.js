import{ae as je,e as f,f as l,g as t,q as z,B as ce,s as de,ah as Ie,h as F,H as se,k as R,a2 as te,t as m,a as $e,r as x,o as be,m as r,aC as tt,l as i,au as B,a3 as O,F as Z,z as Q,y as b,w as re,n as G,Q as Se,a9 as ne,aD as Ne,as as Ke,i as me,aE as Ge,av as Me,K as pe,R as st,aF as Ee,at as nt,ap as at,ar as ot,aG as it,aH as ze,aI as rt,Z as Ce,N as ge,E as fe,aJ as He,aK as lt,aL as ct,c as dt,_ as ut}from"./index-B6EsTzMs.js";import{s as ee}from"./index-BKgyaN8R.js";import{s as he,a as le,g as ie,f as pt,h as mt,i as vt,c as Ve,e as Ae,d as gt}from"./index-C_aiq8zk.js";import{o as ft}from"./index-C1hqPmLl.js";import"./auto-BQ_2d1jQ.js";var We={name:"TimesCircleIcon",extends:je};function ht(e){return _t(e)||$t(e)||yt(e)||bt()}function bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yt(e,s){if(e){if(typeof e=="string")return Pe(e,s);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,s):void 0}}function $t(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _t(e){if(Array.isArray(e))return Pe(e)}function Pe(e,s){(s==null||s>e.length)&&(s=e.length);for(var n=0,p=Array(s);n<s;n++)p[n]=e[n];return p}function kt(e,s,n,p,h,a){return l(),f("svg",z({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),ht(s[0]||(s[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"},null,-1)])),16)}We.render=kt;var wt=`
    .p-chip {
        display: inline-flex;
        align-items: center;
        background: dt('chip.background');
        color: dt('chip.color');
        border-radius: dt('chip.border.radius');
        padding-block: dt('chip.padding.y');
        padding-inline: dt('chip.padding.x');
        gap: dt('chip.gap');
    }

    .p-chip-icon {
        color: dt('chip.icon.color');
        font-size: dt('chip.icon.font.size');
        width: dt('chip.icon.size');
        height: dt('chip.icon.size');
    }

    .p-chip-image {
        border-radius: 50%;
        width: dt('chip.image.width');
        height: dt('chip.image.height');
        margin-inline-start: calc(-1 * dt('chip.padding.y'));
    }

    .p-chip:has(.p-chip-remove-icon) {
        padding-inline-end: dt('chip.padding.y');
    }

    .p-chip:has(.p-chip-image) {
        padding-block-start: calc(dt('chip.padding.y') / 2);
        padding-block-end: calc(dt('chip.padding.y') / 2);
    }

    .p-chip-remove-icon {
        cursor: pointer;
        font-size: dt('chip.remove.icon.size');
        width: dt('chip.remove.icon.size');
        height: dt('chip.remove.icon.size');
        color: dt('chip.remove.icon.color');
        border-radius: 50%;
        transition:
            outline-color dt('chip.transition.duration'),
            box-shadow dt('chip.transition.duration');
        outline-color: transparent;
    }

    .p-chip-remove-icon:focus-visible {
        box-shadow: dt('chip.remove.icon.focus.ring.shadow');
        outline: dt('chip.remove.icon.focus.ring.width') dt('chip.remove.icon.focus.ring.style') dt('chip.remove.icon.focus.ring.color');
        outline-offset: dt('chip.remove.icon.focus.ring.offset');
    }
`,Ct={root:"p-chip p-component",image:"p-chip-image",icon:"p-chip-icon",label:"p-chip-label",removeIcon:"p-chip-remove-icon"},At=ce.extend({name:"chip",style:wt,classes:Ct}),Dt={name:"BaseChip",extends:de,props:{label:{type:[String,Number],default:null},icon:{type:String,default:null},image:{type:String,default:null},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:void 0}},style:At,provide:function(){return{$pcChip:this,$parentInstance:this}}},j={name:"Chip",extends:Dt,inheritAttrs:!1,emits:["remove"],data:function(){return{visible:!0}},methods:{onKeydown:function(s){(s.key==="Enter"||s.key==="Backspace")&&this.close(s)},close:function(s){this.visible=!1,this.$emit("remove",s)}},computed:{dataP:function(){return Ie({removable:this.removable})}},components:{TimesCircleIcon:We}},St=["aria-label","data-p"],Pt=["src"];function Tt(e,s,n,p,h,a){return h.visible?(l(),f("div",z({key:0,class:e.cx("root"),"aria-label":e.label},e.ptmi("root"),{"data-p":a.dataP}),[se(e.$slots,"default",{},function(){return[e.image?(l(),f("img",z({key:0,src:e.image},e.ptm("image"),{class:e.cx("image")}),null,16,Pt)):e.$slots.icon?(l(),R(te(e.$slots.icon),z({key:1,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(l(),f("span",z({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):F("",!0),e.label!==null?(l(),f("div",z({key:3,class:e.cx("label")},e.ptm("label")),m(e.label),17)):F("",!0)]}),e.removable?se(e.$slots,"removeicon",{key:0,removeCallback:a.close,keydownCallback:a.onKeydown},function(){return[(l(),R(te(e.removeIcon?"span":"TimesCircleIcon"),z({class:[e.cx("removeIcon"),e.removeIcon],onClick:a.close,onKeydown:a.onKeydown},e.ptm("removeIcon")),null,16,["class","onClick","onKeydown"]))]}):F("",!0)],16,St)):F("",!0)}j.render=Tt;var xt=`
    .p-progressspinner {
        position: relative;
        margin: 0 auto;
        width: 100px;
        height: 100px;
        display: inline-block;
    }

    .p-progressspinner::before {
        content: '';
        display: block;
        padding-top: 100%;
    }

    .p-progressspinner-spin {
        height: 100%;
        transform-origin: center center;
        width: 100%;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        animation: p-progressspinner-rotate 2s linear infinite;
    }

    .p-progressspinner-circle {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: 0;
        stroke: dt('progressspinner.colorOne');
        animation:
            p-progressspinner-dash 1.5s ease-in-out infinite,
            p-progressspinner-color 6s ease-in-out infinite;
        stroke-linecap: round;
    }

    @keyframes p-progressspinner-rotate {
        100% {
            transform: rotate(360deg);
        }
    }
    @keyframes p-progressspinner-dash {
        0% {
            stroke-dasharray: 1, 200;
            stroke-dashoffset: 0;
        }
        50% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -35px;
        }
        100% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -124px;
        }
    }
    @keyframes p-progressspinner-color {
        100%,
        0% {
            stroke: dt('progressspinner.color.one');
        }
        40% {
            stroke: dt('progressspinner.color.two');
        }
        66% {
            stroke: dt('progressspinner.color.three');
        }
        80%,
        90% {
            stroke: dt('progressspinner.color.four');
        }
    }
`,It={root:"p-progressspinner",spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},Mt=ce.extend({name:"progressspinner",style:xt,classes:It}),Ft={name:"BaseProgressSpinner",extends:de,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:Mt,provide:function(){return{$pcProgressSpinner:this,$parentInstance:this}}},qe={name:"ProgressSpinner",extends:Ft,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},Ut=["fill","stroke-width"];function Bt(e,s,n,p,h,a){return l(),f("div",z({class:e.cx("root"),role:"progressbar"},e.ptmi("root")),[(l(),f("svg",z({class:e.cx("spin"),viewBox:"25 25 50 50",style:a.svgStyle},e.ptm("spin")),[t("circle",z({class:e.cx("circle"),cx:"50",cy:"50",r:"20",fill:e.fill,"stroke-width":e.strokeWidth,strokeMiterlimit:"10"},e.ptm("circle")),null,16,Ut)],16))],16)}qe.render=Bt;const Ze="http://localhost:8000",J=ft.create({baseURL:`${Ze}/api/rag`,headers:{"Content-Type":"application/json"},timeout:3e4,onRequest({options:e}){const s=localStorage.getItem("auth_token")||localStorage.getItem("token");s&&(e.headers={...e.headers,Authorization:`Bearer ${s}`})},onResponseError({response:e}){if(console.error("RAG API Error:",e),e.status===401)localStorage.removeItem("auth_token"),localStorage.removeItem("token"),window.location.href="/login";else{if(e.status===413)throw new Error("File size too large. Please use files smaller than 50MB.");if(e.status===422){const s=e._data?.detail;throw new Error(s||"Invalid request data")}}}}),Y={async uploadDocuments(e,s={}){return await J("/documents",{method:"POST",body:e,timeout:3e5,...s})},async listDocuments(e={}){return await J("/documents",{method:"GET",query:e})},async updateDocument(e,s){const n=new FormData;return s.content&&n.append("content",s.content),s.metadata&&n.append("metadata",JSON.stringify(s.metadata)),await J(`/documents/${e}`,{method:"PUT",body:n})},async deleteDocument(e,s=!0){return await J(`/documents/${e}`,{method:"DELETE",query:{soft_delete:s}})},async searchDocuments(e){return await J("/search",{method:"POST",body:e})},async getStatistics(){return await J("/stats",{method:"GET"})},async bulkImport(e,s={}){const n=new FormData;return n.append("archive",e),await J("/bulk-import",{method:"POST",body:n,timeout:6e5,...s})},async reindex(){return await J("/reindex",{method:"POST"})},async getDocument(e){return await J(`/documents/${e}`,{method:"GET"})},async exportDocuments(e={}){return await J("/export",{method:"POST",body:e,responseType:"blob"})},async getDocumentPreview(e,s=500){return await J(`/documents/${e}/preview`,{method:"GET",query:{max_length:s}})},async getDocumentHistory(e){return await J(`/documents/${e}/history`,{method:"GET"})},async restoreDocumentVersion(e,s){return await J(`/documents/${e}/restore/${s}`,{method:"POST"})},async getSimilarDocuments(e,s=5){return await J(`/documents/${e}/similar`,{method:"GET",query:{limit:s}})},async getCategories(){return(await this.getStatistics()).categories||[]},async healthCheck(){return await J("/health",{method:"GET"})},async getEmbeddingStatus(){return(await this.getStatistics()).embedding_status||{}},validateFile(e){const s=[".pdf",".docx",".txt",".md",".html"],p="."+e.name.split(".").pop().toLowerCase(),h={valid:!0,errors:[]};return s.includes(p)||(h.valid=!1,h.errors.push(`Unsupported file type: ${p}`)),e.size>52428800&&(h.valid=!1,h.errors.push("File size exceeds 50MB limit")),e.size===0&&(h.valid=!1,h.errors.push("File is empty")),h},createWebSocket(e){const s=`${Ze}/api/rag/ws`.replace("http","ws"),n=new WebSocket(s);return n.onopen=()=>{console.log("RAG WebSocket connected")},n.onmessage=p=>{try{const h=JSON.parse(p.data);e&&e(h)}catch(h){console.error("Error parsing WebSocket message:",h)}},n.onerror=p=>{console.error("RAG WebSocket error:",p)},n.onclose=()=>{console.log("RAG WebSocket disconnected")},n},formatFileSize(e){if(e===0)return"0 B";const s=1024,n=["B","KB","MB","GB","TB"],p=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,p)).toFixed(2))+" "+n[p]},getFileIcon(e){const s=e.split(".").pop()?.toLowerCase();return{pdf:"pi pi-file-pdf",docx:"pi pi-file-word",txt:"pi pi-file",md:"pi pi-file-edit",html:"pi pi-code"}[s]||"pi pi-file"}},Et={class:"rag-search-panel"},zt={class:"search-form"},Vt={class:"search-input-group"},Ot={class:"p-inputgroup"},Rt={class:"filters-section"},Lt={key:0,class:"filters-content"},jt={class:"filter-row"},Nt={class:"filter-group"},Kt={class:"filter-group"},Gt={class:"filter-group"},Ht={class:"filter-actions"},Wt={key:0,class:"search-results"},qt={class:"results-header"},Zt={class:"query-info"},Qt={class:"results-grid"},Xt={class:"result-header"},Jt={class:"relevance-score"},Yt={class:"score-bar"},es={class:"score-text"},ts={class:"result-title"},ss={class:"result-subtitle"},ns={class:"source"},as={class:"date"},os={class:"result-content"},is={class:"content-preview"},rs={class:"result-metadata"},ls={key:0,class:"metadata-tags"},cs={key:0,class:"more-tags"},ds={class:"metadata-info"},us={key:0,class:"author"},ps={key:1,class:"version"},ms={class:"result-actions"},vs={key:1,class:"empty-state"},gs={key:2,class:"initial-state"},fs={class:"search-examples"},hs={class:"example-chips"},bs={key:3,class:"loading-state"},ys={__name:"RAGSearchPanel",emits:["document-selected"],setup(e,{emit:s}){const n=s,p=$e(),h=x(""),a=x([]),S=x(!1),D=x(!1),I=x(!1),$=x(""),y=x(0),k=x({category:null,user_level:"BUSINESS",k:5}),E=x([{label:"All Categories",value:null},{label:"Business Process",value:"business_process"},{label:"Documentation",value:"documentation"},{label:"Training",value:"training"},{label:"Policy",value:"policy"},{label:"General",value:"general"}]),N=[{label:"Business User",value:"BUSINESS"},{label:"Administrator",value:"ADMIN"},{label:"Developer",value:"DEVELOPER"}],W=[{label:"5 Results",value:5},{label:"10 Results",value:10},{label:"15 Results",value:15},{label:"20 Results",value:20}],q=["How to create a new business process?","User management procedures","System configuration guidelines","Error handling best practices","Integration documentation"];be(()=>{K()});const K=async()=>{try{const w=(await Y.getStatistics()).categories||[],M=[{label:"All Categories",value:null},...w.map(ae=>({label:ae.charAt(0).toUpperCase()+ae.slice(1).replace("_"," "),value:ae}))];E.value=M}catch(T){console.error("Error loading categories:",T)}},L=async()=>{if(!h.value.trim()){p.warning("Please enter a search query");return}S.value=!0,D.value=!0,$.value=h.value;try{const T={query:h.value,k:k.value.k,user_level:k.value.user_level,filters:{}};k.value.category&&(T.filters.category=k.value.category);const w=await Y.searchDocuments(T);a.value=w.results||[],y.value=w.query_time_ms||0,a.value.length===0&&p.info("No documents found matching your query")}catch(T){console.error("Search error:",T),p.error("Failed to search documents"),a.value=[]}finally{S.value=!1}},V=()=>{h.value="",a.value=[],D.value=!1,$.value="",y.value=0},H=()=>{k.value={category:null,user_level:"BUSINESS",k:5}},U=T=>{n("document-selected",T)},A=T=>{console.log("Edit document:",T.metadata?.id)},_=T=>{console.log("Share document:",T.metadata?.id)},o=(T,w)=>T?T.length>w?T.substring(0,w)+"...":T:"",u=T=>T?new Date(T).toLocaleDateString():"Unknown",d=T=>({upload:"pi pi-upload",bulk_import:"pi pi-download",api:"pi pi-cog",system:"pi pi-server"})[T]||"pi pi-file",g=T=>({business_process:"success",documentation:"info",training:"warning",policy:"danger",general:"secondary"})[T]||"secondary";return(T,w)=>(l(),f("div",Et,[t("div",zt,[t("div",Vt,[t("div",Ot,[r(i(he),{modelValue:h.value,"onUpdate:modelValue":w[0]||(w[0]=M=>h.value=M),placeholder:"Search documents with natural language...",onKeyup:tt(L,["enter"]),disabled:S.value,class:"search-input"},null,8,["modelValue","disabled"]),r(i(B),{icon:"pi pi-search",onClick:L,loading:S.value,class:"p-button-primary"},null,8,["loading"])])]),t("div",Rt,[r(i(B),{label:I.value?"Hide Filters":"Show Filters",icon:I.value?"pi pi-chevron-up":"pi pi-chevron-down",class:"p-button-text",onClick:w[1]||(w[1]=M=>I.value=!I.value)},null,8,["label","icon"]),I.value?(l(),f("div",Lt,[t("div",jt,[t("div",Nt,[w[5]||(w[5]=t("label",{class:"filter-label"},"Category",-1)),r(i(le),{modelValue:k.value.category,"onUpdate:modelValue":w[2]||(w[2]=M=>k.value.category=M),options:E.value,"option-label":"label","option-value":"value",placeholder:"All Categories",class:"filter-dropdown"},null,8,["modelValue","options"])]),t("div",Kt,[w[6]||(w[6]=t("label",{class:"filter-label"},"User Level",-1)),r(i(le),{modelValue:k.value.user_level,"onUpdate:modelValue":w[3]||(w[3]=M=>k.value.user_level=M),options:N,"option-label":"label","option-value":"value",placeholder:"Select Level",class:"filter-dropdown"},null,8,["modelValue"])]),t("div",Gt,[w[7]||(w[7]=t("label",{class:"filter-label"},"Results Count",-1)),r(i(le),{modelValue:k.value.k,"onUpdate:modelValue":w[4]||(w[4]=M=>k.value.k=M),options:W,"option-label":"label","option-value":"value",placeholder:"Number of Results",class:"filter-dropdown"},null,8,["modelValue"])])]),t("div",Ht,[r(i(B),{label:"Clear Filters",icon:"pi pi-times",class:"p-button-outlined p-button-secondary",onClick:H}),r(i(B),{label:"Apply Filters",icon:"pi pi-check",class:"p-button-outlined",onClick:L})])])):F("",!0)])]),a.value.length>0?(l(),f("div",Wt,[t("div",qt,[t("h3",null,[w[8]||(w[8]=t("i",{class:"pi pi-search mr-2"},null,-1)),O(" Search Results ("+m(a.value.length)+") ",1)]),t("div",Zt,[t("span",null,"Query time: "+m(y.value)+"ms",1),$.value?(l(),R(i(j),{key:0,label:`"${$.value}"`,class:"query-chip"},null,8,["label"])):F("",!0)])]),t("div",Qt,[(l(!0),f(Z,null,Q(a.value,(M,ae)=>(l(),R(i(ee),{key:`result-${ae}`,class:"result-card",onClick:oe=>U(M)},{header:b(()=>[t("div",Xt,[t("div",Jt,[t("div",Yt,[t("div",{class:"score-fill",style:Se({width:`${(M.score||.5)*100}%`})},null,4)]),t("span",es,m(((M.score||.5)*100).toFixed(1))+"%",1)]),r(i(ne),{value:M.metadata?.category||"general",severity:g(M.metadata?.category),class:"category-badge"},null,8,["value","severity"])])]),title:b(()=>[t("div",ts,[t("i",{class:G([d(M.metadata?.source),"mr-2"])},null,2),O(" "+m(M.metadata?.title||"Untitled Document"),1)])]),subtitle:b(()=>[t("div",ss,[t("span",ns,m(M.metadata?.source||"Unknown"),1),w[9]||(w[9]=t("span",{class:"separator"},"•",-1)),t("span",as,m(u(M.metadata?.created_at)),1)])]),content:b(()=>[t("div",os,[t("p",is,m(o(M.page_content,200)),1),t("div",rs,[M.metadata?.tags?.length?(l(),f("div",ls,[(l(!0),f(Z,null,Q(M.metadata.tags.slice(0,3),oe=>(l(),R(i(j),{key:oe,label:oe,class:"tag-chip"},null,8,["label"]))),128)),M.metadata.tags.length>3?(l(),f("span",cs," +"+m(M.metadata.tags.length-3)+" more ",1)):F("",!0)])):F("",!0),t("div",ds,[M.metadata?.author?(l(),f("span",us,[w[10]||(w[10]=t("i",{class:"pi pi-user mr-1"},null,-1)),O(m(M.metadata.author),1)])):F("",!0),M.metadata?.version?(l(),f("span",ps," v"+m(M.metadata.version),1)):F("",!0)])])])]),footer:b(()=>[t("div",ms,[r(i(B),{label:"View Details",icon:"pi pi-eye",class:"p-button-text p-button-sm",onClick:re(oe=>U(M),["stop"])},null,8,["onClick"]),r(i(B),{label:"Edit",icon:"pi pi-pencil",class:"p-button-text p-button-sm",onClick:re(oe=>A(M),["stop"])},null,8,["onClick"]),r(i(B),{label:"Share",icon:"pi pi-share-alt",class:"p-button-text p-button-sm",onClick:re(oe=>_(M),["stop"])},null,8,["onClick"])])]),_:2},1032,["onClick"]))),128))])])):D.value&&!S.value?(l(),f("div",vs,[w[11]||(w[11]=t("div",{class:"empty-icon"},[t("i",{class:"pi pi-search"})],-1)),w[12]||(w[12]=t("h3",null,"No Results Found",-1)),w[13]||(w[13]=t("p",null,"Try adjusting your search query or filters",-1)),r(i(B),{label:"Clear Search",icon:"pi pi-times",class:"p-button-outlined",onClick:V})])):!D.value&&!S.value?(l(),f("div",gs,[w[15]||(w[15]=t("div",{class:"initial-icon"},[t("i",{class:"pi pi-search"})],-1)),w[16]||(w[16]=t("h3",null,"Semantic Search",-1)),w[17]||(w[17]=t("p",null,"Search your knowledge base using natural language queries",-1)),t("div",fs,[w[14]||(w[14]=t("h4",null,"Example queries:",-1)),t("div",hs,[(l(),f(Z,null,Q(q,M=>r(i(j),{key:M,label:M,class:"example-chip clickable",onClick:ae=>{h.value=M,L()}},null,8,["label","onClick"])),64))])])])):F("",!0),S.value?(l(),f("div",bs,[r(i(qe)),w[18]||(w[18]=t("p",null,"Searching knowledge base...",-1))])):F("",!0)]))}};var $s=typeof global=="object"&&global&&global.Object===Object&&global,_s=typeof self=="object"&&self&&self.Object===Object&&self,Qe=$s||_s||Function("return this")(),ye=Qe.Symbol,Xe=Object.prototype,ks=Xe.hasOwnProperty,ws=Xe.toString,ve=ye?ye.toStringTag:void 0;function Cs(e){var s=ks.call(e,ve),n=e[ve];try{e[ve]=void 0;var p=!0}catch{}var h=ws.call(e);return p&&(s?e[ve]=n:delete e[ve]),h}var As=Object.prototype,Ds=As.toString;function Ss(e){return Ds.call(e)}var Ps="[object Null]",Ts="[object Undefined]",Oe=ye?ye.toStringTag:void 0;function xs(e){return e==null?e===void 0?Ts:Ps:Oe&&Oe in Object(e)?Cs(e):Ss(e)}function Is(e){return e!=null&&typeof e=="object"}var Ms="[object Symbol]";function Fs(e){return typeof e=="symbol"||Is(e)&&xs(e)==Ms}var Us=/\s/;function Bs(e){for(var s=e.length;s--&&Us.test(e.charAt(s)););return s}var Es=/^\s+/;function zs(e){return e&&e.slice(0,Bs(e)+1).replace(Es,"")}function Te(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var Re=NaN,Vs=/^[-+]0x[0-9a-f]+$/i,Os=/^0b[01]+$/i,Rs=/^0o[0-7]+$/i,Ls=parseInt;function Le(e){if(typeof e=="number")return e;if(Fs(e))return Re;if(Te(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=Te(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=zs(e);var n=Os.test(e);return n||Rs.test(e)?Ls(e.slice(2),n?2:8):Vs.test(e)?Re:+e}var De=function(){return Qe.Date.now()},js="Expected a function",Ns=Math.max,Ks=Math.min;function Gs(e,s,n){var p,h,a,S,D,I,$=0,y=!1,k=!1,E=!0;if(typeof e!="function")throw new TypeError(js);s=Le(s)||0,Te(n)&&(y=!!n.leading,k="maxWait"in n,a=k?Ns(Le(n.maxWait)||0,s):a,E="trailing"in n?!!n.trailing:E);function N(_){var o=p,u=h;return p=h=void 0,$=_,S=e.apply(u,o),S}function W(_){return $=_,D=setTimeout(L,s),y?N(_):S}function q(_){var o=_-I,u=_-$,d=s-o;return k?Ks(d,a-u):d}function K(_){var o=_-I,u=_-$;return I===void 0||o>=s||o<0||k&&u>=a}function L(){var _=De();if(K(_))return V(_);D=setTimeout(L,q(_))}function V(_){return D=void 0,E&&p?N(_):(p=h=void 0,S)}function H(){D!==void 0&&clearTimeout(D),$=0,p=I=h=D=void 0}function U(){return D===void 0?S:V(De())}function A(){var _=De(),o=K(_);if(p=arguments,h=this,I=_,o){if(D===void 0)return W(I);if(k)return clearTimeout(D),D=setTimeout(L,s),N(I)}return D===void 0&&(D=setTimeout(L,s)),S}return A.cancel=H,A.flush=U,A}const Hs={class:"rag-document-list"},Ws={class:"controls-header"},qs={class:"search-controls"},Zs={class:"p-inputgroup"},Qs={class:"filter-controls"},Xs={class:"action-controls"},Js={class:"document-title"},Ys={class:"title-content"},en={class:"title-text"},tn={class:"title-meta"},sn={class:"source"},nn={class:"size"},an={key:0,class:"tags-container"},on={key:0,class:"more-tags"},rn={key:1,class:"no-tags"},ln={class:"author-info"},cn={class:"date-info"},dn={class:"date-info"},un={class:"action-buttons"},pn={class:"empty-table-state"},mn={key:0},vn={key:1},gn={key:0,class:"preview-content"},fn={class:"preview-metadata"},hn={class:"metadata-grid"},bn={class:"metadata-item"},yn={class:"metadata-item"},$n={class:"metadata-item"},_n={class:"metadata-item"},kn={key:0,class:"tags-section"},wn={class:"tags-list"},Cn={class:"preview-text"},An={class:"content-text"},Dn={class:"preview-actions"},Sn={__name:"RAGDocumentList",emits:["document-selected","document-updated","document-deleted","upload-requested"],setup(e,{emit:s}){const n=s,p=$e(),h=Ne(),a=x([]),S=x(!1),D=x(""),I=x(null),$=x(0),y=x(!1),k=x(null),E=x({category:null,sort_by:"created_at",sort_order:"desc",page:1,page_size:20}),N=x([{label:"All Categories",value:null}]),W=[{label:"Created Date",value:"created_at"},{label:"Updated Date",value:"updated_at"},{label:"Title",value:"title"},{label:"Author",value:"author"},{label:"Size",value:"size"}],q=[{label:"Newest First",value:"desc"},{label:"Oldest First",value:"asc"}],K=Gs(()=>{E.value.page=1,V()},500);be(async()=>{await L(),await V()});const L=async()=>{try{const v=(await Y.getStatistics()).categories||[];N.value=[{label:"All Categories",value:null},...v.map(X=>({label:w(X),value:X}))]}catch(c){console.error("Error loading categories:",c)}},V=async()=>{S.value=!0;try{const c={page:E.value.page,page_size:E.value.page_size,sort_by:E.value.sort_by,sort_order:E.value.sort_order};E.value.category&&(c.category=E.value.category),D.value.trim()&&(c.search=D.value.trim());const v=await Y.listDocuments(c);a.value=v.documents||[],$.value=v.total_count||0}catch(c){console.error("Error loading documents:",c),p.error("Failed to load documents"),a.value=[],$.value=0}finally{S.value=!1}},H=async()=>{E.value.page=1,await V()},U=c=>{E.value.page=c.page+1,V()},A=c=>{n("document-selected",c.data)},_=c=>{k.value=c,y.value=!0},o=c=>{n("document-selected",c)},u=()=>{y.value=!1,n("document-selected",k.value)},d=c=>{p.info("Document download feature coming soon")},g=c=>{h.require({message:`Are you sure you want to delete "${c.title}"?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>T(c),reject:()=>{}})},T=async c=>{try{await Y.deleteDocument(c.id),p.success("Document deleted successfully"),n("document-deleted",c),await V()}catch(v){console.error("Error deleting document:",v),p.error("Failed to delete document")}},w=c=>c?c.charAt(0).toUpperCase()+c.slice(1).replace(/_/g," "):"General",M=c=>c?new Date(c).toLocaleDateString():"Unknown",ae=c=>{if(!c||c===0)return"0 B";const v=1024,X=["B","KB","MB","GB"],P=Math.floor(Math.log(c)/Math.log(v));return parseFloat((c/Math.pow(v,P)).toFixed(2))+" "+X[P]},oe=c=>{const v=c.source||"unknown";return{upload:"pi pi-upload",bulk_import:"pi pi-download",api:"pi pi-cog",system:"pi pi-server"}[v]||"pi pi-file"},ke=c=>({active:"Active",archived:"Archived",processing:"Processing",error:"Error"})[c]||"Unknown",we=c=>({active:"success",archived:"secondary",processing:"warning",error:"danger"})[c]||"secondary",C=c=>({business_process:"category-business",documentation:"category-docs",training:"category-training",policy:"category-policy",general:"category-general"})[c]||"category-general";return(c,v)=>{const X=Ke("tooltip");return l(),f("div",Hs,[t("div",Ws,[t("div",qs,[t("div",Zs,[r(i(he),{modelValue:D.value,"onUpdate:modelValue":v[0]||(v[0]=P=>D.value=P),placeholder:"Search documents by name or content...",onInput:i(K),class:"search-input"},null,8,["modelValue","onInput"]),r(i(B),{icon:"pi pi-search",class:"p-button-outlined",onClick:V})])]),t("div",Qs,[r(i(le),{modelValue:E.value.category,"onUpdate:modelValue":v[1]||(v[1]=P=>E.value.category=P),options:N.value,"option-label":"label","option-value":"value",placeholder:"Filter by Category",class:"category-filter",onChange:V},null,8,["modelValue","options"]),r(i(le),{modelValue:E.value.sort_by,"onUpdate:modelValue":v[2]||(v[2]=P=>E.value.sort_by=P),options:W,"option-label":"label","option-value":"value",placeholder:"Sort by",class:"sort-filter",onChange:V},null,8,["modelValue"]),r(i(le),{modelValue:E.value.sort_order,"onUpdate:modelValue":v[3]||(v[3]=P=>E.value.sort_order=P),options:q,"option-label":"label","option-value":"value",class:"order-filter",onChange:V},null,8,["modelValue"])]),t("div",Xs,[r(i(B),{label:"Refresh",icon:"pi pi-refresh",class:"p-button-outlined",onClick:H,loading:S.value},null,8,["loading"])])]),r(i(pt),{value:a.value,loading:S.value,paginator:!0,rows:E.value.page_size,"total-records":$.value,lazy:!0,onPage:U,"data-key":"id","selection-mode":"single",selection:I.value,"onUpdate:selection":v[5]||(v[5]=P=>I.value=P),onRowSelect:A,class:"document-table","responsive-layout":"scroll"},{empty:b(()=>[t("div",pn,[v[10]||(v[10]=t("div",{class:"empty-icon"},[t("i",{class:"pi pi-file"})],-1)),v[11]||(v[11]=t("h3",null,"No Documents Found",-1)),D.value?(l(),f("p",mn,"No documents match your search criteria")):(l(),f("p",vn,"Your knowledge base is empty")),r(i(B),{label:"Upload Documents",icon:"pi pi-upload",class:"p-button-primary",onClick:v[4]||(v[4]=P=>c.$emit("upload-requested"))})])]),default:b(()=>[r(i(ie),{field:"status",header:"Status",sortable:!1,style:{width:"100px"}},{body:b(({data:P})=>[r(i(ne),{value:ke(P.status),severity:we(P.status),class:"status-badge"},null,8,["value","severity"])]),_:1}),r(i(ie),{field:"title",header:"Document",sortable:!0,style:{"min-width":"300px"}},{body:b(({data:P})=>[t("div",Js,[t("i",{class:G([oe(P),"doc-icon mr-2"])},null,2),t("div",Ys,[t("div",en,m(P.title||"Untitled Document"),1),t("div",tn,[t("span",sn,m(P.source||"Unknown"),1),v[8]||(v[8]=t("span",{class:"separator"},"•",-1)),t("span",nn,m(ae(P.size)),1)])])])]),_:1}),r(i(ie),{field:"category",header:"Category",sortable:!0,style:{width:"150px"}},{body:b(({data:P})=>[r(i(j),{label:w(P.category),class:G([C(P.category),"category-chip"])},null,8,["label","class"])]),_:1}),r(i(ie),{field:"tags",header:"Tags",sortable:!1,style:{"min-width":"200px"}},{body:b(({data:P})=>[P.tags&&P.tags.length>0?(l(),f("div",an,[(l(!0),f(Z,null,Q(P.tags.slice(0,2),ue=>(l(),R(i(j),{key:ue,label:ue,class:"tag-chip"},null,8,["label"]))),128)),P.tags.length>2?(l(),f("span",on," +"+m(P.tags.length-2),1)):F("",!0)])):(l(),f("span",rn,"No tags"))]),_:1}),r(i(ie),{field:"author",header:"Author",sortable:!0,style:{width:"150px"}},{body:b(({data:P})=>[t("div",ln,[v[9]||(v[9]=t("i",{class:"pi pi-user mr-1"},null,-1)),O(" "+m(P.author||"Unknown"),1)])]),_:1}),r(i(ie),{field:"created_at",header:"Created",sortable:!0,style:{width:"120px"}},{body:b(({data:P})=>[t("div",cn,m(M(P.created_at)),1)]),_:1}),r(i(ie),{field:"updated_at",header:"Updated",sortable:!0,style:{width:"120px"}},{body:b(({data:P})=>[t("div",dn,m(M(P.updated_at)),1)]),_:1}),r(i(ie),{field:"version",header:"Version",sortable:!0,style:{width:"100px"}},{body:b(({data:P})=>[r(i(ne),{value:`v${P.version||1}`,severity:"info",class:"version-badge"},null,8,["value"])]),_:1}),r(i(ie),{header:"Actions",sortable:!1,style:{width:"180px"}},{body:b(({data:P})=>[t("div",un,[me(r(i(B),{icon:"pi pi-eye",class:"p-button-rounded p-button-text p-button-sm",onClick:ue=>_(P)},null,8,["onClick"]),[[X,"View"]]),me(r(i(B),{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-sm",onClick:ue=>o(P)},null,8,["onClick"]),[[X,"Edit"]]),me(r(i(B),{icon:"pi pi-download",class:"p-button-rounded p-button-text p-button-sm",onClick:ue=>d(P)},null,8,["onClick"]),[[X,"Download"]]),me(r(i(B),{icon:"pi pi-trash",class:"p-button-rounded p-button-text p-button-sm p-button-danger",onClick:ue=>g(P)},null,8,["onClick"]),[[X,"Delete"]])])]),_:1})]),_:1},8,["value","loading","rows","total-records","selection"]),r(i(Ge)),r(i(Me),{visible:y.value,"onUpdate:visible":v[7]||(v[7]=P=>y.value=P),header:k.value?.title||"Document Preview",style:{width:"80vw",height:"80vh"},modal:!0,draggable:!1,class:"preview-dialog"},{footer:b(()=>[t("div",Dn,[r(i(B),{label:"Edit Document",icon:"pi pi-pencil",class:"p-button-primary",onClick:u}),r(i(B),{label:"Close",icon:"pi pi-times",class:"p-button-outlined",onClick:v[6]||(v[6]=P=>y.value=!1)})])]),default:b(()=>[k.value?(l(),f("div",gn,[t("div",fn,[t("div",hn,[t("div",bn,[v[12]||(v[12]=t("label",null,"Category:",-1)),r(i(j),{label:w(k.value.category)},null,8,["label"])]),t("div",yn,[v[13]||(v[13]=t("label",null,"Author:",-1)),t("span",null,m(k.value.author),1)]),t("div",$n,[v[14]||(v[14]=t("label",null,"Created:",-1)),t("span",null,m(M(k.value.created_at)),1)]),t("div",_n,[v[15]||(v[15]=t("label",null,"Version:",-1)),r(i(ne),{value:`v${k.value.version}`,severity:"info"},null,8,["value"])])]),k.value.tags?.length?(l(),f("div",kn,[v[16]||(v[16]=t("label",null,"Tags:",-1)),t("div",wn,[(l(!0),f(Z,null,Q(k.value.tags,P=>(l(),R(i(j),{key:P,label:P,class:"tag-chip"},null,8,["label"]))),128))])])):F("",!0)]),v[18]||(v[18]=t("div",{class:"preview-divider"},null,-1)),t("div",Cn,[v[17]||(v[17]=t("h4",null,"Content Preview:",-1)),t("div",An,m(k.value.content||"No content available"),1)])])):F("",!0)]),_:1},8,["visible","header"])])}}};var Pn=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,Tn={root:function(s){var n=s.instance;return["p-progressbar p-component",{"p-progressbar-determinate":n.determinate,"p-progressbar-indeterminate":n.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},xn=ce.extend({name:"progressbar",style:Pn,classes:Tn}),In={name:"BaseProgressBar",extends:de,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:xn,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},_e={name:"ProgressBar",extends:In,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return Ie({determinate:this.determinate,indeterminate:this.indeterminate})}}},Mn=["aria-valuenow","data-p"],Fn=["data-p"],Un=["data-p"],Bn=["data-p"];function En(e,s,n,p,h,a){return l(),f("div",z({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":a.dataP},e.ptmi("root")),[a.determinate?(l(),f("div",z({key:0,class:e.cx("value"),style:a.progressStyle,"data-p":a.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(l(),f("div",z({key:0,class:e.cx("label"),"data-p":a.dataP},e.ptm("label")),[se(e.$slots,"default",{},function(){return[O(m(e.value+"%"),1)]})],16,Un)):F("",!0)],16,Fn)):a.indeterminate?(l(),f("div",z({key:1,class:e.cx("value"),"data-p":a.dataP},e.ptm("value")),null,16,Bn)):F("",!0)],16,Mn)}_e.render=En;const zn={class:"rag-analytics"},Vn={class:"overview-cards"},On={class:"trend-indicator"},Rn={class:"progress-info"},Ln={class:"progress-text"},jn={class:"trend-indicator"},Nn={class:"embedding-status"},Kn={class:"charts-row"},Gn={class:"chart-container"},Hn={class:"category-legend"},Wn={class:"legend-label"},qn={class:"legend-value"},Zn={class:"chart-container"},Qn={class:"activity-summary"},Xn={class:"summary-item"},Jn={class:"value"},Yn={class:"summary-item"},ea={class:"value"},ta={class:"detailed-stats"},sa={class:"stats-grid"},na={class:"stat-item"},aa={class:"stat-value"},oa={class:"stat-item"},ia={class:"stat-value"},ra={class:"stat-item"},la={class:"stat-value"},ca={class:"stat-item"},da={class:"stat-value"},ua={class:"health-indicators"},pa={class:"health-item"},ma={class:"health-item"},va={class:"health-item"},ga={class:"health-item"},fa={class:"activity-list"},ha={class:"activity-icon"},ba={class:"activity-content"},ya={class:"activity-message"},$a={class:"activity-time"},_a={class:"activity-status"},ka={__name:"RAGAnalytics",props:{statistics:{type:Object,default:null}},setup(e){const s=e,n=x(null),p=x(null),h=x({total_searches:1247,avg_response_time:89,cache_hit_rate:85,successful_queries:1198,failed_queries:49}),a=pe(()=>s.statistics?.embedding_status||{completed:0,processing:0,failed:0}),S=pe(()=>{const _=a.value.completed+a.value.processing+a.value.failed;if(_===0)return"No Data";const o=a.value.completed/_*100;return o>=95?"Excellent":o>=85?"Good":o>=70?"Fair":"Needs Attention"}),D=pe(()=>{const _=S.value;return _==="Excellent"?"success":_==="Good"?"info":_==="Fair"?"warning":"danger"}),I=pe(()=>{const _=s.statistics?.total_size_mb||0,o=10*1024;return Math.round(_/o*100)}),$=pe(()=>(s.statistics?.categories||[]).map(o=>({name:K(o),count:Math.floor(Math.random()*100)+10}))),y=x("March 15th"),k=x(156),E=x([{id:1,type:"upload",message:'New document uploaded: "Project Requirements v2.pdf"',timestamp:new Date(Date.now()-5*6e4),status:"completed"},{id:2,type:"search",message:'Search query executed: "user authentication process"',timestamp:new Date(Date.now()-12*6e4),status:"completed"},{id:3,type:"reindex",message:"Knowledge base reindexing started",timestamp:new Date(Date.now()-25*6e4),status:"processing"},{id:4,type:"bulk_import",message:"Bulk import completed: 23 documents processed",timestamp:new Date(Date.now()-45*6e4),status:"completed"},{id:5,type:"delete",message:'Document deleted: "Obsolete Process v1.0"',timestamp:new Date(Date.now()-62*6e4),status:"completed"}]);be(async()=>{await st(),N()});const N=()=>{W(),q()},W=()=>{if(!n.value||$.value.length===0)return;const _=n.value.getContext("2d");new Ee(_,{type:"doughnut",data:{labels:$.value.map(o=>o.name),datasets:[{data:$.value.map(o=>o.count),backgroundColor:$.value.map((o,u)=>L(u)),borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})},q=()=>{if(!p.value)return;const _=p.value.getContext("2d"),o=[],u=[];for(let d=29;d>=0;d--){const g=new Date;g.setDate(g.getDate()-d),o.push(g.toLocaleDateString("en-US",{month:"short",day:"numeric"})),u.push(Math.floor(Math.random()*20)+5)}new Ee(_,{type:"line",data:{labels:o,datasets:[{label:"Documents Uploaded",data:u,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#667eea",pointBorderColor:"#ffffff",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0,0,0,0.1)"}},x:{grid:{display:!1}}}}})},K=_=>_.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),L=_=>{const o=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7"];return o[_%o.length]},V=_=>({upload:"pi pi-upload",search:"pi pi-search",reindex:"pi pi-refresh",bulk_import:"pi pi-download",delete:"pi pi-trash",edit:"pi pi-pencil"})[_]||"pi pi-info-circle",H=_=>({upload:"#28a745",search:"#007bff",reindex:"#ffc107",bulk_import:"#17a2b8",delete:"#dc3545",edit:"#6c757d"})[_]||"#6c757d",U=_=>({completed:"success",processing:"warning",failed:"danger",pending:"info"})[_]||"secondary",A=_=>{const u=Math.floor((new Date-_)/1e3);return u<60?`${u}s ago`:u<3600?`${Math.floor(u/60)}m ago`:u<86400?`${Math.floor(u/3600)}h ago`:`${Math.floor(u/86400)}d ago`};return(_,o)=>(l(),f("div",zn,[t("div",Vn,[r(i(ee),{class:"analytics-card"},{header:b(()=>[...o[0]||(o[0]=[t("div",{class:"card-icon primary"},[t("i",{class:"pi pi-database"})],-1)])]),title:b(()=>[O(m(e.statistics?.total_documents||0),1)]),subtitle:b(()=>[...o[1]||(o[1]=[O("Total Documents",-1)])]),content:b(()=>[t("div",On,[o[2]||(o[2]=t("i",{class:"pi pi-arrow-up trend-up"},null,-1)),t("span",null,"+"+m(Math.floor(Math.random()*50)+10)+"% this month",1)])]),_:1}),r(i(ee),{class:"analytics-card"},{header:b(()=>[...o[3]||(o[3]=[t("div",{class:"card-icon success"},[t("i",{class:"pi pi-chart-line"})],-1)])]),title:b(()=>[O(m((e.statistics?.total_size_mb||0).toFixed(1))+" MB",1)]),subtitle:b(()=>[...o[4]||(o[4]=[O("Storage Used",-1)])]),content:b(()=>[t("div",Rn,[r(i(_e),{value:I.value,class:"storage-progress"},null,8,["value"]),t("span",Ln,m(I.value)+"% of 10 GB",1)])]),_:1}),r(i(ee),{class:"analytics-card"},{header:b(()=>[...o[5]||(o[5]=[t("div",{class:"card-icon info"},[t("i",{class:"pi pi-search"})],-1)])]),title:b(()=>[O(m(h.value.total_searches||0),1)]),subtitle:b(()=>[...o[6]||(o[6]=[O("Total Searches",-1)])]),content:b(()=>[t("div",jn,[o[7]||(o[7]=t("i",{class:"pi pi-arrow-up trend-up"},null,-1)),t("span",null,m(h.value.avg_response_time||0)+"ms avg response",1)])]),_:1}),r(i(ee),{class:"analytics-card"},{header:b(()=>[...o[8]||(o[8]=[t("div",{class:"card-icon warning"},[t("i",{class:"pi pi-eye"})],-1)])]),title:b(()=>[O(m(a.value.completed||0),1)]),subtitle:b(()=>[...o[9]||(o[9]=[O("Documents Indexed",-1)])]),content:b(()=>[t("div",Nn,[r(i(ne),{value:S.value,severity:D.value,class:"health-badge"},null,8,["value","severity"])])]),_:1})]),t("div",Kn,[r(i(ee),{class:"chart-card"},{title:b(()=>[...o[10]||(o[10]=[O("Document Categories",-1)])]),content:b(()=>[t("div",Gn,[t("canvas",{ref_key:"categoriesChart",ref:n,width:"400",height:"300"},null,512)]),t("div",Hn,[(l(!0),f(Z,null,Q($.value,(u,d)=>(l(),f("div",{key:u.name,class:"legend-item"},[t("div",{class:"legend-color",style:Se({backgroundColor:L(d)})},null,4),t("span",Wn,m(u.name),1),t("span",qn,m(u.count),1)]))),128))])]),_:1}),r(i(ee),{class:"chart-card"},{title:b(()=>[...o[11]||(o[11]=[O("Upload Activity (Last 30 Days)",-1)])]),content:b(()=>[t("div",Zn,[t("canvas",{ref_key:"activityChart",ref:p,width:"400",height:"300"},null,512)]),t("div",Qn,[t("div",Xn,[o[12]||(o[12]=t("span",{class:"label"},"Peak Day:",-1)),t("span",Jn,m(y.value),1)]),t("div",Yn,[o[13]||(o[13]=t("span",{class:"label"},"Total Uploads:",-1)),t("span",ea,m(k.value),1)])])]),_:1})]),t("div",ta,[r(i(ee),{class:"stats-card"},{title:b(()=>[...o[14]||(o[14]=[O("Search Performance",-1)])]),content:b(()=>[t("div",sa,[t("div",na,[t("div",aa,m(h.value.avg_response_time||0)+"ms",1),o[15]||(o[15]=t("div",{class:"stat-label"},"Average Response Time",-1))]),t("div",oa,[t("div",ia,m(h.value.cache_hit_rate||0)+"%",1),o[16]||(o[16]=t("div",{class:"stat-label"},"Cache Hit Rate",-1))]),t("div",ra,[t("div",la,m(h.value.successful_queries||0),1),o[17]||(o[17]=t("div",{class:"stat-label"},"Successful Queries",-1))]),t("div",ca,[t("div",da,m(h.value.failed_queries||0),1),o[18]||(o[18]=t("div",{class:"stat-label"},"Failed Queries",-1))])])]),_:1}),r(i(ee),{class:"stats-card"},{title:b(()=>[...o[19]||(o[19]=[O("System Health",-1)])]),content:b(()=>[t("div",ua,[t("div",pa,[o[20]||(o[20]=t("div",{class:"health-label"},"Vector Database",-1)),r(i(ne),{value:"Healthy",severity:"success",class:"health-badge"})]),t("div",ma,[o[21]||(o[21]=t("div",{class:"health-label"},"Embedding Service",-1)),r(i(ne),{value:"Operational",severity:"success",class:"health-badge"})]),t("div",va,[o[22]||(o[22]=t("div",{class:"health-label"},"Search Engine",-1)),r(i(ne),{value:"Online",severity:"success",class:"health-badge"})]),t("div",ga,[o[23]||(o[23]=t("div",{class:"health-label"},"Document Processing",-1)),r(i(ne),{value:"Ready",severity:"success",class:"health-badge"})])])]),_:1})]),r(i(ee),{class:"activity-card"},{title:b(()=>[...o[24]||(o[24]=[O("Recent Activity",-1)])]),content:b(()=>[t("div",fa,[(l(!0),f(Z,null,Q(E.value,u=>(l(),f("div",{key:u.id,class:"activity-item"},[t("div",ha,[t("i",{class:G(V(u.type)),style:Se({color:H(u.type)})},null,6)]),t("div",ba,[t("div",ya,m(u.message),1),t("div",$a,m(A(u.timestamp)),1)]),t("div",_a,[r(i(ne),{value:u.status,severity:U(u.status),class:"activity-badge"},null,8,["value","severity"])])]))),128))])]),_:1})]))}};var Fe={name:"ChevronUpIcon",extends:je};function wa(e){return Sa(e)||Da(e)||Aa(e)||Ca()}function Ca(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aa(e,s){if(e){if(typeof e=="string")return xe(e,s);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,s):void 0}}function Da(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sa(e){if(Array.isArray(e))return xe(e)}function xe(e,s){(s==null||s>e.length)&&(s=e.length);for(var n=0,p=Array(s);n<s;n++)p[n]=e[n];return p}function Pa(e,s,n,p,h,a){return l(),f("svg",z({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),wa(s[0]||(s[0]=[t("path",{d:"M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z",fill:"currentColor"},null,-1)])),16)}Fe.render=Pa;var Ta={root:"p-accordioncontent",content:"p-accordioncontent-content"},xa=ce.extend({name:"accordioncontent",classes:Ta}),Ia={name:"BaseAccordionContent",extends:de,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:xa,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Je={name:"AccordionContent",extends:Ia,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.$id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.$id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return z(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function Ma(e,s,n,p,h,a){return e.asChild?se(e.$slots,"default",{key:1,class:G(e.cx("root")),active:a.$pcAccordionPanel.active,a11yAttrs:a.a11yAttrs}):(l(),R(at,z({key:0,name:"p-toggleable-content"},e.ptm("transition",a.ptParams)),{default:b(function(){return[!a.$pcAccordion.lazy||a.$pcAccordionPanel.active?me((l(),R(te(e.as),z({key:0,class:e.cx("root")},a.attrs),{default:b(function(){return[t("div",z({class:e.cx("content")},e.ptm("content",a.ptParams)),[se(e.$slots,"default")],16)]}),_:3},16,["class"])),[[nt,a.$pcAccordion.lazy?!0:a.$pcAccordionPanel.active]]):F("",!0)]}),_:3},16))}Je.render=Ma;var Fa={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},Ua=ce.extend({name:"accordionheader",classes:Fa}),Ba={name:"BaseAccordionHeader",extends:de,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Ua,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Ye={name:"AccordionHeader",extends:Ba,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){!this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onKeydown:function(s){switch(s.code){case"ArrowDown":this.onArrowDownKey(s);break;case"ArrowUp":this.onArrowUpKey(s);break;case"Home":this.onHomeKey(s);break;case"End":this.onEndKey(s);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(s);break}},onArrowDownKey:function(s){var n=this.findNextPanel(this.findPanel(s.currentTarget));n?this.changeFocusedPanel(s,n):this.onHomeKey(s),s.preventDefault()},onArrowUpKey:function(s){var n=this.findPrevPanel(this.findPanel(s.currentTarget));n?this.changeFocusedPanel(s,n):this.onEndKey(s),s.preventDefault()},onHomeKey:function(s){var n=this.findFirstPanel();this.changeFocusedPanel(s,n),s.preventDefault()},onEndKey:function(s){var n=this.findLastPanel();this.changeFocusedPanel(s,n),s.preventDefault()},onEnterKey:function(s){this.changeActiveValue(),s.preventDefault()},findPanel:function(s){return s?.closest('[data-pc-name="accordionpanel"]')},findHeader:function(s){return rt(s,'[data-pc-name="accordionheader"]')},findNextPanel:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=n?s:s.nextElementSibling;return p?ze(p,"data-p-disabled")?this.findNextPanel(p):this.findHeader(p):null},findPrevPanel:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=n?s:s.previousElementSibling;return p?ze(p,"data-p-disabled")?this.findPrevPanel(p):this.findHeader(p):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(s,n){it(this.findHeader(n))}},computed:{id:function(){return"".concat(this.$pcAccordion.$id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.$id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return z(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}},dataP:function(){return Ie({active:this.$pcAccordionPanel.active})}},components:{ChevronUpIcon:Fe,ChevronDownIcon:mt},directives:{ripple:ot}};function Ea(e,s,n,p,h,a){var S=Ke("ripple");return e.asChild?se(e.$slots,"default",{key:1,class:G(e.cx("root")),active:a.$pcAccordionPanel.active,a11yAttrs:a.a11yAttrs,onClick:a.onClick}):me((l(),R(te(e.as),z({key:0,"data-p":a.dataP,class:e.cx("root"),onClick:a.onClick},a.attrs),{default:b(function(){return[se(e.$slots,"default",{active:a.$pcAccordionPanel.active}),se(e.$slots,"toggleicon",{active:a.$pcAccordionPanel.active,class:G(e.cx("toggleicon"))},function(){return[a.$pcAccordionPanel.active?(l(),R(te(a.$pcAccordion.$slots.collapseicon?a.$pcAccordion.$slots.collapseicon:a.$pcAccordion.collapseIcon?"span":"ChevronUpIcon"),z({key:0,class:[a.$pcAccordion.collapseIcon,e.cx("toggleicon")],"aria-hidden":"true"},e.ptm("toggleicon",a.ptParams)),null,16,["class"])):(l(),R(te(a.$pcAccordion.$slots.expandicon?a.$pcAccordion.$slots.expandicon:a.$pcAccordion.expandIcon?"span":"ChevronDownIcon"),z({key:1,class:[a.$pcAccordion.expandIcon,e.cx("toggleicon")],"aria-hidden":"true"},e.ptm("toggleicon",a.ptParams)),null,16,["class"]))]})]}),_:3},16,["data-p","class","onClick"])),[[S]])}Ye.render=Ea;var za={root:function(s){var n=s.instance,p=s.props;return["p-accordionpanel",{"p-accordionpanel-active":n.active,"p-disabled":p.disabled}]}},Va=ce.extend({name:"accordionpanel",classes:za}),Oa={name:"BaseAccordionPanel",extends:de,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Va,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},et={name:"AccordionPanel",extends:Oa,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return z(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Ra(e,s,n,p,h,a){return e.asChild?se(e.$slots,"default",{key:1,class:G(e.cx("root")),active:a.active,a11yAttrs:a.a11yAttrs}):(l(),R(te(e.as),z({key:0,class:e.cx("root")},a.attrs),{default:b(function(){return[se(e.$slots,"default")]}),_:3},16,["class"]))}et.render=Ra;var La=`
    .p-accordionpanel {
        display: flex;
        flex-direction: column;
        border-style: solid;
        border-width: dt('accordion.panel.border.width');
        border-color: dt('accordion.panel.border.color');
    }

    .p-accordionheader {
        all: unset;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: dt('accordion.header.padding');
        color: dt('accordion.header.color');
        background: dt('accordion.header.background');
        border-style: solid;
        border-width: dt('accordion.header.border.width');
        border-color: dt('accordion.header.border.color');
        font-weight: dt('accordion.header.font.weight');
        border-radius: dt('accordion.header.border.radius');
        transition:
            background dt('accordion.transition.duration'),
            color dt('accordion.transition.duration'),
            outline-color dt('accordion.transition.duration'),
            box-shadow dt('accordion.transition.duration');
        outline-color: transparent;
    }

    .p-accordionpanel:first-child > .p-accordionheader {
        border-width: dt('accordion.header.first.border.width');
        border-start-start-radius: dt('accordion.header.first.top.border.radius');
        border-start-end-radius: dt('accordion.header.first.top.border.radius');
    }

    .p-accordionpanel:last-child > .p-accordionheader {
        border-end-start-radius: dt('accordion.header.last.bottom.border.radius');
        border-end-end-radius: dt('accordion.header.last.bottom.border.radius');
    }

    .p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
        border-end-start-radius: dt('accordion.header.last.active.bottom.border.radius');
        border-end-end-radius: dt('accordion.header.last.active.bottom.border.radius');
    }

    .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.color');
    }

    .p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
        box-shadow: dt('accordion.header.focus.ring.shadow');
        outline: dt('accordion.header.focus.ring.width') dt('accordion.header.focus.ring.style') dt('accordion.header.focus.ring.color');
        outline-offset: dt('accordion.header.focus.ring.offset');
    }

    .p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
        background: dt('accordion.header.hover.background');
        color: dt('accordion.header.hover.color');
    }

    .p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.hover.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
        background: dt('accordion.header.active.background');
        color: dt('accordion.header.active.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.active.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
        background: dt('accordion.header.active.hover.background');
        color: dt('accordion.header.active.hover.color');
    }

    .p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
        color: dt('accordion.header.toggle.icon.active.hover.color');
    }

    .p-accordioncontent-content {
        border-style: solid;
        border-width: dt('accordion.content.border.width');
        border-color: dt('accordion.content.border.color');
        background-color: dt('accordion.content.background');
        color: dt('accordion.content.color');
        padding: dt('accordion.content.padding');
    }
`,ja={root:"p-accordion p-component"},Na=ce.extend({name:"accordion",style:La,classes:ja}),Ka={name:"BaseAccordion",extends:de,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:Na,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},Ue={name:"Accordion",extends:Ka,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{d_value:this.value}},watch:{value:function(s){this.d_value=s},activeIndex:{immediate:!0,handler:function(s){this.hasAccordionTab&&(this.d_value=this.multiple?s?.map(String):s?.toString())}}},methods:{isItemActive:function(s){var n;return this.multiple?(n=this.d_value)===null||n===void 0?void 0:n.includes(s):this.d_value===s},updateValue:function(s){var n,p=this.isItemActive(s);this.multiple?p?this.d_value=this.d_value.filter(function(h){return h!==s}):this.d_value?this.d_value.push(s):this.d_value=[s]:this.d_value=p?null:s,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(n=this.d_value)===null||n===void 0?void 0:n.map(Number):Number(this.d_value)),this.$emit(p?"tab-close":"tab-open",{originalEvent:void 0,index:Number(s)})},isAccordionTab:function(s){return s.type.name==="AccordionTab"},getTabProp:function(s,n){return s.props?s.props[n]:void 0},getKey:function(s,n){return this.getTabProp(s,"header")||n},getHeaderPT:function(s,n){var p=this;return{root:z({onClick:function(a){return p.onTabClick(a,n)}},this.getTabProp(s,"headerProps"),this.getTabPT(s,"header",n)),toggleicon:z(this.getTabProp(s,"headeractionprops"),this.getTabPT(s,"headeraction",n))}},getContentPT:function(s,n){return{root:z(this.getTabProp(s,"contentProps"),this.getTabPT(s,"toggleablecontent",n)),transition:this.getTabPT(s,"transition",n),content:this.getTabPT(s,"content",n)}},getTabPT:function(s,n,p){var h=this.tabs.length,a={props:s.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:p,count:h,first:p===0,last:p===h-1,active:this.isItemActive("".concat(p))}};return z(this.ptm("accordiontab.".concat(n),a),this.ptmo(this.getTabProp(s,"pt"),n,a))},onTabClick:function(s,n){this.$emit("tab-click",{originalEvent:s,index:n})}},computed:{tabs:function(){var s=this;return this.$slots.default().reduce(function(n,p){return s.isAccordionTab(p)?n.push(p):p.children&&p.children instanceof Array&&p.children.forEach(function(h){s.isAccordionTab(h)&&n.push(h)}),n},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:et,AccordionHeader:Ye,AccordionContent:Je,ChevronUpIcon:Fe,ChevronRightIcon:vt}};function Ga(e,s,n,p,h,a){var S=Ce("AccordionHeader"),D=Ce("AccordionContent"),I=Ce("AccordionPanel");return l(),f("div",z({class:e.cx("root")},e.ptmi("root")),[a.hasAccordionTab?(l(!0),f(Z,{key:0},Q(a.tabs,function($,y){return l(),R(I,{key:a.getKey($,y),value:"".concat(y),pt:{root:a.getTabPT($,"root",y)},disabled:a.getTabProp($,"disabled")},{default:b(function(){return[r(S,{class:G(a.getTabProp($,"headerClass")),pt:a.getHeaderPT($,y)},{toggleicon:b(function(k){return[k.active?(l(),R(te(e.$slots.collapseicon?e.$slots.collapseicon:e.collapseIcon?"span":"ChevronDownIcon"),z({key:0,class:[e.collapseIcon,k.class],"aria-hidden":"true"},{ref_for:!0},a.getTabPT($,"headericon",y)),null,16,["class"])):(l(),R(te(e.$slots.expandicon?e.$slots.expandicon:e.expandIcon?"span":"ChevronUpIcon"),z({key:1,class:[e.expandIcon,k.class],"aria-hidden":"true"},{ref_for:!0},a.getTabPT($,"headericon",y)),null,16,["class"]))]}),default:b(function(){return[$.children&&$.children.headericon?(l(),R(te($.children.headericon),{key:0,isTabActive:a.isItemActive("".concat(y)),active:a.isItemActive("".concat(y)),index:y},null,8,["isTabActive","active","index"])):F("",!0),$.props&&$.props.header?(l(),f("span",z({key:1,ref_for:!0},a.getTabPT($,"headertitle",y)),m($.props.header),17)):F("",!0),$.children&&$.children.header?(l(),R(te($.children.header),{key:2})):F("",!0)]}),_:2},1032,["class","pt"]),r(D,{pt:a.getContentPT($,y)},{default:b(function(){return[(l(),R(te($)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):se(e.$slots,"default",{key:1})],16)}Ue.render=Ga;var Ha=ce.extend({name:"accordiontab"}),Wa={name:"BaseAccordionTab",extends:de,props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:Ha,provide:function(){return{$pcAccordionTab:this,$parentInstance:this}}},Be={name:"AccordionTab",extends:Wa,inheritAttrs:!1,mounted:function(){console.warn("Deprecated since v4. Use the new structure of Accordion instead.")}};function qa(e,s,n,p,h,a){return se(e.$slots,"default")}Be.render=qa;const Za={class:"upload-content"},Qa={key:0,class:"upload-empty"},Xa={class:"supported-formats"},Ja={class:"format-chips"},Ya={key:1,class:"upload-files"},eo={class:"files-header"},to={class:"files-list"},so={class:"file-info"},no={class:"file-details"},ao={class:"file-name"},oo={class:"file-meta"},io={class:"file-actions"},ro={key:0,class:"upload-options"},lo={class:"settings-grid"},co={class:"setting-group"},uo={class:"setting-group"},po={class:"setting-group"},mo={class:"checkbox-group"},vo={class:"checkbox-item"},go={class:"checkbox-item"},fo={key:1,class:"upload-progress"},ho={class:"progress-header"},bo={class:"progress-stats"},yo={key:0,class:"current-file"},$o={class:"upload-results"},_o={key:0,class:"success-files"},ko={key:1,class:"failed-files"},wo={class:"dialog-actions"},Co={__name:"RAGUploadDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","upload-complete"],setup(e,{emit:s}){const n=e,p=s,h=$e(),a=x([]),S=x(!1),D=x(!1),I=x(null),$=ge({category:null,tags:"",auto_category:!0,extract_metadata:!0}),y=ge({total:0,completed:0,percentage:0,currentFile:"",successful:[],failed:[]}),k=[{label:"Auto-detect",value:null},{label:"Business Process",value:"business_process"},{label:"Documentation",value:"documentation"},{label:"Training Material",value:"training"},{label:"Policy",value:"policy"},{label:"General",value:"general"}];fe(()=>n.visible,o=>{o||E()});const E=()=>{a.value=[],S.value=!1,D.value=!1,$.category=null,$.tags="",$.auto_category=!0,$.extract_metadata=!0,Object.assign(y,{total:0,completed:0,percentage:0,currentFile:"",successful:[],failed:[]})},N=()=>{I.value?.click()},W=o=>{const u=Array.from(o.target.files);K(u),o.target.value=""},q=o=>{o.preventDefault(),S.value=!1;const u=Array.from(o.dataTransfer.files);K(u)},K=o=>{const d=o.filter(g=>[".pdf",".docx",".txt",".md",".html"].some(M=>g.name.toLowerCase().endsWith(M))?g.size>52428800?(h.warning(`${g.name} - File size exceeds 50MB limit`),!1):!0:(h.warning(`${g.name} - Unsupported file format`),!1)).filter(g=>!a.value.some(T=>T.name===g.name&&T.size===g.size));a.value.push(...d),d.length>0&&h.success(`Added ${d.length} file(s) for upload`)},L=o=>{a.value.splice(o,1)},V=async()=>{if(a.value.length!==0){D.value=!0,y.total=a.value.length,y.completed=0,y.percentage=0,y.successful=[],y.failed=[];try{const o=new FormData;if(a.value.forEach(d=>{o.append("files",d)}),$.category&&o.append("category",$.category),$.tags.trim()){const d=$.tags.split(",").map(g=>g.trim()).filter(g=>g.length>0);o.append("tags",JSON.stringify(d))}o.append("auto_category",$.auto_category.toString()),o.append("extract_metadata",$.extract_metadata.toString());const u=await Y.uploadDocuments(o,{onUploadProgress:d=>{y.percentage=Math.round(d.loaded*100/d.total)}});if(u.success)y.completed=y.total,y.percentage=100,h.success(u.message||"Documents uploaded successfully"),p("upload-complete",u),setTimeout(()=>{H()},2e3);else throw new Error(u.message||"Upload failed")}catch(o){console.error("Upload error:",o),y.failed.push({file:"Upload process",error:o.message||"Unknown error occurred"}),h.error(o.message||"Failed to upload documents")}finally{D.value=!1}}},H=()=>{p("update:visible",!1)},U=o=>{if(o===0)return"0 B";const u=1024,d=["B","KB","MB","GB"],g=Math.floor(Math.log(o)/Math.log(u));return parseFloat((o/Math.pow(u,g)).toFixed(2))+" "+d[g]},A=o=>o.split(".").pop()?.toUpperCase()||"Unknown",_=o=>{const u=o.split(".").pop()?.toLowerCase();return{pdf:"pi pi-file-pdf",docx:"pi pi-file-word",txt:"pi pi-file",md:"pi pi-file-edit",html:"pi pi-code"}[u]||"pi pi-file"};return(o,u)=>(l(),R(i(Me),{visible:e.visible,"onUpdate:visible":u[6]||(u[6]=d=>o.$emit("update:visible",d)),header:"Upload Documents",style:{width:"70vw",maxWidth:"800px"},modal:!0,class:"upload-dialog"},{footer:b(()=>[t("div",wo,[r(i(B),{label:"Cancel",icon:"pi pi-times",class:"p-button-outlined",onClick:H,disabled:D.value},null,8,["disabled"]),D.value?(l(),R(i(B),{key:1,label:"Uploading...",icon:"pi pi-spinner pi-spin",class:"p-button-primary",disabled:""})):(l(),R(i(B),{key:0,label:"Upload Documents",icon:"pi pi-upload",class:"p-button-primary",onClick:V,disabled:a.value.length===0},null,8,["disabled"]))])]),default:b(()=>[t("div",Za,[t("div",{class:G(["upload-zone",{"drag-over":S.value,"has-files":a.value.length>0}]),onDrop:q,onDragover:u[0]||(u[0]=re(d=>S.value=!0,["prevent"])),onDragleave:u[1]||(u[1]=re(d=>S.value=!1,["prevent"])),onClick:N},[a.value.length===0?(l(),f("div",Qa,[u[8]||(u[8]=t("div",{class:"upload-icon"},[t("i",{class:"pi pi-cloud-upload"})],-1)),u[9]||(u[9]=t("h3",null,"Drag & Drop Documents",-1)),u[10]||(u[10]=t("p",null,"or click to browse files",-1)),t("div",Xa,[u[7]||(u[7]=t("strong",null,"Supported formats:",-1)),t("div",Ja,[r(i(j),{label:"PDF",class:"format-chip"}),r(i(j),{label:"DOCX",class:"format-chip"}),r(i(j),{label:"TXT",class:"format-chip"}),r(i(j),{label:"MD",class:"format-chip"}),r(i(j),{label:"HTML",class:"format-chip"})])])])):(l(),f("div",Ya,[t("div",eo,[t("h4",null,"Selected Files ("+m(a.value.length)+")",1),r(i(B),{label:"Add More",icon:"pi pi-plus",class:"p-button-text",onClick:N})]),t("div",to,[(l(!0),f(Z,null,Q(a.value,(d,g)=>(l(),f("div",{key:`file-${g}`,class:"file-item"},[t("div",so,[t("i",{class:G([_(d.name),"file-icon"])},null,2),t("div",no,[t("div",ao,m(d.name),1),t("div",oo,m(U(d.size))+" • "+m(A(d.name)),1)])]),t("div",io,[r(i(B),{icon:"pi pi-times",class:"p-button-rounded p-button-text p-button-sm",onClick:T=>L(g)},null,8,["onClick"])])]))),128))])]))],34),a.value.length>0?(l(),f("div",ro,[r(i(Ue),{activeIndex:0},{default:b(()=>[r(i(Be),{header:"Upload Settings"},{default:b(()=>[t("div",lo,[t("div",co,[u[11]||(u[11]=t("label",{class:"setting-label"},"Category",-1)),r(i(le),{modelValue:$.category,"onUpdate:modelValue":u[2]||(u[2]=d=>$.category=d),options:k,"option-label":"label","option-value":"value",placeholder:"Select category",class:"setting-input"},null,8,["modelValue"])]),t("div",uo,[u[12]||(u[12]=t("label",{class:"setting-label"},"Tags (comma-separated)",-1)),r(i(he),{modelValue:$.tags,"onUpdate:modelValue":u[3]||(u[3]=d=>$.tags=d),placeholder:"e.g. policy, training, important",class:"setting-input"},null,8,["modelValue"])]),t("div",po,[u[15]||(u[15]=t("label",{class:"setting-label"},"Options",-1)),t("div",mo,[t("div",vo,[r(i(Ve),{modelValue:$.auto_category,"onUpdate:modelValue":u[4]||(u[4]=d=>$.auto_category=d),binary:!0,"input-id":"auto-category"},null,8,["modelValue"]),u[13]||(u[13]=t("label",{for:"auto-category"},"Auto-detect category",-1))]),t("div",go,[r(i(Ve),{modelValue:$.extract_metadata,"onUpdate:modelValue":u[5]||(u[5]=d=>$.extract_metadata=d),binary:!0,"input-id":"extract-metadata"},null,8,["modelValue"]),u[14]||(u[14]=t("label",{for:"extract-metadata"},"Extract metadata",-1))])])])])]),_:1})]),_:1})])):F("",!0),D.value?(l(),f("div",fo,[t("div",ho,[u[16]||(u[16]=t("h4",null,"Uploading Documents...",-1)),t("span",bo,m(y.completed)+"/"+m(y.total),1)]),r(i(_e),{value:y.percentage,class:"upload-progress-bar"},null,8,["value"]),y.currentFile?(l(),f("div",yo," Processing: "+m(y.currentFile),1)):F("",!0),t("div",$o,[y.successful.length>0?(l(),f("div",_o,[u[17]||(u[17]=t("h5",null,[t("i",{class:"pi pi-check-circle mr-1"}),O("Successfully Uploaded")],-1)),t("ul",null,[(l(!0),f(Z,null,Q(y.successful,d=>(l(),f("li",{key:d},m(d),1))),128))])])):F("",!0),y.failed.length>0?(l(),f("div",ko,[u[18]||(u[18]=t("h5",null,[t("i",{class:"pi pi-times-circle mr-1"}),O("Failed Uploads")],-1)),t("ul",null,[(l(!0),f(Z,null,Q(y.failed,d=>(l(),f("li",{key:d.file},m(d.file)+": "+m(d.error),1))),128))])])):F("",!0)])])):F("",!0)]),t("input",{ref_key:"fileInput",ref:I,type:"file",multiple:"",accept:".pdf,.docx,.txt,.md,.html",onChange:W,style:{display:"none"}},null,544)]),_:1},8,["visible"]))}},Ao={class:"import-content"},Do={key:0,class:"upload-empty"},So={key:1,class:"selected-file"},Po={class:"file-info"},To={class:"file-details"},xo={class:"file-name"},Io={class:"file-size"},Mo={key:0,class:"import-progress"},Fo={class:"progress-header"},Uo={class:"progress-stats"},Bo={key:0,class:"current-file"},Eo={class:"import-details"},zo={class:"detail-item"},Vo={class:"value success"},Oo={class:"detail-item"},Ro={class:"value error"},Lo={class:"detail-item"},jo={class:"value"},No={key:1,class:"import-errors"},Ko={class:"error-list"},Go={key:0,class:"more-errors"},Ho={key:1,class:"import-results"},Wo={class:"results-summary"},qo={class:"summary-grid"},Zo={class:"summary-item success"},Qo={class:"summary-value"},Xo={class:"summary-item error"},Jo={class:"summary-value"},Yo={class:"summary-item info"},ei={class:"summary-value"},ti={key:0,class:"final-errors"},si={class:"error-details"},ni={key:2,class:"import-instructions"},ai={class:"supported-formats"},oi={class:"format-chips"},ii={class:"dialog-actions"},ri={__name:"RAGBulkImportDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","import-complete"],setup(e,{emit:s}){const n=e,p=s,h=He(),a=x(null),S=x(!1),D=x(!1),I=x(!1),$=x(null),y=ge({total:0,processed:0,processed_files:0,failed_files:0,processing_time_seconds:0,current_file:"",errors:[]}),k=ge({processed_files:0,failed_files:0,processing_time_seconds:0,errors:[]});let E=null;const N=pe(()=>y.total===0?0:Math.round(y.processed/y.total*100));fe(()=>n.visible,d=>{d?q():(W(),E&&(E.close(),E=null))});const W=()=>{a.value=null,S.value=!1,D.value=!1,I.value=!1,Object.assign(y,{total:0,processed:0,processed_files:0,failed_files:0,processing_time_seconds:0,current_file:"",errors:[]}),Object.assign(k,{processed_files:0,failed_files:0,processing_time_seconds:0,errors:[]})},q=()=>{try{E=Y.createWebSocket(d=>{d.type==="bulk_import_progress"&&(y.processed=d.processed||0,y.total=d.total||0,y.current_file=d.current_file||"")})}catch(d){console.error("Failed to connect WebSocket:",d)}},K=()=>{$.value?.click()},L=d=>{const g=d.target.files[0];g&&H(g)&&(a.value=g),d.target.value=""},V=d=>{d.preventDefault(),S.value=!1;const g=d.dataTransfer.files[0];g&&H(g)&&(a.value=g)},H=d=>{if(!d.name.toLowerCase().endsWith(".zip"))return h.add({severity:"warn",summary:"Invalid File",detail:"Please select a ZIP archive file",life:3e3}),!1;const g=500*1024*1024;return d.size>g?(h.add({severity:"warn",summary:"File Too Large",detail:"ZIP archive must be smaller than 500MB",life:3e3}),!1):d.size===0?(h.add({severity:"warn",summary:"Empty File",detail:"Selected ZIP file is empty",life:3e3}),!1):!0},U=()=>{a.value=null},A=async()=>{if(a.value){D.value=!0,I.value=!1;try{const d=await Y.bulkImport(a.value,{onUploadProgress:g=>{console.log("Upload progress:",Math.round(g.loaded*100/g.total))}});Object.assign(k,{processed_files:d.processed_files||0,failed_files:d.failed_files||0,processing_time_seconds:d.processing_time_seconds||0,errors:d.errors||[]}),Object.assign(y,{processed_files:d.processed_files||0,failed_files:d.failed_files||0,processing_time_seconds:d.processing_time_seconds||0,errors:d.errors||[]}),I.value=!0,h.add({severity:d.failed_files>0?"warn":"success",summary:"Import Complete",detail:`Processed ${d.processed_files} files, ${d.failed_files} failed`,life:5e3}),p("import-complete",d)}catch(d){console.error("Import error:",d),I.value=!0,k.errors=[d.message||"Import failed with unknown error"],h.add({severity:"error",summary:"Import Failed",detail:d.message||"Failed to import documents",life:5e3})}finally{D.value=!1}}},_=()=>{p("update:visible",!1)},o=d=>{if(d===0)return"0 B";const g=1024,T=["B","KB","MB","GB"],w=Math.floor(Math.log(d)/Math.log(g));return parseFloat((d/Math.pow(g,w)).toFixed(2))+" "+T[w]},u=d=>{if(!d||d<1)return"< 1s";if(d<60)return`${d.toFixed(1)}s`;const g=Math.floor(d/60),T=Math.floor(d%60);return`${g}m ${T}s`};return(d,g)=>(l(),R(i(Me),{visible:e.visible,"onUpdate:visible":g[2]||(g[2]=T=>d.$emit("update:visible",T)),header:"Bulk Import from ZIP Archive",style:{width:"60vw",maxWidth:"700px"},modal:!0,class:"bulk-import-dialog"},{footer:b(()=>[t("div",ii,[r(i(B),{label:"Cancel",icon:"pi pi-times",class:"p-button-outlined",onClick:_,disabled:D.value},null,8,["disabled"]),I.value?(l(),R(i(B),{key:0,label:"Done",icon:"pi pi-check",class:"p-button-primary",onClick:_})):D.value?(l(),R(i(B),{key:2,label:"Importing...",icon:"pi pi-spinner pi-spin",class:"p-button-primary",disabled:""})):(l(),R(i(B),{key:1,label:"Start Import",icon:"pi pi-download",class:"p-button-primary",onClick:A,disabled:!a.value},null,8,["disabled"]))])]),default:b(()=>[t("div",Ao,[t("div",{class:G(["zip-upload-zone",{"drag-over":S.value,"has-file":a.value}]),onDrop:V,onDragover:g[0]||(g[0]=re(T=>S.value=!0,["prevent"])),onDragleave:g[1]||(g[1]=re(T=>S.value=!1,["prevent"])),onClick:K},[a.value?(l(),f("div",So,[t("div",Po,[g[6]||(g[6]=t("i",{class:"pi pi-file-zip file-icon"},null,-1)),t("div",To,[t("div",xo,m(a.value.name),1),t("div",Io,m(o(a.value.size)),1)])]),r(i(B),{icon:"pi pi-times",class:"p-button-rounded p-button-text p-button-danger",onClick:U})])):(l(),f("div",Do,[g[3]||(g[3]=t("div",{class:"upload-icon"},[t("i",{class:"pi pi-file-zip"})],-1)),g[4]||(g[4]=t("h3",null,"Select ZIP Archive",-1)),g[5]||(g[5]=t("p",null,"Drag & drop or click to browse",-1)),r(i(B),{label:"Browse Files",icon:"pi pi-folder-open",class:"p-button-outlined",onClick:re(K,["stop"])})]))],34),D.value?(l(),f("div",Mo,[t("div",Fo,[g[7]||(g[7]=t("h4",null,"Importing Documents...",-1)),t("span",Uo,m(y.processed)+"/"+m(y.total),1)]),r(i(_e),{value:N.value,class:"import-progress-bar"},null,8,["value"]),y.current_file?(l(),f("div",Bo," Processing: "+m(y.current_file),1)):F("",!0),t("div",Eo,[t("div",zo,[g[8]||(g[8]=t("span",{class:"label"},"Processed:",-1)),t("span",Vo,m(y.processed_files),1)]),t("div",Oo,[g[9]||(g[9]=t("span",{class:"label"},"Failed:",-1)),t("span",Ro,m(y.failed_files),1)]),t("div",Lo,[g[10]||(g[10]=t("span",{class:"label"},"Processing Time:",-1)),t("span",jo,m(u(y.processing_time_seconds)),1)])]),y.errors?.length>0?(l(),f("div",No,[g[11]||(g[11]=t("h5",null,[t("i",{class:"pi pi-exclamation-triangle mr-1"}),O("Import Errors")],-1)),t("div",Ko,[(l(!0),f(Z,null,Q(y.errors.slice(0,5),(T,w)=>(l(),f("div",{key:w,class:"error-item"},m(T),1))),128)),y.errors.length>5?(l(),f("div",Go," +"+m(y.errors.length-5)+" more errors ",1)):F("",!0)])])):F("",!0)])):F("",!0),I.value&&!D.value?(l(),f("div",Ho,[g[15]||(g[15]=t("div",{class:"results-header"},[t("div",{class:"success-icon"},[t("i",{class:"pi pi-check-circle"})]),t("h3",null,"Import Complete!")],-1)),t("div",Wo,[t("div",qo,[t("div",Zo,[t("div",Qo,m(k.processed_files),1),g[12]||(g[12]=t("div",{class:"summary-label"},"Processed",-1))]),t("div",Xo,[t("div",Jo,m(k.failed_files),1),g[13]||(g[13]=t("div",{class:"summary-label"},"Failed",-1))]),t("div",Yo,[t("div",ei,m(u(k.processing_time_seconds)),1),g[14]||(g[14]=t("div",{class:"summary-label"},"Duration",-1))])])]),k.errors?.length>0?(l(),f("div",ti,[r(i(Ue),null,{default:b(()=>[r(i(Be),{header:`View Errors (${k.errors.length})`},{default:b(()=>[t("div",si,[(l(!0),f(Z,null,Q(k.errors,(T,w)=>(l(),f("div",{key:w,class:"error-detail"},m(T),1))),128))])]),_:1},8,["header"])]),_:1})])):F("",!0)])):F("",!0),!a.value&&!D.value&&!I.value?(l(),f("div",ni,[g[17]||(g[17]=t("h4",null,"How to prepare your ZIP archive:",-1)),g[18]||(g[18]=t("ul",{class:"instructions-list"},[t("li",null,"Include only supported file types: PDF, DOCX, TXT, MD, HTML"),t("li",null,"Organize files in folders by category (optional)"),t("li",null,"Maximum archive size: 500MB"),t("li",null,"Individual file size limit: 50MB each"),t("li",null,"Avoid duplicate file names")],-1)),t("div",ai,[g[16]||(g[16]=t("strong",null,"Supported formats:",-1)),t("div",oi,[r(i(j),{label:"PDF",class:"format-chip"}),r(i(j),{label:"DOCX",class:"format-chip"}),r(i(j),{label:"TXT",class:"format-chip"}),r(i(j),{label:"MD",class:"format-chip"}),r(i(j),{label:"HTML",class:"format-chip"})])])])):F("",!0)]),t("input",{ref_key:"fileInput",ref:$,type:"file",accept:".zip",onChange:L,style:{display:"none"}},null,544)]),_:1},8,["visible"]))}},li={key:0,class:"document-detail-content"},ci={class:"document-header"},di={class:"header-icon"},ui={class:"header-info"},pi={class:"document-title"},mi={class:"document-meta"},vi={class:"version"},gi={class:"size"},fi={class:"action-buttons"},hi={class:"metadata-section"},bi={class:"metadata-grid"},yi={class:"metadata-item"},$i={class:"metadata-item"},_i={class:"metadata-item"},ki={class:"metadata-item"},wi={class:"metadata-item"},Ci={class:"metadata-item"},Ai={key:0,class:"tags-section"},Di={class:"tags-container"},Si={class:"content-section"},Pi={class:"section-header"},Ti={class:"content-display"},xi={key:1,class:"content-full"},Ii={class:"content-text"},Mi={key:1,class:"similar-section"},Fi={class:"similar-list"},Ui=["onClick"],Bi={class:"similar-info"},Ei={class:"similar-title"},zi={class:"similar-meta"},Vi={class:"similarity-score"},Oi={key:2,class:"version-section"},Ri={class:"version-list"},Li={class:"version-info"},ji={class:"version-number"},Ni={class:"version-meta"},Ki={key:0,class:"version-changes"},Gi={class:"version-actions"},Hi={key:1,class:"edit-overlay"},Wi={class:"edit-header"},qi={class:"edit-actions"},Zi={class:"edit-form"},Qi={class:"form-group"},Xi={class:"form-group"},Ji={class:"form-group"},Yi={class:"form-group"},er={__name:"RAGDocumentDetail",props:{visible:{type:Boolean,default:!1},document:{type:Object,default:null}},emits:["update:visible","document-updated","document-deleted"],setup(e,{emit:s}){const n=e,p=s,h=He(),a=Ne(),S=x(!1),D=x(!1),I=x(!1),$=x([]),y=x([]),k=ge({title:"",category:"",content:"",tagsText:""}),E=[{label:"Business Process",value:"business_process"},{label:"Documentation",value:"documentation"},{label:"Training Material",value:"training"},{label:"Policy",value:"policy"},{label:"General",value:"general"}];fe(()=>n.document,async C=>{C&&(await W(),await q())}),fe(()=>n.visible,C=>{C||N()}),be(()=>{n.document&&(W(),q())});const N=()=>{S.value=!1,D.value=!1,I.value=!1,$.value=[],y.value=[]},W=async()=>{if(n.document?.id)try{const C=await Y.getSimilarDocuments(n.document.id,5);$.value=C.similar_documents||[]}catch(C){console.error("Error loading similar documents:",C)}},q=async()=>{if(n.document?.id)try{const C=await Y.getDocumentHistory(n.document.id);y.value=C.versions||[]}catch(C){console.error("Error loading version history:",C),y.value=[{version:n.document.version||1,author:n.document.author||"Unknown",created_at:n.document.updated_at||new Date().toISOString(),change_summary:"Current version"}]}},K=()=>{S.value=!S.value},L=()=>{const C=n.document?.content||"No content available";return C.length>300?C.substring(0,300)+"...":C},V=()=>{k.title=n.document?.title||"",k.category=n.document?.category||"",k.content=n.document?.content||"",k.tagsText=n.document?.tags?.join(", ")||"",D.value=!0},H=()=>{D.value=!1,Object.assign(k,{title:"",category:"",content:"",tagsText:""})},U=async()=>{I.value=!0;try{const C={content:k.content,metadata:{title:k.title,category:k.category,tags:k.tagsText.split(",").map(c=>c.trim()).filter(c=>c.length>0)}};await Y.updateDocument(n.document.id,C),h.add({severity:"success",summary:"Document Updated",detail:"Document has been updated successfully",life:3e3}),D.value=!1,p("document-updated")}catch(C){console.error("Error updating document:",C),h.add({severity:"error",summary:"Update Failed",detail:C.message||"Failed to update document",life:5e3})}finally{I.value=!1}},A=()=>{h.add({severity:"info",summary:"Download",detail:"Document download feature coming soon",life:3e3})},_=()=>{a.require({message:`Are you sure you want to delete "${n.document?.title}"?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:o,reject:()=>{}})},o=async()=>{try{await Y.deleteDocument(n.document.id),h.add({severity:"success",summary:"Document Deleted",detail:"Document has been deleted successfully",life:3e3}),p("document-deleted")}catch(C){console.error("Error deleting document:",C),h.add({severity:"error",summary:"Delete Failed",detail:C.message||"Failed to delete document",life:5e3})}},u=C=>{p("update:visible",!1),console.log("Navigate to similar document:",C.id)},d=async C=>{a.require({message:`Are you sure you want to restore version ${C}?`,header:"Restore Version",icon:"pi pi-question-circle",accept:async()=>{try{await Y.restoreDocumentVersion(n.document.id,C),h.add({severity:"success",summary:"Version Restored",detail:`Document restored to version ${C}`,life:3e3}),p("document-updated")}catch(c){console.error("Error restoring version:",c),h.add({severity:"error",summary:"Restore Failed",detail:c.message||"Failed to restore version",life:5e3})}},reject:()=>{}})},g=C=>C?C.charAt(0).toUpperCase()+C.slice(1).replace(/_/g," "):"General",T=C=>({upload:"Manual Upload",bulk_import:"Bulk Import",api:"API Import",system:"System Generated"})[C]||"Unknown",w=C=>C?new Date(C).toLocaleString():"Unknown",M=C=>{if(!C||C===0)return"0 B";const c=1024,v=["B","KB","MB","GB"],X=Math.floor(Math.log(C)/Math.log(c));return parseFloat((C/Math.pow(c,X)).toFixed(2))+" "+v[X]},ae=C=>{const c=C?.source||"unknown";return{upload:"pi pi-upload",bulk_import:"pi pi-download",api:"pi pi-cog",system:"pi pi-server"}[c]||"pi pi-file"},oe=C=>({active:"Active",archived:"Archived",processing:"Processing",error:"Error"})[C]||"Unknown",ke=C=>({active:"success",archived:"secondary",processing:"warning",error:"danger"})[C]||"secondary",we=C=>({business_process:"category-business",documentation:"category-docs",training:"category-training",policy:"category-policy",general:"category-general"})[C]||"category-general";return(C,c)=>(l(),R(i(ct),{visible:e.visible,"onUpdate:visible":c[4]||(c[4]=v=>C.$emit("update:visible",v)),header:"Document Details",position:"right",style:{width:"50vw",minWidth:"600px"},class:"document-detail-sidebar"},{default:b(()=>[e.document?(l(),f("div",li,[t("div",ci,[t("div",di,[t("i",{class:G([ae(e.document),"doc-icon"])},null,2)]),t("div",ui,[t("h2",pi,m(e.document.title||"Untitled Document"),1),t("div",mi,[r(i(ne),{value:oe(e.document.status),severity:ke(e.document.status),class:"status-badge"},null,8,["value","severity"]),c[5]||(c[5]=t("span",{class:"separator"},"•",-1)),t("span",vi,"Version "+m(e.document.version||1),1),c[6]||(c[6]=t("span",{class:"separator"},"•",-1)),t("span",gi,m(M(e.document.size)),1)])])]),t("div",fi,[r(i(B),{label:"Edit",icon:"pi pi-pencil",class:"p-button-primary p-button-sm",onClick:V}),r(i(B),{label:"Download",icon:"pi pi-download",class:"p-button-outlined p-button-sm",onClick:A}),r(i(B),{label:"Delete",icon:"pi pi-trash",class:"p-button-outlined p-button-danger p-button-sm",onClick:_})]),t("div",hi,[c[13]||(c[13]=t("h3",{class:"section-title"},"Metadata",-1)),t("div",bi,[t("div",yi,[c[7]||(c[7]=t("label",null,"Category:",-1)),r(i(j),{label:g(e.document.category),class:G(we(e.document.category))},null,8,["label","class"])]),t("div",$i,[c[8]||(c[8]=t("label",null,"Author:",-1)),t("span",null,m(e.document.author||"Unknown"),1)]),t("div",_i,[c[9]||(c[9]=t("label",null,"Source:",-1)),t("span",null,m(T(e.document.source)),1)]),t("div",ki,[c[10]||(c[10]=t("label",null,"Created:",-1)),t("span",null,m(w(e.document.created_at)),1)]),t("div",wi,[c[11]||(c[11]=t("label",null,"Updated:",-1)),t("span",null,m(w(e.document.updated_at)),1)]),t("div",Ci,[c[12]||(c[12]=t("label",null,"Language:",-1)),t("span",null,m(e.document.language||"Auto-detected"),1)])])]),e.document.tags?.length>0?(l(),f("div",Ai,[c[14]||(c[14]=t("h3",{class:"section-title"},"Tags",-1)),t("div",Di,[(l(!0),f(Z,null,Q(e.document.tags,v=>(l(),R(i(j),{key:v,label:v,class:"tag-chip"},null,8,["label"]))),128))])])):F("",!0),t("div",Si,[t("div",Pi,[c[15]||(c[15]=t("h3",{class:"section-title"},"Content",-1)),r(i(B),{label:S.value?"Show Preview":"Show Full",icon:S.value?"pi pi-compress":"pi pi-expand",class:"p-button-text p-button-sm",onClick:K},null,8,["label","icon"])]),t("div",Ti,[S.value?(l(),f("div",xi,[t("div",Ii,m(e.document.content||"No content available"),1)])):(l(),f("div",{key:0,class:G(["content-preview",{expandable:!S.value}])},m(L()),3))])]),$.value.length>0?(l(),f("div",Mi,[c[16]||(c[16]=t("h3",{class:"section-title"},"Similar Documents",-1)),t("div",Fi,[(l(!0),f(Z,null,Q($.value,v=>(l(),f("div",{key:v.id,class:"similar-item",onClick:X=>u(v)},[t("div",Bi,[t("div",Ei,m(v.title),1),t("div",zi,m(g(v.category))+" • "+m(w(v.created_at)),1)]),t("div",Vi,m((v.similarity*100).toFixed(1))+"% ",1)],8,Ui))),128))])])):F("",!0),y.value.length>0?(l(),f("div",Oi,[c[17]||(c[17]=t("h3",{class:"section-title"},"Version History",-1)),t("div",Ri,[(l(!0),f(Z,null,Q(y.value,v=>(l(),f("div",{key:v.version,class:G(["version-item",{current:v.version===e.document.version}])},[t("div",Li,[t("div",ji,"v"+m(v.version),1),t("div",Ni,m(v.author)+" • "+m(w(v.created_at)),1),v.change_summary?(l(),f("div",Ki,m(v.change_summary),1)):F("",!0)]),t("div",Gi,[v.version!==e.document.version?(l(),R(i(B),{key:0,label:"Restore",icon:"pi pi-undo",class:"p-button-text p-button-sm",onClick:X=>d(v.version)},null,8,["onClick"])):F("",!0)])],2))),128))])])):F("",!0)])):F("",!0),D.value?(l(),f("div",Hi,[t("div",Wi,[c[18]||(c[18]=t("h3",null,"Edit Document",-1)),t("div",qi,[r(i(B),{label:"Cancel",icon:"pi pi-times",class:"p-button-outlined p-button-sm",onClick:H}),r(i(B),{label:"Save",icon:"pi pi-check",class:"p-button-primary p-button-sm",onClick:U,loading:I.value},null,8,["loading"])])]),t("div",Zi,[t("div",Qi,[c[19]||(c[19]=t("label",null,"Title:",-1)),r(i(he),{modelValue:k.title,"onUpdate:modelValue":c[0]||(c[0]=v=>k.title=v),placeholder:"Document title",class:"edit-input"},null,8,["modelValue"])]),t("div",Xi,[c[20]||(c[20]=t("label",null,"Category:",-1)),r(i(le),{modelValue:k.category,"onUpdate:modelValue":c[1]||(c[1]=v=>k.category=v),options:E,"option-label":"label","option-value":"value",placeholder:"Select category",class:"edit-input"},null,8,["modelValue"])]),t("div",Ji,[c[21]||(c[21]=t("label",null,"Tags (comma-separated):",-1)),r(i(he),{modelValue:k.tagsText,"onUpdate:modelValue":c[2]||(c[2]=v=>k.tagsText=v),placeholder:"tag1, tag2, tag3",class:"edit-input"},null,8,["modelValue"])]),t("div",Yi,[c[22]||(c[22]=t("label",null,"Content:",-1)),r(i(lt),{modelValue:k.content,"onUpdate:modelValue":c[3]||(c[3]=v=>k.content=v),rows:"15",placeholder:"Document content",class:"edit-textarea"},null,8,["modelValue"])])])])):F("",!0),r(i(Ge))]),_:1},8,["visible"]))}},tr={class:"rag-manager"},sr={class:"rag-header"},nr={class:"header-actions"},ar={key:0,class:"stats-grid"},or={__name:"RAGManager",setup(e){const s=$e(),n=x(null),p=x(null),h=x(!1),a=x(!1),S=x(!1),D=x(!1),I=x(!1);let $=null;fe(p,U=>{U&&(S.value=!0)}),be(async()=>{await y(),k()}),dt(()=>{$&&$.close()});const y=async()=>{try{const U=await Y.getStatistics();n.value=U}catch(U){console.error("Error loading RAG statistics:",U),s.error("Failed to load knowledge base statistics")}},k=()=>{const U="ws://localhost:8000/api/rag/ws";$=new WebSocket(U),$.onopen=()=>{I.value=!0,console.log("RAG WebSocket connected")},$.onmessage=A=>{const _=JSON.parse(A.data);E(_)},$.onclose=()=>{I.value=!1,console.log("RAG WebSocket disconnected"),setTimeout(k,5e3)},$.onerror=A=>{console.error("RAG WebSocket error:",A),I.value=!1}},E=U=>{switch(U.type){case"document_uploaded":s.success(`File "${U.filename}" has been processed`),V();break;case"document_updated":s.info("Document has been modified"),V();break;case"document_deleted":s.warning("Document has been removed"),V();break;case"bulk_import_progress":s.info(`Processing ${U.current_file} (${U.processed}/${U.total})`);break;case"reindex_started":s.info("Knowledge base is being reindexed");break}},N=async()=>{D.value=!0;try{await Y.reindex(),s.success("Knowledge base reindexing has been initiated")}catch(U){console.error("Error starting reindex:",U),s.error("Failed to start knowledge base reindexing")}finally{D.value=!1}},W=U=>{h.value=!1,s.success(U.message||"Documents uploaded successfully"),V()},q=U=>{a.value=!1,s.success(`Processed ${U.processed_files} files in ${U.processing_time_seconds.toFixed(1)}s`),V()},K=()=>{S.value=!1,p.value=null,V()},L=()=>{S.value=!1,p.value=null,V()},V=async()=>{await y()},H=U=>{const A=new Date(U),o=new Date-A,u=Math.floor(o/6e4);return u<60?`${u}m ago`:u<1440?`${Math.floor(u/60)}h ago`:`${Math.floor(u/1440)}d ago`};return(U,A)=>(l(),f("div",tr,[t("div",sr,[A[7]||(A[7]=t("div",{class:"header-content"},[t("h2",{class:"rag-title"},[t("i",{class:"pi pi-database mr-2"}),O(" Knowledge Base Manager ")]),t("p",{class:"rag-description"}," Manage your document knowledge base with advanced semantic search capabilities ")],-1)),t("div",nr,[r(i(B),{label:"Upload Documents",icon:"pi pi-upload",class:"p-button-primary mr-2",onClick:A[0]||(A[0]=_=>h.value=!0)}),r(i(B),{label:"Bulk Import",icon:"pi pi-download",class:"p-button-outlined mr-2",onClick:A[1]||(A[1]=_=>a.value=!0)}),r(i(B),{label:"Reindex",icon:"pi pi-refresh",class:"p-button-outlined",onClick:N,loading:D.value},null,8,["loading"])])]),n.value?(l(),f("div",ar,[r(i(ee),{class:"stat-card"},{header:b(()=>[...A[8]||(A[8]=[t("div",{class:"stat-icon-primary"},[t("i",{class:"pi pi-file"})],-1)])]),title:b(()=>[O(m(n.value.total_documents),1)]),subtitle:b(()=>[...A[9]||(A[9]=[O("Total Documents",-1)])]),_:1}),r(i(ee),{class:"stat-card"},{header:b(()=>[...A[10]||(A[10]=[t("div",{class:"stat-icon-success"},[t("i",{class:"pi pi-database"})],-1)])]),title:b(()=>[O(m(n.value.total_size_mb.toFixed(1))+" MB",1)]),subtitle:b(()=>[...A[11]||(A[11]=[O("Storage Used",-1)])]),_:1}),r(i(ee),{class:"stat-card"},{header:b(()=>[...A[12]||(A[12]=[t("div",{class:"stat-icon-info"},[t("i",{class:"pi pi-tags"})],-1)])]),title:b(()=>[O(m(n.value.categories.length),1)]),subtitle:b(()=>[...A[13]||(A[13]=[O("Categories",-1)])]),_:1}),r(i(ee),{class:"stat-card"},{header:b(()=>[...A[14]||(A[14]=[t("div",{class:"stat-icon-warning"},[t("i",{class:"pi pi-clock"})],-1)])]),title:b(()=>[O(m(H(n.value.last_update)),1)]),subtitle:b(()=>[...A[15]||(A[15]=[O("Last Update",-1)])]),_:1})])):F("",!0),r(i(gt),null,{default:b(()=>[r(i(Ae),{header:"Search Documents"},{default:b(()=>[r(ys,{onDocumentSelected:A[2]||(A[2]=_=>p.value=_)})]),_:1}),r(i(Ae),{header:"Manage Documents"},{default:b(()=>[r(Sn,{onDocumentSelected:A[3]||(A[3]=_=>p.value=_),onDocumentUpdated:V,onDocumentDeleted:V})]),_:1}),r(i(Ae),{header:"Analytics"},{default:b(()=>[r(ka,{statistics:n.value},null,8,["statistics"])]),_:1})]),_:1}),r(Co,{visible:h.value,"onUpdate:visible":A[4]||(A[4]=_=>h.value=_),onUploadComplete:W},null,8,["visible"]),r(ri,{visible:a.value,"onUpdate:visible":A[5]||(A[5]=_=>a.value=_),onImportComplete:q},null,8,["visible"]),r(er,{visible:S.value,"onUpdate:visible":A[6]||(A[6]=_=>S.value=_),document:p.value,onDocumentUpdated:K,onDocumentDeleted:L},null,8,["visible","document"]),t("div",{class:G(["websocket-status",{connected:I.value}])},[t("i",{class:G(I.value?"pi pi-circle-on":"pi pi-circle-off")},null,2),O(" "+m(I.value?"Real-time Connected":"Disconnected"),1)],2)]))}},ir={class:"rag-manager-page"},rr={__name:"RAGManagerPage",setup(e){return(s,n)=>(l(),f("div",ir,[r(or)]))}},mr=ut(rr,[["__scopeId","data-v-be4ab6ab"]]);export{mr as default};
//# sourceMappingURL=RAGManagerPage-golOjMPV.js.map
