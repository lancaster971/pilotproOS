{"version":3,"file":"MilhenaChat-CWOTeKBH.js","sources":["../../src/pages/MilhenaChat.vue"],"sourcesContent":["<template>\n  <div class=\"milhena-chat-container\">\n    <!-- Header -->\n    <div class=\"chat-header\">\n      <div class=\"header-content\">\n        <div class=\"header-left\">\n          <Icon icon=\"mdi:robot-happy\" class=\"header-icon\" />\n          <div>\n            <h1>Milhena Assistant</h1>\n            <p class=\"subtitle\">v3.0 Learning Edition - Self-Improving AI</p>\n          </div>\n        </div>\n        <div class=\"header-stats\">\n          <div class=\"stat\">\n            <span class=\"stat-value\">{{ responseTime }}ms</span>\n            <span class=\"stat-label\">Latency</span>\n          </div>\n          <div class=\"stat\">\n            <span class=\"stat-value\">{{ accuracy }}%</span>\n            <span class=\"stat-label\">Accuracy</span>\n          </div>\n          <div class=\"stat\" v-if=\"isLearning\">\n            <Icon icon=\"mdi:brain\" class=\"learning-icon animate-pulse\" />\n            <span class=\"stat-label\">Learning...</span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Chat Messages -->\n    <div class=\"chat-messages\" ref=\"messagesContainer\">\n      <!-- Welcome Message -->\n      <div v-if=\"messages.length === 0\" class=\"welcome-message\">\n        <Icon icon=\"mdi:hand-wave\" class=\"wave-icon\" />\n        <h2>Ciao! Sono Milhena</h2>\n        <p>Il tuo assistente AI per PilotProOS. Posso aiutarti con:</p>\n        <div class=\"quick-actions\">\n          <button @click=\"sendQuickMessage('Mostrami i workflow attivi')\" class=\"quick-btn\">\n            <Icon icon=\"mdi:workflow\" />\n            Workflow Attivi\n          </button>\n          <button @click=\"sendQuickMessage('Analizza le performance di oggi')\" class=\"quick-btn\">\n            <Icon icon=\"mdi:chart-line\" />\n            Performance Oggi\n          </button>\n          <button @click=\"sendQuickMessage('Quali sono gli ultimi errori?')\" class=\"quick-btn\">\n            <Icon icon=\"mdi:alert-circle\" />\n            Ultimi Errori\n          </button>\n          <button @click=\"sendQuickMessage('Come funzioni?')\" class=\"quick-btn\">\n            <Icon icon=\"mdi:help-circle\" />\n            Come Funzioni\n          </button>\n        </div>\n      </div>\n\n      <!-- Messages List -->\n      <div v-for=\"(message, index) in messages\" :key=\"index\"\n           :class=\"['message', message.role]\">\n        <div class=\"message-avatar\">\n          <Icon v-if=\"message.role === 'user'\" icon=\"mdi:account\" />\n          <Icon v-else icon=\"mdi:robot\" />\n        </div>\n        <div class=\"message-content\">\n          <div class=\"message-header\">\n            <span class=\"message-sender\">{{ message.role === 'user' ? 'Tu' : 'Milhena' }}</span>\n            <span class=\"message-time\">{{ formatTime(message.timestamp) }}</span>\n            <span v-if=\"message.latency\" class=\"message-latency\">{{ message.latency }}ms</span>\n          </div>\n          <div class=\"message-text\" v-html=\"formatMessage(message.content)\"></div>\n\n          <!-- Confidence Indicator -->\n          <div v-if=\"message.confidence\" class=\"message-confidence\">\n            <div class=\"confidence-bar\">\n              <div class=\"confidence-fill\"\n                   :style=\"{width: (message.confidence * 100) + '%'}\"\n                   :class=\"{\n                     'high': message.confidence > 0.8,\n                     'medium': message.confidence > 0.6 && message.confidence <= 0.8,\n                     'low': message.confidence <= 0.6\n                   }\">\n              </div>\n            </div>\n            <span class=\"confidence-text\">Confidence: {{ (message.confidence * 100).toFixed(0) }}%</span>\n          </div>\n\n          <!-- Feedback Buttons for Assistant Messages -->\n          <div v-if=\"message.role === 'assistant' && !message.feedback\" class=\"feedback-buttons\">\n            <button @click=\"sendFeedback(index, 'positive')\"\n                    class=\"feedback-btn positive\"\n                    title=\"Risposta utile\">\n              <Icon icon=\"mdi:thumb-up-outline\" />\n            </button>\n            <button @click=\"sendFeedback(index, 'negative')\"\n                    class=\"feedback-btn negative\"\n                    title=\"Risposta non utile\">\n              <Icon icon=\"mdi:thumb-down-outline\" />\n            </button>\n          </div>\n\n          <!-- Feedback Confirmation -->\n          <div v-if=\"message.feedback\" class=\"feedback-confirmed\">\n            <span v-if=\"message.feedback === 'positive'\" class=\"positive\">\n              <Icon icon=\"mdi:check-circle\" /> Grazie per il feedback!\n            </span>\n            <span v-else class=\"negative\">\n              <Icon icon=\"mdi:alert-circle\" /> Grazie, sto imparando...\n            </span>\n          </div>\n\n          <!-- Reformulation Helper -->\n          <div v-if=\"message.feedback === 'negative' && !message.reformulated\" class=\"reformulation-helper\">\n            <p>Puoi riformulare la domanda per aiutarmi a capire meglio?</p>\n            <div class=\"suggestions\">\n              <button v-for=\"suggestion in getReformulationSuggestions(message)\"\n                      :key=\"suggestion\"\n                      @click=\"sendQuickMessage(suggestion)\"\n                      class=\"suggestion-btn\">\n                {{ suggestion }}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Typing Indicator -->\n      <div v-if=\"isTyping\" class=\"message assistant typing\">\n        <div class=\"message-avatar\">\n          <Icon icon=\"mdi:robot\" />\n        </div>\n        <div class=\"message-content\">\n          <div class=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Input Area -->\n    <div class=\"chat-input-container\">\n      <div class=\"input-wrapper\">\n        <input\n          v-model=\"inputMessage\"\n          @keyup.enter=\"sendMessage\"\n          :disabled=\"isLoading\"\n          placeholder=\"Chiedi qualsiasi cosa su processi, workflow, performance...\"\n          class=\"chat-input\"\n        />\n        <button\n          @click=\"sendMessage\"\n          :disabled=\"!inputMessage.trim() || isLoading\"\n          class=\"send-button\"\n        >\n          <Icon v-if=\"isLoading\" icon=\"mdi:loading\" class=\"animate-spin\" />\n          <Icon v-else icon=\"mdi:send\" />\n        </button>\n      </div>\n      <div class=\"input-hint\">\n        <Icon icon=\"mdi:information\" />\n        <span v-if=\"isReformulating\" class=\"reformulation-alert\">\n          ðŸ”„ Sto imparando dalla tua correzione...\n        </span>\n        <span v-else>Milhena impara dai tuoi feedback per migliorare continuamente.</span>\n      </div>\n    </div>\n\n    <!-- Learning Stats Footer -->\n    <div class=\"learning-stats\">\n      <div class=\"stat-item\">\n        <span class=\"stat-label\">Oggi:</span>\n        <span class=\"stat-value\">{{ todayStats.queries }} queries</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-label\">Patterns appresi:</span>\n        <span class=\"stat-value\">{{ todayStats.patterns }}</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-label\">Miglioramento:</span>\n        <span class=\"stat-value\">+{{ todayStats.improvement }}%</span>\n      </div>\n      <div class=\"stat-item\" v-if=\"todayStats.cache_hit_rate\">\n        <span class=\"stat-label\">Cache Hit:</span>\n        <span class=\"stat-value\">{{ todayStats.cache_hit_rate }}%</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onBeforeUnmount, nextTick } from 'vue'\nimport { Icon } from '@iconify/vue'\nimport { useToast } from 'vue-toastification'\nimport { apiClient } from '@/services/api-client'\n\nconst toast = useToast()\n\n// State\nconst messages = ref([])\nconst inputMessage = ref('')\nconst isLoading = ref(false)\nconst isTyping = ref(false)\nconst isLearning = ref(false)\nconst isReformulating = ref(false)\nconst responseTime = ref(0)\nconst accuracy = ref(92) // Will be updated from API\nconst messagesContainer = ref(null)\nconst sessionId = ref(generateSessionId())\nconst todayStats = ref({\n  queries: 0,\n  patterns: 0,\n  improvement: 0,\n  cache_hit_rate: 0\n})\n\n// Generate session ID\nfunction generateSessionId() {\n  return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)\n}\n\n// Format time\nconst formatTime = (timestamp) => {\n  const date = new Date(timestamp)\n  return date.toLocaleTimeString('it-IT', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  })\n}\n\n// Format message with markdown support\nconst formatMessage = (text) => {\n  // Convert markdown bold\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n  // Convert markdown italic\n  text = text.replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n  // Convert line breaks\n  text = text.replace(/\\n/g, '<br>')\n  // Convert bullet points\n  text = text.replace(/â€¢ /g, 'ðŸ”¸ ')\n\n  return text\n}\n\n// Scroll to bottom\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (messagesContainer.value) {\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\n    }\n  })\n}\n\n// Send quick message\nconst sendQuickMessage = (text) => {\n  inputMessage.value = text\n  sendMessage()\n}\n\n// Send feedback\nconst sendFeedback = async (messageIndex, feedbackType) => {\n  const message = messages.value[messageIndex]\n  if (!message || message.feedback) return\n\n  // Mark message with feedback\n  message.feedback = feedbackType\n\n  // If negative, prepare for reformulation detection\n  if (feedbackType === 'negative') {\n    isReformulating.value = true\n    setTimeout(() => {\n      isReformulating.value = false\n    }, 30000) // 30 seconds window for reformulation\n  }\n\n  // Show learning indicator\n  isLearning.value = true\n  setTimeout(() => {\n    isLearning.value = false\n  }, 3000)\n\n  try {\n    // Send feedback to API\n    await apiClient.post('/api/milhena/feedback', {\n      session_id: sessionId.value,\n      message_id: message.id || messageIndex,\n      query: messages.value[messageIndex - 1]?.content || '',\n      response: message.content,\n      feedback_type: feedbackType,\n      confidence: message.confidence,\n      timestamp: message.timestamp\n    })\n\n    toast.success(feedbackType === 'positive' ?\n                  'Grazie per il feedback positivo!' :\n                  'Grazie, userÃ² questo feedback per migliorare')\n  } catch (error) {\n    console.error('Feedback error:', error)\n  }\n}\n\n// Get reformulation suggestions\nconst getReformulationSuggestions = (message) => {\n  const suggestions = []\n\n  // Generate contextual suggestions based on the query\n  if (message.intent === 'ERRORS' || message.content.includes('error')) {\n    suggestions.push('Mostra solo gli errori critici di oggi')\n    suggestions.push('Quali processi hanno avuto problemi nelle ultime 24 ore?')\n  } else if (message.intent === 'METRICS' || message.content.includes('metric')) {\n    suggestions.push('Quante fatture sono state elaborate oggi?')\n    suggestions.push('Dammi le statistiche complete del sistema')\n  } else {\n    suggestions.push('Mostra lo stato generale del sistema')\n    suggestions.push('Ci sono problemi urgenti da risolvere?')\n  }\n\n  return suggestions\n}\n\n// Send message\nconst sendMessage = async () => {\n  if (!inputMessage.value.trim() || isLoading.value) return\n\n  const userMessage = {\n    role: 'user',\n    content: inputMessage.value,\n    timestamp: new Date(),\n    isReformulation: isReformulating.value\n  }\n\n  messages.value.push(userMessage)\n  const question = inputMessage.value\n  inputMessage.value = ''\n\n  // Check if this is a reformulation\n  let contextData = {\n    conversation_history: messages.value.slice(-10), // Last 10 messages\n    is_reformulation: isReformulating.value\n  }\n\n  if (isReformulating.value) {\n    // Find the last negative feedback message\n    const lastNegativeIndex = messages.value.findLastIndex(m => m.feedback === 'negative')\n    if (lastNegativeIndex >= 0) {\n      contextData.original_query = messages.value[lastNegativeIndex - 1]?.content || ''\n      contextData.failed_response = messages.value[lastNegativeIndex]?.content || ''\n    }\n    isReformulating.value = false\n  }\n\n  isLoading.value = true\n  isTyping.value = true\n  scrollToBottom()\n\n  const startTime = Date.now()\n\n  try {\n    // Call Milhena API via n8n endpoint (actual working endpoint)\n    const response = await apiClient.post('/api/n8n/agent/customer-support', {\n      message: question,\n      session_id: sessionId.value,\n      context: contextData\n    })\n\n    const latency = Date.now() - startTime\n    responseTime.value = latency\n\n    // Update accuracy if provided\n    if (response.data.system_accuracy) {\n      accuracy.value = Math.round(response.data.system_accuracy * 100)\n    }\n\n    // Add assistant response with all metadata\n    messages.value.push({\n      role: 'assistant',\n      content: response.data.response || response.data.message,\n      timestamp: new Date(),\n      confidence: response.data.confidence,\n      intent: response.data.intent,\n      latency: latency,\n      cached: response.data.cached || false,\n      learned: response.data.learned || false\n    })\n\n    // Update stats if learned something\n    if (response.data.learned) {\n      todayStats.value.patterns++\n    }\n\n  } catch (error) {\n    console.error('Chat error:', error)\n\n    // Fallback message\n    messages.value.push({\n      role: 'assistant',\n      content: error.response?.data?.message ||\n               'Mi dispiace, c\\'Ã¨ stato un problema. Riprova tra poco.',\n      timestamp: new Date(),\n      latency: Date.now() - startTime\n    })\n\n    toast.error('Errore nella comunicazione con Milhena')\n  } finally {\n    isLoading.value = false\n    isTyping.value = false\n    scrollToBottom()\n    todayStats.value.queries++\n  }\n}\n\n// Load learning stats\nconst loadLearningStats = async () => {\n  try {\n    const response = await apiClient.get('/api/milhena/learning/stats/today')\n    todayStats.value = response.data\n\n    // Update accuracy from stats\n    if (response.data.accuracy) {\n      accuracy.value = Math.round(response.data.accuracy * 100)\n    }\n  } catch (error) {\n    console.error('Failed to load learning stats:', error)\n  }\n}\n\n// Welcome message on mount\nonMounted(() => {\n  // Load learning stats\n  loadLearningStats()\n\n  // Refresh stats every 60 seconds\n  const statsInterval = setInterval(loadLearningStats, 60000)\n\n  // Optional: Add initial greeting\n  setTimeout(() => {\n    messages.value.push({\n      role: 'assistant',\n      content: 'Ciao! Sono Milhena v3.0 Learning Edition. Imparo dai tuoi feedback per migliorare continuamente. Come posso aiutarti oggi?',\n      timestamp: new Date(),\n      confidence: 1.0\n    })\n  }, 500)\n\n  // Cleanup on unmount\n  onBeforeUnmount(() => {\n    clearInterval(statsInterval)\n  })\n})\n</script>\n\n<style scoped>\n.milhena-chat-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  position: relative;\n}\n\n/* Header */\n.chat-header {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  padding: 1.5rem;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.header-icon {\n  font-size: 2.5rem;\n  color: white;\n}\n\n.chat-header h1 {\n  color: white;\n  font-size: 1.5rem;\n  margin: 0;\n}\n\n.subtitle {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.875rem;\n  margin: 0;\n}\n\n.header-stats {\n  display: flex;\n  gap: 2rem;\n}\n\n.stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.stat-value {\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.stat-label {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.75rem;\n  text-transform: uppercase;\n}\n\n/* Chat Messages */\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 2rem;\n  max-width: 900px;\n  width: 100%;\n  margin: 0 auto;\n}\n\n.welcome-message {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  text-align: center;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n.wave-icon {\n  font-size: 3rem;\n  color: #667eea;\n  animation: wave 1s ease-in-out;\n}\n\n@keyframes wave {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(-20deg); }\n  75% { transform: rotate(20deg); }\n}\n\n.welcome-message h2 {\n  color: #333;\n  margin: 1rem 0;\n}\n\n.welcome-message p {\n  color: #666;\n  margin-bottom: 1.5rem;\n}\n\n.quick-actions {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n}\n\n.quick-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.quick-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n/* Messages */\n.message {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  animation: messageIn 0.3s ease;\n}\n\n@keyframes messageIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.message.user .message-avatar {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n}\n\n.message.assistant .message-avatar {\n  background: white;\n  color: #667eea;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.message-content {\n  flex: 1;\n  background: white;\n  border-radius: 1rem;\n  padding: 1rem;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.message-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n}\n\n.message-sender {\n  font-weight: 600;\n  color: #333;\n}\n\n.message-time {\n  color: #999;\n}\n\n.message-latency {\n  background: #10b981;\n  color: white;\n  padding: 0.125rem 0.375rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n}\n\n.message-text {\n  color: #333;\n  line-height: 1.6;\n}\n\n.message-confidence {\n  margin-top: 0.75rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.confidence-bar {\n  flex: 1;\n  height: 4px;\n  background: #e5e7eb;\n  border-radius: 9999px;\n  overflow: hidden;\n}\n\n.confidence-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #667eea, #764ba2);\n  transition: width 0.5s ease;\n}\n\n.confidence-text {\n  font-size: 0.75rem;\n  color: #666;\n}\n\n/* Typing Indicator */\n.typing-indicator {\n  display: flex;\n  gap: 0.25rem;\n  padding: 0.5rem;\n}\n\n.typing-indicator span {\n  width: 8px;\n  height: 8px;\n  background: #999;\n  border-radius: 50%;\n  animation: typing 1.4s infinite;\n}\n\n.typing-indicator span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing-indicator span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes typing {\n  0%, 60%, 100% {\n    opacity: 0.3;\n    transform: translateY(0);\n  }\n  30% {\n    opacity: 1;\n    transform: translateY(-10px);\n  }\n}\n\n/* Input Area */\n.chat-input-container {\n  background: white;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 1.5rem;\n}\n\n.input-wrapper {\n  display: flex;\n  gap: 1rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.chat-input {\n  flex: 1;\n  padding: 1rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 0.5rem;\n  font-size: 1rem;\n  transition: all 0.3s;\n}\n\n.chat-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.send-button {\n  padding: 0 1.5rem;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  font-size: 1.25rem;\n}\n\n.send-button:hover:not(:disabled) {\n  transform: scale(1.05);\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n.send-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.input-hint {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  max-width: 900px;\n  margin: 0.5rem auto 0;\n  font-size: 0.875rem;\n  color: #666;\n}\n\n/* Scrollbar */\n.chat-messages::-webkit-scrollbar {\n  width: 8px;\n}\n\n.chat-messages::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.chat-messages::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 9999px;\n}\n\n.chat-messages::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.5);\n}\n\n/* Feedback Buttons */\n.feedback-buttons {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n}\n\n.feedback-btn {\n  padding: 0.375rem 0.75rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 9999px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.875rem;\n}\n\n.feedback-btn:hover {\n  transform: scale(1.1);\n}\n\n.feedback-btn.positive:hover {\n  background: #e8f5e9;\n  border-color: #4caf50;\n  color: #4caf50;\n}\n\n.feedback-btn.negative:hover {\n  background: #ffebee;\n  border-color: #f44336;\n  color: #f44336;\n}\n\n.feedback-confirmed {\n  margin-top: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.feedback-confirmed.positive {\n  background: #e8f5e9;\n  color: #2e7d32;\n}\n\n.feedback-confirmed.negative {\n  background: #fff3e0;\n  color: #e65100;\n}\n\n/* Reformulation Helper */\n.reformulation-helper {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #fff3e0;\n  border-radius: 0.5rem;\n  border-left: 3px solid #ff9800;\n}\n\n.reformulation-helper p {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.875rem;\n  color: #666;\n}\n\n.suggestions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.suggestion-btn {\n  padding: 0.5rem 1rem;\n  background: white;\n  border: 1px solid #ff9800;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.suggestion-btn:hover {\n  background: #ff9800;\n  color: white;\n}\n\n/* Confidence Styles */\n.confidence-fill.high {\n  background: linear-gradient(90deg, #4caf50, #66bb6a);\n}\n\n.confidence-fill.medium {\n  background: linear-gradient(90deg, #ff9800, #ffa726);\n}\n\n.confidence-fill.low {\n  background: linear-gradient(90deg, #f44336, #ef5350);\n}\n\n/* Learning Indicator */\n.learning-icon {\n  color: #9c27b0;\n  font-size: 1.5rem;\n}\n\n.animate-pulse {\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.6; }\n}\n\n/* Learning Stats Footer */\n.learning-stats {\n  display: flex;\n  justify-content: space-around;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.95);\n  border-top: 1px solid rgba(102, 126, 234, 0.2);\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.learning-stats .stat-label {\n  color: #666;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n}\n\n.learning-stats .stat-value {\n  font-weight: 600;\n  color: #667eea;\n  font-size: 1rem;\n}\n\n.reformulation-alert {\n  color: #ff9800;\n  font-weight: 500;\n}\n</style>"],"names":["toast","useToast","messages","ref","inputMessage","isLoading","isTyping","isLearning","isReformulating","responseTime","accuracy","messagesContainer","sessionId","generateSessionId","todayStats","formatTime","timestamp","formatMessage","text","scrollToBottom","nextTick","sendQuickMessage","sendMessage","sendFeedback","messageIndex","feedbackType","message","apiClient","error","getReformulationSuggestions","suggestions","userMessage","question","contextData","lastNegativeIndex","m","startTime","response","latency","loadLearningStats","onMounted","statsInterval","onBeforeUnmount","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","Icon","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_cache","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","_renderList","index","_normalizeClass","_hoisted_13","_createBlock","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_normalizeStyle","_hoisted_22","_hoisted_23","$event","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","suggestion","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_38","_hoisted_39","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49"],"mappings":"8hDAoMA,MAAMA,EAAQC,EAAQ,EAGhBC,EAAWC,EAAI,CAAA,CAAE,EACjBC,EAAeD,EAAI,EAAE,EACrBE,EAAYF,EAAI,EAAK,EACrBG,EAAWH,EAAI,EAAK,EACpBI,EAAaJ,EAAI,EAAK,EACtBK,EAAkBL,EAAI,EAAK,EAC3BM,EAAeN,EAAI,CAAC,EACpBO,EAAWP,EAAI,EAAE,EACjBQ,EAAoBR,EAAI,IAAI,EAC5BS,EAAYT,EAAIU,EAAiB,CAAE,EACnCC,EAAaX,EAAI,CACrB,QAAS,EACT,SAAU,EACV,YAAa,EACb,eAAgB,CAClB,CAAC,EAGD,SAASU,GAAoB,CAC3B,MAAO,WAAa,KAAK,IAAG,EAAK,IAAM,KAAK,OAAM,EAAG,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAC/E,CAGA,MAAME,EAAcC,GACL,IAAI,KAAKA,CAAS,EACnB,mBAAmB,QAAS,CACtC,KAAM,UACN,OAAQ,UACR,OAAQ,SACZ,CAAG,EAIGC,EAAiBC,IAErBA,EAAOA,EAAK,QAAQ,iBAAkB,qBAAqB,EAE3DA,EAAOA,EAAK,QAAQ,aAAc,aAAa,EAE/CA,EAAOA,EAAK,QAAQ,MAAO,MAAM,EAEjCA,EAAOA,EAAK,QAAQ,MAAO,KAAK,EAEzBA,GAIHC,EAAiB,IAAM,CAC3BC,EAAS,IAAM,CACTT,EAAkB,QACpBA,EAAkB,MAAM,UAAYA,EAAkB,MAAM,aAEhE,CAAC,CACH,EAGMU,EAAoBH,GAAS,CACjCd,EAAa,MAAQc,EACrBI,EAAW,CACb,EAGMC,EAAe,MAAOC,EAAcC,IAAiB,CACzD,MAAMC,EAAUxB,EAAS,MAAMsB,CAAY,EAC3C,GAAI,GAACE,GAAWA,EAAQ,UAGxB,CAAAA,EAAQ,SAAWD,EAGfA,IAAiB,aACnBjB,EAAgB,MAAQ,GACxB,WAAW,IAAM,CACfA,EAAgB,MAAQ,EAC1B,EAAG,GAAK,GAIVD,EAAW,MAAQ,GACnB,WAAW,IAAM,CACfA,EAAW,MAAQ,EACrB,EAAG,GAAI,EAEP,GAAI,CAEF,MAAMoB,EAAU,KAAK,wBAAyB,CAC5C,WAAYf,EAAU,MACtB,WAAYc,EAAQ,IAAMF,EAC1B,MAAOtB,EAAS,MAAMsB,EAAe,CAAC,GAAG,SAAW,GACpD,SAAUE,EAAQ,QAClB,cAAeD,EACf,WAAYC,EAAQ,WACpB,UAAWA,EAAQ,SACzB,CAAK,EAED1B,EAAM,QAAQyB,IAAiB,WACjB,mCACA,8CAA8C,CAC9D,OAASG,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,CACxC,EACF,EAGMC,EAA+BH,GAAY,CAC/C,MAAMI,EAAc,CAAA,EAGpB,OAAIJ,EAAQ,SAAW,UAAYA,EAAQ,QAAQ,SAAS,OAAO,GACjEI,EAAY,KAAK,wCAAwC,EACzDA,EAAY,KAAK,0DAA0D,GAClEJ,EAAQ,SAAW,WAAaA,EAAQ,QAAQ,SAAS,QAAQ,GAC1EI,EAAY,KAAK,2CAA2C,EAC5DA,EAAY,KAAK,2CAA2C,IAE5DA,EAAY,KAAK,sCAAsC,EACvDA,EAAY,KAAK,wCAAwC,GAGpDA,CACT,EAGMR,EAAc,SAAY,CAC9B,GAAI,CAAClB,EAAa,MAAM,KAAI,GAAMC,EAAU,MAAO,OAEnD,MAAM0B,EAAc,CAClB,KAAM,OACN,QAAS3B,EAAa,MACtB,UAAW,IAAI,KACf,gBAAiBI,EAAgB,KACrC,EAEEN,EAAS,MAAM,KAAK6B,CAAW,EAC/B,MAAMC,EAAW5B,EAAa,MAC9BA,EAAa,MAAQ,GAGrB,IAAI6B,EAAc,CAChB,qBAAsB/B,EAAS,MAAM,MAAM,GAAG,EAC9C,iBAAkBM,EAAgB,KACtC,EAEE,GAAIA,EAAgB,MAAO,CAEzB,MAAM0B,EAAoBhC,EAAS,MAAM,cAAciC,GAAKA,EAAE,WAAa,UAAU,EACjFD,GAAqB,IACvBD,EAAY,eAAiB/B,EAAS,MAAMgC,EAAoB,CAAC,GAAG,SAAW,GAC/ED,EAAY,gBAAkB/B,EAAS,MAAMgC,CAAiB,GAAG,SAAW,IAE9E1B,EAAgB,MAAQ,EAC1B,CAEAH,EAAU,MAAQ,GAClBC,EAAS,MAAQ,GACjBa,EAAc,EAEd,MAAMiB,EAAY,KAAK,IAAG,EAE1B,GAAI,CAEF,MAAMC,EAAW,MAAMV,EAAU,KAAK,kCAAmC,CACvE,QAASK,EACT,WAAYpB,EAAU,MACtB,QAASqB,CACf,CAAK,EAEKK,EAAU,KAAK,MAAQF,EAC7B3B,EAAa,MAAQ6B,EAGjBD,EAAS,KAAK,kBAChB3B,EAAS,MAAQ,KAAK,MAAM2B,EAAS,KAAK,gBAAkB,GAAG,GAIjEnC,EAAS,MAAM,KAAK,CAClB,KAAM,YACN,QAASmC,EAAS,KAAK,UAAYA,EAAS,KAAK,QACjD,UAAW,IAAI,KACf,WAAYA,EAAS,KAAK,WAC1B,OAAQA,EAAS,KAAK,OACtB,QAASC,EACT,OAAQD,EAAS,KAAK,QAAU,GAChC,QAASA,EAAS,KAAK,SAAW,EACxC,CAAK,EAGGA,EAAS,KAAK,SAChBvB,EAAW,MAAM,UAGrB,OAASc,EAAO,CACd,QAAQ,MAAM,cAAeA,CAAK,EAGlC1B,EAAS,MAAM,KAAK,CAClB,KAAM,YACN,QAAS0B,EAAM,UAAU,MAAM,SACtB,wDACT,UAAW,IAAI,KACf,QAAS,KAAK,MAAQQ,CAC5B,CAAK,EAEDpC,EAAM,MAAM,wCAAwC,CACtD,QAAC,CACCK,EAAU,MAAQ,GAClBC,EAAS,MAAQ,GACjBa,EAAc,EACdL,EAAW,MAAM,SACnB,CACF,EAGMyB,EAAoB,SAAY,CACpC,GAAI,CACF,MAAMF,EAAW,MAAMV,EAAU,IAAI,mCAAmC,EACxEb,EAAW,MAAQuB,EAAS,KAGxBA,EAAS,KAAK,WAChB3B,EAAS,MAAQ,KAAK,MAAM2B,EAAS,KAAK,SAAW,GAAG,EAE5D,OAAST,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,CACF,EAGA,OAAAY,EAAU,IAAM,CAEdD,EAAiB,EAGjB,MAAME,EAAgB,YAAYF,EAAmB,GAAK,EAG1D,WAAW,IAAM,CACfrC,EAAS,MAAM,KAAK,CAClB,KAAM,YACN,QAAS,6HACT,UAAW,IAAI,KACf,WAAY,CAClB,CAAK,CACH,EAAG,GAAG,EAGNwC,EAAgB,IAAM,CACpB,cAAcD,CAAa,CAC7B,CAAC,CACH,CAAC,UAhcCE,EAAA,EAAAC,EA0LM,MA1LNC,EA0LM,CAxLJC,EAwBM,MAxBNC,EAwBM,CAvBJD,EAsBM,MAtBNE,EAsBM,CArBJF,EAMM,MANNG,GAMM,CALJC,EAAmDC,EAAAC,CAAA,EAAA,CAA7C,KAAK,kBAAkB,MAAM,4BACnCN,EAGM,MAAA,KAAA,CAFJA,EAA0B,UAAtB,mBAAiB,EACrBA,EAAiE,IAAA,CAA9D,MAAM,UAAU,EAAC,2CAAyC,UAGjEA,EAaM,MAbNO,GAaM,CAZJP,EAGM,MAHNQ,GAGM,CAFJR,EAAoD,OAApDS,GAAoDC,EAAxB/C,EAAA,KAAY,EAAG,KAAE,CAAA,EAC7CgD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAX,EAAuC,OAAA,CAAjC,MAAM,cAAa,UAAO,EAAA,KAElCA,EAGM,MAHNY,GAGM,CAFJZ,EAA+C,OAA/Ca,GAA+CH,EAAnB9C,EAAA,KAAQ,EAAG,IAAC,CAAA,EACxC+C,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAX,EAAwC,OAAA,CAAlC,MAAM,cAAa,WAAQ,EAAA,KAEXvC,EAAA,OAAxBoC,IAAAC,EAGM,MAHNgB,GAGM,CAFJV,EAA6DC,EAAAC,CAAA,EAAA,CAAvD,KAAK,YAAY,MAAM,gCAC7BK,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAX,EAA2C,OAAA,CAArC,MAAM,cAAa,cAAW,EAAA,qBAO5CA,EA4GM,MAAA,CA5GD,MAAM,wBAAoB,oBAAJ,IAAInC,IAElBT,EAAA,MAAS,SAAM,GAA1ByC,IAAAC,EAsBM,MAtBNiB,GAsBM,CArBJX,EAA+CC,EAAAC,CAAA,EAAA,CAAzC,KAAK,gBAAgB,MAAM,cACjCK,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAA2B,UAAvB,qBAAkB,EAAA,GACtBW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAA+D,SAA5D,2DAAwD,EAAA,GAC3DA,EAiBM,MAjBNgB,GAiBM,CAhBJhB,EAGS,SAAA,CAHA,uBAAOzB,EAAgB,4BAAA,GAAgC,MAAM,cACpE6B,EAA4BC,EAAAC,CAAA,EAAA,CAAtB,KAAK,cAAc,CAAA,gBAAG,oBAE9B,EAAA,KACAN,EAGS,SAAA,CAHA,uBAAOzB,EAAgB,iCAAA,GAAqC,MAAM,cACzE6B,EAA8BC,EAAAC,CAAA,EAAA,CAAxB,KAAK,gBAAgB,CAAA,kBAAG,qBAEhC,EAAA,KACAN,EAGS,SAAA,CAHA,uBAAOzB,EAAgB,+BAAA,GAAmC,MAAM,cACvE6B,EAAgCC,EAAAC,CAAA,EAAA,CAA1B,KAAK,kBAAkB,CAAA,kBAAG,kBAElC,EAAA,KACAN,EAGS,SAAA,CAHA,uBAAOzB,EAAgB,gBAAA,GAAoB,MAAM,cACxD6B,EAA+BC,EAAAC,CAAA,EAAA,CAAzB,KAAK,iBAAiB,CAAA,kBAAG,kBAEjC,EAAA,oBAKJT,EAAA,EAAA,EAAAC,EAkEMmB,EAAA,KAAAC,EAlE0B9D,EAAA,MAAQ,CAA3BwB,EAASuC,SAAtBrB,EAkEM,MAAA,CAlEqC,IAAKqB,EAC1C,MAAKC,EAAA,CAAA,UAAcxC,EAAQ,IAAI,CAAA,IACnCoB,EAGM,MAHNqB,GAGM,CAFQzC,EAAQ,OAAI,YAAxB0C,EAA0DjB,EAAAC,CAAA,EAAA,OAArB,KAAK,sBAC1CgB,EAAgCjB,EAAAC,CAAA,EAAA,OAAnB,KAAK,iBAEpBN,EA2DM,MA3DNuB,GA2DM,CA1DJvB,EAIM,MAJNwB,GAIM,CAHJxB,EAAoF,OAApFyB,GAAoFf,EAApD9B,EAAQ,OAAI,OAAA,KAAA,SAAA,EAAA,CAAA,EAC5CoB,EAAqE,OAArE0B,GAAqEhB,EAAvCzC,EAAWW,EAAQ,SAAS,CAAA,EAAA,CAAA,EAC9CA,EAAQ,SAApBiB,EAAA,EAAAC,EAAmF,OAAnF6B,GAAmFjB,EAA3B9B,EAAQ,OAAO,EAAG,KAAE,CAAA,cAE9EoB,EAAwE,MAAA,CAAnE,MAAM,eAAe,UAAQ7B,EAAcS,EAAQ,OAAO,cAGpDA,EAAQ,YAAnBiB,IAAAC,EAYM,MAZN8B,GAYM,CAXJ5B,EASM,MATN6B,GASM,CARJ7B,EAOM,MAAA,CAPD,SAAM,kBAAiB,CAEgB,KAAApB,EAAQ,WAAU,GAAuC,OAAAA,EAAQ,WAAU,IAAUA,EAAQ,YAAU,GAAqC,IAAAA,EAAQ,YAAU,MADpM,MAAKkD,EAAA,CAAA,MAAWlD,EAAQ,WAAU,IAAA,GAAA,CAAA,aAQ1CoB,EAA6F,OAA7F+B,GAA8B,eAAYrB,GAAI9B,EAAQ,WAAU,KAAQ,QAAO,CAAA,CAAA,EAAM,IAAC,CAAA,cAI7EA,EAAQ,OAAI,aAAA,CAAqBA,EAAQ,UAApDiB,IAAAC,EAWM,MAXNkC,GAWM,CAVJhC,EAIS,SAAA,CAJA,QAAKiC,GAAExD,EAAa0C,EAAK,UAAA,EAC1B,MAAM,wBACN,MAAM,mBACZf,EAAoCC,EAAAC,CAAA,EAAA,CAA9B,KAAK,sBAAsB,CAAA,SAEnCN,EAIS,SAAA,CAJA,QAAKiC,GAAExD,EAAa0C,EAAK,UAAA,EAC1B,MAAM,wBACN,MAAM,uBACZf,EAAsCC,EAAAC,CAAA,EAAA,CAAhC,KAAK,wBAAwB,CAAA,qBAK5B1B,EAAQ,UAAnBiB,IAAAC,EAOM,MAPNoC,GAOM,CANQtD,EAAQ,WAAQ,YAA5BiB,IAAAC,EAEO,OAFPqC,GAEO,CADL/B,EAAgCC,EAAAC,CAAA,EAAA,CAA1B,KAAK,kBAAkB,CAAA,kBAAG,4BAClC,EAAA,OACAT,IAAAC,EAEO,OAFPsC,GAEO,CADLhC,EAAgCC,EAAAC,CAAA,EAAA,CAA1B,KAAK,kBAAkB,CAAA,kBAAG,6BAClC,EAAA,kBAIS1B,EAAQ,WAAQ,YAAA,CAAoBA,EAAQ,cAAvDiB,IAAAC,EAUM,MAVNuC,GAUM,CATJ1B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAAgE,SAA7D,4DAAyD,EAAA,GAC5DA,EAOM,MAPNsC,GAOM,EANJzC,EAAA,EAAA,EAAAC,EAKSmB,EAAA,KAAAC,EALoBnC,EAA4BH,CAAO,EAAjD2D,QAAfzC,EAKS,SAAA,CAJA,IAAKyC,EACL,QAAKN,GAAE1D,EAAiBgE,CAAU,EACnC,MAAM,oBACTA,CAAU,EAAA,EAAAC,EAAA,sCAQZhF,EAAA,OAAXqC,IAAAC,EAWM,MAXN2C,GAWM,CAVJzC,EAEM,MAFN0C,GAEM,CADJtC,EAAyBC,EAAAC,CAAA,EAAA,CAAnB,KAAK,WAAW,CAAA,kBAExBN,EAMM,MAAA,CAND,MAAM,mBAAiB,CAC1BA,EAIM,MAAA,CAJD,MAAM,kBAAkB,EAAA,CAC3BA,EAAa,MAAA,EACbA,EAAa,MAAA,EACbA,EAAa,MAAA,4BAOrBA,EAyBM,MAzBN2C,GAyBM,CAxBJ3C,EAgBM,MAhBN4C,GAgBM,GAfJ5C,EAME,QAAA,sCALS1C,EAAY,MAAA2E,GACpB,UAAazD,EAAW,CAAA,OAAA,CAAA,EACxB,SAAUjB,EAAA,MACX,YAAY,8DACZ,MAAM,8BAJGD,EAAA,KAAY,IAMvB0C,EAOS,SAAA,CANN,QAAOxB,EACP,SAAQ,CAAGlB,EAAA,MAAa,KAAI,GAAMC,EAAA,MACnC,MAAM,gBAEMA,EAAA,WAAZ+D,EAAiEjB,EAAAC,CAAA,EAAA,OAA1C,KAAK,cAAc,MAAM,uBAChDgB,EAA+BjB,EAAAC,CAAA,EAAA,OAAlB,KAAK,uBAGtBN,EAMM,MANN6C,GAMM,CALJzC,EAA+BC,EAAAC,CAAA,EAAA,CAAzB,KAAK,iBAAiB,CAAA,EAChB5C,EAAA,WAAZoC,EAEO,OAFPgD,GAAyD,4CAEzD,IACAjD,EAAA,EAAAC,EAAkF,UAArE,gEAA8D,OAK/EE,EAiBM,MAjBN+C,GAiBM,CAhBJ/C,EAGM,MAHNgD,GAGM,CAFJrC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAAqC,OAAA,CAA/B,MAAM,YAAY,EAAC,QAAK,EAAA,GAC9BA,EAAgE,OAAhEiD,GAAgEvC,EAApC1C,QAAW,OAAO,EAAG,WAAQ,CAAA,IAE3DgC,EAGM,MAHNkD,GAGM,CAFJvC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAAiD,OAAA,CAA3C,MAAM,YAAY,EAAC,oBAAiB,EAAA,GAC1CA,EAAyD,OAAzDmD,GAAyDzC,EAA7B1C,EAAA,MAAW,QAAQ,EAAA,CAAA,IAEjDgC,EAGM,MAHNoD,GAGM,CAFJzC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAA8C,OAAA,CAAxC,MAAM,YAAY,EAAC,iBAAc,EAAA,GACvCA,EAA8D,OAA9DqD,GAAyB,MAAIrF,EAAA,MAAW,WAAW,EAAG,IAAC,CAAA,IAE5BA,EAAA,MAAW,gBAAxC6B,IAAAC,EAGM,MAHNwD,GAGM,CAFJ3C,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAX,EAA0C,OAAA,CAApC,MAAM,YAAY,EAAC,aAAU,EAAA,GACnCA,EAAgE,OAAhEuD,GAAgE7C,EAApC1C,QAAW,cAAc,EAAG,IAAC,CAAA"}