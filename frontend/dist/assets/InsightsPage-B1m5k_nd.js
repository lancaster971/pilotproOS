const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-DTu4tgz9.js","assets/index-DL2fbv_4.js","assets/index-BiSeah_i.css"])))=>i.map(i=>d[i]);
import{B as H,s as K,p as q,e as v,f as p,g as t,q as $,d as Z,b as Q,r as n,o as X,c as J,x as Y,k as tt,y as et,h as M,m as h,l as u,I as y,t as l,F as U,z as L,n as C,_ as st}from"./index-DL2fbv_4.js";import{M as at}from"./MainLayout-DkWVHMT9.js";import{b as _}from"./api-client-C9hONd1T.js";import"./settings-D8agJaDT.js";var ot={root:{position:"relative"}},nt={root:"p-chart"},rt=H.extend({name:"chart",classes:nt,inlineStyles:ot}),it={name:"BaseChart",extends:K,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:rt,provide:function(){return{$pcChart:this,$parentInstance:this}}},S={name:"Chart",extends:it,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;q(()=>import("./auto-DTu4tgz9.js"),__vite__mapDeps([0,1,2])).then(function(o){e.chart&&(e.chart.destroy(),e.chart=null),o&&o.default&&(e.chart=new o.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var o=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);o&&o[0]&&r&&this.$emit("select",{originalEvent:e,element:o[0],dataset:r})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function x(s){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(s)}function V(s,e){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable})),o.push.apply(o,r)}return o}function z(s){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?V(Object(o),!0).forEach(function(r){lt(s,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):V(Object(o)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(o,r))})}return s}function lt(s,e,o){return(e=ct(e))in s?Object.defineProperty(s,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[e]=o,s}function ct(s){var e=dt(s,"string");return x(e)=="symbol"?e:e+""}function dt(s,e){if(x(s)!="object"||!s)return s;var o=s[Symbol.toPrimitive];if(o!==void 0){var r=o.call(s,e);if(x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}var ut=["width","height"];function pt(s,e,o,r,b,c){return p(),v("div",$({class:s.cx("root"),style:s.sx("root")},s.ptmi("root")),[t("canvas",$({ref:"canvas",width:s.width,height:s.height,onClick:e[0]||(e[0]=function(m){return c.onCanvasClick(m)})},z(z({},s.canvasProps),s.ptm("canvas"))),null,16,ut)],16)}S.render=pt;const ht={class:"insights-container"},vt={class:"professional-kpi-bar"},gt={class:"kpi-card highlight"},ft={class:"kpi-card-content"},bt={class:"kpi-card-value"},yt={class:"kpi-card"},mt={class:"kpi-card-content"},_t={class:"kpi-card-value"},xt={class:"kpi-card"},kt={class:"kpi-card-content"},Ct={class:"kpi-card-value"},St={class:"kpi-card"},wt={class:"kpi-card-content"},It={class:"kpi-card-value"},Et={class:"kpi-card"},At={class:"kpi-card-content"},Pt={class:"kpi-card-value"},Tt={key:0,class:"section-container"},Ot={class:"bg-gray-900 border border-gray-700 rounded-lg overflow-hidden"},Dt={class:"w-full"},Nt=["onClick"],Rt={class:"border-r border-gray-700 px-2 py-1"},Wt={class:"text-xs font-medium text-white"},jt={class:"border-r border-gray-700 px-2 py-1"},Bt={class:"border-r border-gray-700 px-2 py-1 text-xs text-gray-300"},$t={class:"border-r border-gray-700 px-2 py-1 text-xs text-gray-300"},Mt={class:"px-2 py-1"},Ut={key:0,class:"text-xs text-green-300 font-bold"},Lt={key:1,class:"text-xs text-gray-400 font-bold"},Vt={class:"section-container"},zt={class:"integrations-grid"},Ft={class:"integration-header"},Gt={class:"integration-name"},Ht={class:"integration-metrics"},Kt={class:"metric-item"},qt={class:"metric-val"},Zt={class:"metric-lbl"},Qt={class:"metric-item"},Xt={class:"charts-grid"},Jt={class:"section-container"},Yt={class:"small-chart-wrapper"},te={class:"section-container"},ee={class:"small-chart-wrapper"},se={class:"section-container"},ae={class:"small-chart-wrapper"},oe={key:1,class:"section-container"},ne={class:"empty-state"},re=Z({__name:"InsightsPage",setup(s){const e=Q(),o=n(!1),r=n(0),b=n(0),c=n(0),m=n(0),w=n(0),T=n(0),O=n(0),D=n(0),F=n("");n(0),n("0 MB"),n(1),n(0);const f=n([]),N=n([]),R=n({labels:[],datasets:[{label:"Executions",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,tension:.4,fill:!0}]}),W=n({labels:["Successful","Failed"],datasets:[{data:[0,0],backgroundColor:["rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#10b981","#ef4444"],borderWidth:1}]}),I=n({labels:[],datasets:[{label:"Executions",data:[],backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"#8b5cf6",borderWidth:1}]});n({maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",borderWidth:0,cornerRadius:4}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:11}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6b7280",font:{size:11}},beginAtZero:!0}}});const E=n({maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"bottom",labels:{color:"#9ca3af",font:{size:10},padding:8}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",borderWidth:0,cornerRadius:4,titleFont:{size:11},bodyFont:{size:10}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:9}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6b7280",font:{size:9}},beginAtZero:!0}}}),j=async()=>{o.value=!0;try{const[g,a,i,B,P]=await Promise.allSettled([_.getProcesses().catch(()=>null),_.getAnalytics().catch(()=>null),_.getAutomationInsights().catch(()=>null),_.getIntegrationHealth().catch(()=>null),_.getTopPerformers().catch(()=>null)]).then(d=>d.map(k=>k.status==="fulfilled"?k.value:null));g&&(r.value=g.total||g.data?.length||0,b.value=g.data?.filter(d=>d.is_active).length||0),a?.overview&&(c.value=a.overview.totalExecutions||0,m.value=Math.round(a.overview.successRate||0),O.value=a.overview.avgDurationSeconds||0),a?.overview&&c.value>0&&(w.value=Math.round(c.value*(m.value/100)),T.value=c.value-w.value),a?.businessImpact&&(D.value=a.businessImpact.timeSavedHours||0),P?.data&&(f.value=P.data.sort((d,k)=>k.execution_count-d.execution_count).slice(0,3)),N.value=[{connectionId:"n8n",serviceName:"Business Automation Engine",usage:{executionsThisWeek:c.value},health:{status:{color:c.value>0?"green":"yellow"}}},{connectionId:"postgres",serviceName:"PostgreSQL Database",usage:{executionsThisWeek:r.value},health:{status:{color:"green"}}},{connectionId:"backend",serviceName:"API Backend Service",usage:{executionsThisWeek:c.value>0?Math.round(c.value*1.2):0},health:{status:{color:"green"}}},{connectionId:"frontend",serviceName:"Business Portal UI",usage:{executionsThisWeek:b.value},health:{status:{color:"green"}}},{connectionId:"stack-controller",serviceName:"Stack Controller",usage:{executionsThisWeek:1},health:{status:{color:"green"}}}],c.value>0&&(W.value.datasets[0].data=[w.value,T.value]),f.value.length>0&&(I.value.labels=f.value.slice(0,5).map(d=>d.process_name.length>15?d.process_name.substring(0,15)+"...":d.process_name),I.value.datasets[0].data=f.value.slice(0,5).map(d=>d.execution_count)),a?.trendData&&(R.value=a.trendData),F.value=new Date().toLocaleTimeString()}catch{console.warn("Unable to load some data")}finally{o.value=!1}},G=g=>{e.push({path:"/command-center",query:{workflowId:g}})};let A;return X(async()=>{window.scrollTo(0,0),await j(),A=setInterval(j,3e4)}),J(()=>{A&&clearInterval(A),Y.stopAutoRefresh("insights")}),(g,a)=>(p(),tt(at,null,{default:et(()=>[t("div",ht,[t("div",vt,[t("div",gt,[h(u(y),{icon:"mdi:trending-up",class:"kpi-card-icon"}),t("div",ft,[t("div",bt,l(m.value)+"%",1),a[1]||(a[1]=t("div",{class:"kpi-card-label"},"SUCCESS RATE",-1)),a[2]||(a[2]=t("div",{class:"kpi-card-trend positive"},"â†‘ 5.2%",-1))])]),t("div",yt,[h(u(y),{icon:"mdi:rocket",class:"kpi-card-icon"}),t("div",mt,[t("div",_t,l(c.value.toLocaleString()),1),a[3]||(a[3]=t("div",{class:"kpi-card-label"},"TOTAL RUNS",-1))])]),t("div",xt,[h(u(y),{icon:"mdi:timer",class:"kpi-card-icon"}),t("div",kt,[t("div",Ct,l(O.value)+"s",1),a[4]||(a[4]=t("div",{class:"kpi-card-label"},"AVG DURATION",-1))])]),t("div",St,[h(u(y),{icon:"mdi:sitemap",class:"kpi-card-icon"}),t("div",wt,[t("div",It,l(b.value)+"/"+l(r.value),1),a[5]||(a[5]=t("div",{class:"kpi-card-label"},"ACTIVE WORKFLOWS",-1))])]),t("div",Et,[h(u(y),{icon:"mdi:clock-fast",class:"kpi-card-icon"}),t("div",At,[t("div",Pt,l(D.value)+"h",1),a[6]||(a[6]=t("div",{class:"kpi-card-label"},"TIME SAVED",-1))])])]),f.value.length>0?(p(),v("div",Tt,[a[8]||(a[8]=t("h2",{class:"section-title"},"Top 3 Most Executed Processes",-1)),t("div",Ot,[t("table",Dt,[a[7]||(a[7]=t("thead",null,[t("tr",{class:"bg-gray-800 border-b border-gray-700"},[t("th",{class:"border-r border-gray-700 px-2 py-1 text-xs font-bold text-gray-300 text-left"},"PROCESS NAME"),t("th",{class:"border-r border-gray-700 px-2 py-1 text-xs font-bold text-gray-300 text-left"},"SUCCESS RATE"),t("th",{class:"border-r border-gray-700 px-2 py-1 text-xs font-bold text-gray-300 text-left"},"EXECUTIONS"),t("th",{class:"border-r border-gray-700 px-2 py-1 text-xs font-bold text-gray-300 text-left"},"AVG DURATION"),t("th",{class:"px-2 py-1 text-xs font-bold text-gray-300 text-left"},"STATUS")])],-1)),t("tbody",null,[(p(!0),v(U,null,L(f.value,(i,B)=>(p(),v("tr",{key:i.workflow_id,onClick:P=>G(i.workflow_id),class:C([B%2===0?"bg-gray-850":"bg-gray-900","border-b border-gray-700 hover:bg-gray-800 transition-colors cursor-pointer"])},[t("td",Rt,[t("span",Wt,l(i.process_name),1)]),t("td",jt,[t("span",{class:C(["text-xs font-bold",i.success_rate>=95?"text-green-300":i.success_rate>=80?"text-yellow-300":"text-red-300"])},l(i.success_rate)+"% ",3)]),t("td",Bt,l(i.execution_count),1),t("td",$t,l(Math.round(i.avg_duration_ms/1e3))+"s ",1),t("td",Mt,[i.is_active?(p(),v("span",Ut," ACTIVE ")):(p(),v("span",Lt," INACTIVE "))])],10,Nt))),128))])])])])):M("",!0),t("div",Vt,[a[9]||(a[9]=t("h2",{class:"section-title"},"System Components",-1)),t("div",zt,[(p(!0),v(U,null,L(N.value,i=>(p(),v("div",{key:i.connectionId,class:"integration-card"},[t("div",Ft,[t("span",{class:C(["status-dot",i.health?.status?.color||"gray"])},null,2),t("span",Gt,l(i.serviceName),1)]),t("div",Ht,[t("div",Kt,[t("span",qt,l(i.usage?.executionsThisWeek||0),1),t("span",Zt,l(i.connectionId==="postgres"?"workflows":"executions"),1)]),t("div",Qt,[t("span",{class:C(["status-text",i.health?.status?.color])},l(i.health?.status?.color==="green"?"Active":"Idle"),3)])])]))),128))])]),t("div",Xt,[t("div",Jt,[a[10]||(a[10]=t("h2",{class:"section-title"},"Success Rate Distribution",-1)),t("div",Yt,[h(u(S),{type:"doughnut",data:W.value,options:E.value},null,8,["data","options"])])]),t("div",te,[a[11]||(a[11]=t("h2",{class:"section-title"},"Workflow Activity",-1)),t("div",ee,[h(u(S),{type:"bar",data:I.value,options:E.value},null,8,["data","options"])])]),t("div",se,[a[12]||(a[12]=t("h2",{class:"section-title"},"Execution Timeline",-1)),t("div",ae,[h(u(S),{type:"line",data:R.value,options:E.value},null,8,["data","options"])])])]),f.value.length===0?(p(),v("div",oe,[t("div",ne,[h(u(y),{icon:"mdi:information-outline",class:"empty-icon"}),a[13]||(a[13]=t("h3",null,"No Active Workflows",-1)),a[14]||(a[14]=t("p",null,"Start by creating and activating workflows to see execution data here.",-1)),t("button",{onClick:a[0]||(a[0]=i=>u(e).push("/workflows")),class:"primary-button"}," Go to Workflows ")])])):M("",!0)])]),_:1}))}}),ue=st(re,[["__scopeId","data-v-7924803c"]]);export{ue as default};
//# sourceMappingURL=InsightsPage-B1m5k_nd.js.map
