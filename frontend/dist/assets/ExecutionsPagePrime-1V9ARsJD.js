import{d as A,r as l,K as D,o as $,j as z,e as i,y as U,f as t,m as c,c as m,g as T,h as f,aa as B,l as w,k as v,n as S,t as r,v as j,ac as C,F as Y,z as K}from"./index-B-y45HLq.js";import{P as O,M as q}from"./MainLayout-DjmB3CP1.js";import{T as G}from"./TimelineModal-59zttexe.js";import{b as H}from"./api-client-4ZFrOWdg.js";import{R as J}from"./refresh-cw-BmUITkTP.js";import{S as Q,E as X}from"./search-B1h3iQjo.js";import"./auth-BBLLAYhE.js";import"./settings-zlQFbP_z.js";const Z={class:"space-y-6"},tt={class:"flex items-center justify-between"},et={class:"flex items-center gap-3"},st={class:"flex items-center gap-2"},ot=["disabled"],rt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},at={class:"control-card p-4"},nt={class:"text-center"},lt={class:"text-2xl font-bold text-white"},it={class:"control-card p-4"},ct={class:"text-center"},dt={class:"text-2xl font-bold text-green-400"},ut={class:"control-card p-4"},gt={class:"text-center"},xt={class:"text-2xl font-bold text-red-400"},pt={class:"control-card p-4"},mt={class:"text-center"},ft={class:"text-2xl font-bold text-blue-400"},vt={class:"control-card p-4"},ht={class:"text-center"},bt={class:"text-2xl font-bold text-yellow-400"},yt={class:"control-card p-4"},_t={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},wt={class:"relative"},St={value:"all"},kt={value:"success"},Rt={value:"error"},Et={value:"running"},Dt={value:"waiting"},Tt={class:"control-card overflow-hidden"},Ct={class:"overflow-x-auto"},Mt={class:"w-full"},It={key:0},Vt={colspan:"7",class:"p-8 text-center text-gray-500"},Lt=["onClick"],Ft={class:"p-4"},Nt={class:"font-medium text-white max-w-xs"},Pt=["title"],Wt={class:"p-4"},At={class:"p-4 text-sm text-gray-300"},$t={class:"p-4 text-sm text-gray-300 font-mono"},zt={class:"p-4 text-sm text-gray-300 font-mono"},Ut={class:"p-4"},Bt={class:"p-1 text-gray-400 hover:text-white transition-colors"},jt={key:0,class:"flex items-center justify-between"},Yt={class:"text-sm text-gray-400"},te=A({__name:"ExecutionsPagePrime",setup(Kt){const d=l(!1),k=l(!0),u=l(""),g=l("all"),x=l("all"),a=l([]),h=l(!1),b=l(""),y=l(""),n=D(()=>({total:a.value.length,success:a.value.filter(s=>s.originalStatus==="success").length,error:a.value.filter(s=>s.originalStatus==="error").length,running:a.value.filter(s=>s.originalStatus==="running").length,waiting:a.value.filter(s=>s.originalStatus==="waiting").length})),_=D(()=>a.value.filter(s=>{const e=s.processName?.toLowerCase().includes(u.value.toLowerCase())||String(s.processRunId).includes(u.value),o=g.value==="all"||s.originalStatus===g.value,p=x.value==="all"||s.processId===x.value;return e&&o&&p})),R=async()=>{d.value=!0;try{const s=await H.getProcessExecutions();s.processRuns&&Array.isArray(s.processRuns)?a.value=s.processRuns:a.value=[]}catch(s){console.error("❌ ERROR loading executions:",s.message),a.value=[]}finally{d.value=!1}},M=s=>{switch(s){case"success":return"text-green-400 bg-green-500/10 border-green-500/30";case"error":return"text-red-400 bg-red-500/10 border-red-500/30";case"running":return"text-blue-400 bg-blue-500/10 border-blue-500/30";case"waiting":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";default:return"text-gray-400 bg-gray-500/10 border-gray-500/30"}},I=s=>{switch(s){case"success":return"bg-green-500";case"error":return"bg-red-500";case"running":return"bg-blue-500";case"waiting":return"bg-yellow-500";default:return"bg-gray-500"}},V=s=>{switch(s){case"success":return"Success";case"error":return"Error";case"running":return"Running";case"waiting":return"Waiting";default:return"Unknown"}},L=s=>{const e=new Date(s),o=new Date,p=new Date(o.getFullYear(),o.getMonth(),o.getDate()),W=new Date(e.getFullYear(),e.getMonth(),e.getDate()),E=e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return W.getTime()===p.getTime()?E:`${e.toLocaleDateString("it-IT",{month:"short",day:"2-digit"})}, ${E}`},F=s=>{if(!s)return"-";const e=typeof s=="string"?parseFloat(s):s;return e<1e3?`${e}ms`:e<6e4?`${Math.round(e/1e3*10)/10}s`:`${Math.round(e/6e4*10)/10}min`},N=s=>{b.value=s.process_id,y.value=s.run_id,h.value=!0},P=()=>{h.value=!1,b.value="",y.value=""};return $(()=>{R()}),(s,e)=>(i(),z(q,null,{default:U(()=>[t("div",Z,[t("div",tt,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gradient"},"Executions"),t("p",{class:"text-gray-400 mt-1"},"Monitora le esecuzioni dei tuoi workflow")],-1)),t("div",et,[t("div",st,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>k.value=o),type:"checkbox",id:"auto-refresh",class:"w-4 h-4 text-green-500 bg-gray-900 border-gray-600 rounded focus:ring-green-500"},null,512),[[B,k.value]]),e[4]||(e[4]=t("label",{for:"auto-refresh",class:"text-sm text-white"},"Auto refresh",-1))]),t("button",{onClick:R,disabled:d.value,class:"btn-control"},[c(v(J),{class:S([{"animate-spin":d.value},"h-4 w-4"])},null,8,["class"]),e[5]||(e[5]=w(" Refresh ",-1))],8,ot)])]),t("div",rt,[t("div",at,[t("div",nt,[t("p",lt,r(n.value.total),1),e[7]||(e[7]=t("p",{class:"text-xs text-gray-400"},"Totali",-1))])]),t("div",it,[t("div",ct,[t("p",dt,r(n.value.success),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-400"},"Success",-1))])]),t("div",ut,[t("div",gt,[t("p",xt,r(n.value.error),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-400"},"Error",-1))])]),t("div",pt,[t("div",mt,[t("p",ft,r(n.value.running),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-400"},"Running",-1))])]),t("div",vt,[t("div",ht,[t("p",bt,r(n.value.waiting),1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-400"},"Waiting",-1))])])]),t("div",yt,[t("div",_t,[t("div",wt,[c(v(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),type:"text",placeholder:"Cerca executions...",class:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},null,512),[[j,u.value]])]),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),class:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},[t("option",St,"Any Status ("+r(n.value.total)+")",1),t("option",kt,"Success ("+r(n.value.success)+")",1),t("option",Rt,"Error ("+r(n.value.error)+")",1),t("option",Et,"Running ("+r(n.value.running)+")",1),t("option",Dt,"Waiting ("+r(n.value.waiting)+")",1)],512),[[C,g.value]]),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),class:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},[...e[12]||(e[12]=[t("option",{value:"all"},"All Workflows",-1)])],512),[[C,x.value]])])]),t("div",Tt,[t("div",Ct,[t("table",Mt,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},[t("input",{type:"checkbox",class:"w-4 h-4 bg-gray-900 border-gray-600 rounded"})]),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Workflow"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Status"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Started"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Run Time"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Exec. ID"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"})])],-1)),t("tbody",null,[_.value.length===0?(i(),m("tr",It,[t("td",Vt,[c(v(O),{class:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e[13]||(e[13]=w(" Nessuna execution trovata ",-1))])])):T("",!0),(i(!0),m(Y,null,K(_.value,o=>(i(),m("tr",{key:o.id,class:"border-b border-gray-800/50 hover:bg-gray-900/30 transition-colors cursor-pointer",onClick:p=>N(o)},[e[14]||(e[14]=t("td",{class:"p-4"},[t("input",{type:"checkbox",class:"w-4 h-4 bg-gray-900 border-gray-600 rounded"})],-1)),t("td",Ft,[t("div",Nt,[t("span",{class:"truncate block hover:text-green-400 transition-colors",title:o.process_name},r(o.processName),9,Pt)])]),t("td",Wt,[t("span",{class:S(["inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border",M(o.originalStatus)])},[t("div",{class:S(["w-1.5 h-1.5 rounded-full",I(o.originalStatus)])},null,2),w(" "+r(o.processRunStatus?.label||V(o.originalStatus)),1)],2)]),t("td",At,r(L(o.processRunStarted)),1),t("td",$t,r(F(o.processRunDuration*1e3)),1),t("td",zt,r(o.processRunId),1),t("td",Ut,[t("button",Bt,[c(v(X),{class:"h-4 w-4"})])])],8,Lt))),128))])])])]),a.value.length>0?(i(),m("div",jt,[t("p",Yt," Visualizzando "+r(_.value.length)+" di "+r(a.value.length)+" executions ",1),e[16]||(e[16]=t("div",{class:"flex items-center gap-2"},[t("button",{class:"btn-control text-xs px-3 py-1",disabled:""}," Precedente "),t("button",{class:"btn-control text-xs px-3 py-1",disabled:""}," Successiva ")],-1))])):T("",!0)]),c(G,{show:h.value,"workflow-id":b.value,"execution-id":y.value,"tenant-id":"client_simulation_a",onClose:P},null,8,["show","workflow-id","execution-id"])]),_:1}))}});export{te as default};
//# sourceMappingURL=ExecutionsPagePrime-1V9ARsJD.js.map
