import{d as I,r as l,q as D,o as z,j as N,e as i,y as U,f as t,m as d,c as m,g as M,h as f,a7 as B,l as w,k as v,n as k,t as r,v as j,a9 as T,F as Y,z as q}from"./index-HEXrCDXX.js";import{P as O,M as G}from"./MainLayout-4l8ERGW4.js";import{_ as H}from"./TimelineModal.vue_vue_type_script_setup_true_lang-B4ujNocA.js";import{b as J}from"./api-client-Bh3w66en.js";import{R as K}from"./refresh-cw-BPIMfOiS.js";import{S as Q,E as X}from"./search-B2Axyl0o.js";import"./auth-CaMMajEz.js";import"./settings-CkSGJykS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconify-DRfx9Xkk.js";const Z={class:"space-y-6"},tt={class:"flex items-center justify-between"},et={class:"flex items-center gap-3"},st={class:"flex items-center gap-2"},ot=["disabled"],rt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},at={class:"control-card p-4"},nt={class:"text-center"},lt={class:"text-2xl font-bold text-white"},it={class:"control-card p-4"},dt={class:"text-center"},ct={class:"text-2xl font-bold text-green-400"},ut={class:"control-card p-4"},gt={class:"text-center"},xt={class:"text-2xl font-bold text-red-400"},pt={class:"control-card p-4"},mt={class:"text-center"},ft={class:"text-2xl font-bold text-blue-400"},vt={class:"control-card p-4"},ht={class:"text-center"},_t={class:"text-2xl font-bold text-yellow-400"},bt={class:"control-card p-4"},yt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},wt={class:"relative"},kt={value:"all"},St={value:"success"},Et={value:"error"},Ct={value:"running"},Dt={value:"waiting"},Mt={class:"control-card overflow-hidden"},Tt={class:"overflow-x-auto"},Rt={class:"w-full"},Vt={key:0},Lt={colspan:"7",class:"p-8 text-center text-gray-500"},Ft=["onClick"],Pt={class:"p-4"},Wt={class:"font-medium text-white max-w-xs"},$t=["title"],At={class:"p-4"},It={class:"p-4 text-sm text-gray-300"},zt={class:"p-4 text-sm text-gray-300 font-mono"},Nt={class:"p-4 text-sm text-gray-300 font-mono"},Ut={class:"p-4"},Bt={class:"p-1 text-gray-400 hover:text-white transition-colors"},jt={key:0,class:"flex items-center justify-between"},Yt={class:"text-sm text-gray-400"},se=I({__name:"ExecutionsPagePrime",setup(qt){const c=l(!1),S=l(!0),u=l(""),g=l("all"),x=l("all"),a=l([]),h=l(!1),_=l(""),b=l(""),n=D(()=>({total:a.value.length,success:a.value.filter(s=>s.status==="success").length,error:a.value.filter(s=>s.status==="error").length,running:a.value.filter(s=>s.status==="running").length,waiting:a.value.filter(s=>s.status==="waiting").length})),y=D(()=>a.value.filter(s=>{const e=s.process_name?.toLowerCase().includes(u.value.toLowerCase())||String(s.run_id).includes(u.value),o=g.value==="all"||s.status===g.value,p=x.value==="all"||s.process_id===x.value;return e&&o&&p})),E=async()=>{c.value=!0;try{const s=await J.getProcessRuns();s.data&&Array.isArray(s.data)?a.value=s.data:a.value=[]}catch(s){console.error("âŒ ERROR loading executions:",s.message),a.value=[]}finally{c.value=!1}},R=s=>{switch(s){case"success":return"text-green-400 bg-green-500/10 border-green-500/30";case"error":return"text-red-400 bg-red-500/10 border-red-500/30";case"running":return"text-blue-400 bg-blue-500/10 border-blue-500/30";case"waiting":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/30";default:return"text-gray-400 bg-gray-500/10 border-gray-500/30"}},V=s=>{switch(s){case"success":return"bg-green-500";case"error":return"bg-red-500";case"running":return"bg-blue-500";case"waiting":return"bg-yellow-500";default:return"bg-gray-500"}},L=s=>{switch(s){case"success":return"Success";case"error":return"Error";case"running":return"Running";case"waiting":return"Waiting";default:return"Unknown"}},F=s=>{const e=new Date(s),o=new Date,p=new Date(o.getFullYear(),o.getMonth(),o.getDate()),A=new Date(e.getFullYear(),e.getMonth(),e.getDate()),C=e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return A.getTime()===p.getTime()?C:`${e.toLocaleDateString("it-IT",{month:"short",day:"2-digit"})}, ${C}`},P=s=>{if(!s)return"-";const e=typeof s=="string"?parseFloat(s):s;return e<1e3?`${e}ms`:e<6e4?`${Math.round(e/1e3*10)/10}s`:`${Math.round(e/6e4*10)/10}min`},W=s=>{_.value=s.process_id,b.value=s.run_id,h.value=!0},$=()=>{h.value=!1,_.value="",b.value=""};return z(()=>{E()}),(s,e)=>(i(),N(G,null,{default:U(()=>[t("div",Z,[t("div",tt,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gradient"},"Executions"),t("p",{class:"text-gray-400 mt-1"},"Monitora le esecuzioni dei tuoi workflow")],-1)),t("div",et,[t("div",st,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>S.value=o),type:"checkbox",id:"auto-refresh",class:"w-4 h-4 text-green-500 bg-gray-900 border-gray-600 rounded focus:ring-green-500"},null,512),[[B,S.value]]),e[4]||(e[4]=t("label",{for:"auto-refresh",class:"text-sm text-white"},"Auto refresh",-1))]),t("button",{onClick:E,disabled:c.value,class:"btn-control"},[d(v(K),{class:k([{"animate-spin":c.value},"h-4 w-4"])},null,8,["class"]),e[5]||(e[5]=w(" Refresh ",-1))],8,ot)])]),t("div",rt,[t("div",at,[t("div",nt,[t("p",lt,r(n.value.total),1),e[7]||(e[7]=t("p",{class:"text-xs text-gray-400"},"Totali",-1))])]),t("div",it,[t("div",dt,[t("p",ct,r(n.value.success),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-400"},"Success",-1))])]),t("div",ut,[t("div",gt,[t("p",xt,r(n.value.error),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-400"},"Error",-1))])]),t("div",pt,[t("div",mt,[t("p",ft,r(n.value.running),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-400"},"Running",-1))])]),t("div",vt,[t("div",ht,[t("p",_t,r(n.value.waiting),1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-400"},"Waiting",-1))])])]),t("div",bt,[t("div",yt,[t("div",wt,[d(v(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),type:"text",placeholder:"Cerca executions...",class:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},null,512),[[j,u.value]])]),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),class:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},[t("option",kt,"Any Status ("+r(n.value.total)+")",1),t("option",St,"Success ("+r(n.value.success)+")",1),t("option",Et,"Error ("+r(n.value.error)+")",1),t("option",Ct,"Running ("+r(n.value.running)+")",1),t("option",Dt,"Waiting ("+r(n.value.waiting)+")",1)],512),[[T,g.value]]),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),class:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-sm focus:border-green-500 focus:outline-none"},[...e[12]||(e[12]=[t("option",{value:"all"},"All Workflows",-1)])],512),[[T,x.value]])])]),t("div",Mt,[t("div",Tt,[t("table",Rt,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},[t("input",{type:"checkbox",class:"w-4 h-4 bg-gray-900 border-gray-600 rounded"})]),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Workflow"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Status"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Started"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Run Time"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"},"Exec. ID"),t("th",{class:"text-left p-4 text-sm font-medium text-gray-400"})])],-1)),t("tbody",null,[y.value.length===0?(i(),m("tr",Vt,[t("td",Lt,[d(v(O),{class:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e[13]||(e[13]=w(" Nessuna execution trovata ",-1))])])):M("",!0),(i(!0),m(Y,null,q(y.value,o=>(i(),m("tr",{key:o.id,class:"border-b border-gray-800/50 hover:bg-gray-900/30 transition-colors cursor-pointer",onClick:p=>W(o)},[e[14]||(e[14]=t("td",{class:"p-4"},[t("input",{type:"checkbox",class:"w-4 h-4 bg-gray-900 border-gray-600 rounded"})],-1)),t("td",Pt,[t("div",Wt,[t("span",{class:"truncate block hover:text-green-400 transition-colors",title:o.process_name},r(o.process_name),9,$t)])]),t("td",At,[t("span",{class:k(["inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border",R(o.status)])},[t("div",{class:k(["w-1.5 h-1.5 rounded-full",V(o.status)])},null,2),w(" "+r(L(o.status)),1)],2)]),t("td",It,r(F(o.start_time)),1),t("td",zt,r(P(o.duration_ms)),1),t("td",Nt,r(o.run_id),1),t("td",Ut,[t("button",Bt,[d(v(X),{class:"h-4 w-4"})])])],8,Ft))),128))])])])]),a.value.length>0?(i(),m("div",jt,[t("p",Yt," Visualizzando "+r(y.value.length)+" di "+r(a.value.length)+" executions ",1),e[16]||(e[16]=t("div",{class:"flex items-center gap-2"},[t("button",{class:"btn-control text-xs px-3 py-1",disabled:""}," Precedente "),t("button",{class:"btn-control text-xs px-3 py-1",disabled:""}," Successiva ")],-1))])):M("",!0)]),d(H,{show:h.value,"workflow-id":_.value,"execution-id":b.value,"tenant-id":"client_simulation_a",onClose:$},null,8,["show","workflow-id","execution-id"])]),_:1}))}});export{se as default};
//# sourceMappingURL=ExecutionsPagePrime-C6VdiEBp.js.map
