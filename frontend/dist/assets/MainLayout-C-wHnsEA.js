import{d as S,a3 as z,a as j,r as x,o as k,b as I,q as E,X as $,c as l,e as r,f as e,g as v,m as y,k as n,t as h,l as A,n as u,F as D,z as N,j as w,A as U,y as V,a0 as B,I as H}from"./index-Dtu06-oO.js";import{useAuthStore as P}from"./auth-Ckyanyq3.js";import{c,S as O}from"./settings-BXrMLSgp.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=c("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=c("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=c("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=c("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=c("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=c("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),G={class:"min-h-screen bg-background"},J={class:"premium-glass sticky top-0 z-50 h-10 border-b border-border/50"},K={class:"flex items-center justify-between h-full px-4"},Q={class:"flex items-center gap-3"},Y={class:"flex items-center gap-3"},ee={class:"relative"},te={class:"text-xs"},se={key:0,class:"absolute right-0 mt-1 w-40 bg-surface border border-border rounded-lg shadow-lg py-1"},oe={class:"px-3 py-1.5 border-b border-border"},ae={class:"text-xs font-medium text-text"},re={class:"text-xs text-text-muted"},ne={class:"flex"},le={class:"space-y-1"},ie={key:0,class:"text-sm font-medium"},ce={class:"mt-8 pt-4 border-t border-border"},de={key:0,class:"flex items-center justify-between px-3 py-2"},ue={key:1,class:"flex justify-center"},he={class:"p-6"},me=S({__name:"MainLayout",setup(pe){const d=P(),m=z(),g=j(),i=x(!1),s=x(!1),b=x(!1),p=()=>{b.value=window.innerWidth<1024};k(()=>{p(),window.addEventListener("resize",p)}),I(()=>{window.removeEventListener("resize",p)});const _=[{name:"insights",path:"/insights",label:"Insights",icon:F,roles:["admin","viewer"]},{name:"command-center",path:"/command-center",label:"Command Center",icon:Z,roles:["admin","viewer"]},{name:"executions",path:"/executions",label:"Executions",icon:W,roles:["admin","viewer"]},{name:"settings",path:"/settings",label:"Settings",icon:O,roles:["admin"]}],C=E(()=>{const o=d.user?.role||"viewer";return _.filter(t=>t.roles.includes(o))}),M=async()=>{try{await d.logout(),m.showToast("Logout","Disconnesso con successo","success"),await g.push("/login"),i.value=!1}catch(o){console.error("Logout error:",o),await g.push("/login"),i.value=!1}};return k(()=>{const o=t=>{t.target.closest(".relative")||(i.value=!1)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}}),(o,t)=>{const f=$("router-link");return r(),l("div",G,[e("header",J,[e("div",K,[e("div",Q,[e("button",{onClick:t[0]||(t[0]=a=>s.value=!s.value),class:"text-text-muted hover:text-primary transition-colors p-1"},[y(n(T),{class:"h-4 w-4"})]),t[3]||(t[3]=e("h1",{class:"text-sm font-semibold text-text"},"PilotPro Control Center",-1))]),e("div",Y,[e("div",ee,[e("button",{onClick:t[1]||(t[1]=a=>i.value=!i.value),class:"flex items-center gap-1.5 text-text-muted hover:text-text transition-colors p-1"},[y(n(X),{class:"h-4 w-4"}),e("span",te,h(n(d).user?.email?.split("@")[0]||"User"),1)]),i.value?(r(),l("div",se,[e("div",oe,[e("p",ae,h(n(d).user?.email?.split("@")[0]),1),e("p",re,h(n(d).user?.email),1)]),e("button",{onClick:M,class:"w-full px-3 py-1.5 text-left text-xs text-text-secondary hover:text-text hover:bg-surface-hover transition-colors flex items-center gap-2"},[y(n(R),{class:"h-3 w-3"}),t[4]||(t[4]=A(" Logout ",-1))])])):v("",!0)])])])]),e("div",ne,[e("aside",{class:u([s.value?"w-16":"w-52","premium-glass border-r border-border flex-shrink-0 premium-scrollbar transition-all duration-300 fixed left-0 z-40 overflow-y-auto"]),style:{top:"2.5rem",height:"calc(100vh - 2.5rem)"}},[e("div",{class:u(s.value?"p-2":"p-4")},[e("nav",le,[(r(!0),l(D,null,N(C.value,(a,L)=>(r(),w(f,{key:a.name,to:a.path,class:u(["flex items-center rounded-lg premium-transition text-text-secondary hover:bg-surface-hover hover:text-text",s.value?"justify-center p-2":"gap-3 px-3 py-2",o.$route.path===a.path?"bg-primary text-white":""]),style:U({animationDelay:`${L*50}ms`}),title:s.value?a.label:""},{default:V(()=>[(r(),w(B(a.icon),{class:u((s.value,"h-4 w-4"))},null,8,["class"])),s.value?v("",!0):(r(),l("span",ie,h(a.label),1))]),_:2},1032,["to","class","style","title"]))),128))]),e("div",ce,[s.value?(r(),l("div",ue,[...t[6]||(t[6]=[e("div",{class:"w-2 h-2 bg-green-400 rounded-full"},null,-1)])])):(r(),l("div",de,[...t[5]||(t[5]=[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-2 h-2 bg-cyan-500 rounded-full"}),e("span",{class:"text-xs text-text-muted"},"Stack Healthy")],-1)])]))])],2)],2),e("main",{class:u([s.value?"ml-16":"ml-52","flex-1 transition-all duration-300"])},[e("div",he,[H(o.$slots,"default",{},void 0,!0)])],2)]),n(m).sidebarOpen&&b.value?(r(),l("div",{key:0,onClick:t[2]||(t[2]=a=>n(m).toggleSidebar()),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):v("",!0)])}}}),be=q(me,[["__scopeId","data-v-2435b8be"]]);export{be as M,W as P};
//# sourceMappingURL=MainLayout-C-wHnsEA.js.map
