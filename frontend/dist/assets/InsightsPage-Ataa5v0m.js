const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-a6JCIzeR.js","assets/index-B-y45HLq.js","assets/index-DKcKv7g8.css"])))=>i.map(i=>d[i]);
import{B as U,s as V,p as H,c as m,e as f,f as t,q as j,d as K,a as G,r as l,o as Z,b as q,x as Q,j as J,y as X,g as N,t as n,m as u,k as d,I as h,F as B,z as L,n as P,_ as Y}from"./index-B-y45HLq.js";import{M as tt}from"./MainLayout-DjmB3CP1.js";import{b as k}from"./api-client-4ZFrOWdg.js";import"./auth-BBLLAYhE.js";import"./settings-zlQFbP_z.js";var et={root:{position:"relative"}},st={root:"p-chart"},at=U.extend({name:"chart",classes:st,inlineStyles:et}),ot={name:"BaseChart",extends:V,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:at,provide:function(){return{$pcChart:this,$parentInstance:this}}},w={name:"Chart",extends:ot,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var a=this;H(()=>import("./auto-a6JCIzeR.js"),__vite__mapDeps([0,1,2])).then(function(o){a.chart&&(a.chart.destroy(),a.chart=null),o&&o.default&&(a.chart=new o.default(a.$refs.canvas,{type:a.type,data:a.data,options:a.options,plugins:a.plugins})),a.$emit("loaded",a.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(a){if(this.chart){var o=this.chart.getElementsAtEventForMode(a,"nearest",{intersect:!0},!1),i=this.chart.getElementsAtEventForMode(a,"dataset",{intersect:!0},!1);o&&o[0]&&i&&this.$emit("select",{originalEvent:a,element:o[0],dataset:i})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function S(s){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},S(s)}function $(s,a){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable})),o.push.apply(o,i)}return o}function z(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?$(Object(o),!0).forEach(function(i){nt(s,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(o,i))})}return s}function nt(s,a,o){return(a=it(a))in s?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o,s}function it(s){var a=rt(s,"string");return S(a)=="symbol"?a:a+""}function rt(s,a){if(S(s)!="object"||!s)return s;var o=s[Symbol.toPrimitive];if(o!==void 0){var i=o.call(s,a);if(S(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var lt=["width","height"];function ct(s,a,o,i,b,c){return f(),m("div",j({class:s.cx("root"),style:s.sx("root")},s.ptmi("root")),[t("canvas",j({ref:"canvas",width:s.width,height:s.height,onClick:a[0]||(a[0]=function(_){return c.onCanvasClick(_)})},z(z({},s.canvasProps),s.ptm("canvas"))),null,16,lt)],16)}w.render=ct;const dt={class:"insights-container"},ut={class:"header-bar"},pt={class:"last-update"},vt={class:"professional-kpi-bar"},ht={class:"kpi-card highlight"},ft={class:"kpi-card-content"},gt={class:"kpi-card-value"},mt={class:"kpi-card"},bt={class:"kpi-card-content"},_t={class:"kpi-card-value"},yt={class:"kpi-card"},kt={class:"kpi-card-content"},St={class:"kpi-card-value"},Ct={class:"kpi-card"},Pt={class:"kpi-card-content"},wt={class:"kpi-card-value"},xt={class:"kpi-card"},Et={class:"kpi-card-content"},It={class:"kpi-card-value"},At={key:0,class:"section-container"},Ot={class:"workflow-table"},Dt={class:"section-container"},Tt={class:"integrations-grid"},Wt={class:"integration-header"},Rt={class:"integration-name"},Mt={class:"integration-metrics"},jt={class:"metric-item"},Nt={class:"metric-val"},Bt={class:"metric-lbl"},Lt={class:"metric-item"},$t={class:"charts-grid"},zt={class:"section-container"},Ft={class:"small-chart-wrapper"},Ut={class:"section-container"},Vt={class:"small-chart-wrapper"},Ht={class:"section-container"},Kt={class:"small-chart-wrapper"},Gt={class:"performance-metrics"},Zt={class:"perf-card"},qt={class:"perf-header"},Qt={class:"perf-stats"},Jt={class:"perf-stat"},Xt={class:"perf-value"},Yt={class:"perf-stat"},te={class:"perf-value"},ee={class:"perf-card"},se={class:"perf-header"},ae={class:"perf-stats"},oe={class:"perf-stat"},ne={class:"perf-value"},ie={class:"perf-stat"},re={class:"perf-value"},le={class:"perf-stat"},ce={class:"perf-value"},de={class:"perf-card"},ue={class:"perf-header"},pe={class:"perf-stats"},ve={class:"perf-stat"},he={class:"perf-value error"},fe={key:1,class:"section-container"},ge={class:"empty-state"},me=K({__name:"InsightsPage",setup(s){const a=G(),o=l(!1),i=l(0),b=l(0),c=l(0),_=l(0),x=l(0),C=l(0),y=l(0),A=l(0),O=l(""),g=l([]),D=l([]),T=l({labels:[],datasets:[{label:"Executions",data:[],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,tension:.4,fill:!0}]}),W=l({labels:["Successful","Failed"],datasets:[{data:[0,0],backgroundColor:["rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#10b981","#ef4444"],borderWidth:1}]}),E=l({labels:[],datasets:[{label:"Executions",data:[],backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"#8b5cf6",borderWidth:1}]});l({maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",borderWidth:0,cornerRadius:4}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:11}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6b7280",font:{size:11}},beginAtZero:!0}}});const I=l({maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"bottom",labels:{color:"#9ca3af",font:{size:10},padding:8}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",borderWidth:0,cornerRadius:4,titleFont:{size:11},bodyFont:{size:10}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:9}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6b7280",font:{size:9}},beginAtZero:!0}}}),R=async()=>{o.value=!0;try{const[p,e,r,be,M]=await Promise.all([k.getProcesses(),k.getAnalytics(),k.getAutomationInsights(),k.getIntegrationHealth(),k.getTopPerformers()]);p&&(i.value=p.total||p.data?.length||0,b.value=p.data?.filter(v=>v.is_active).length||0),e?.overview&&(c.value=e.overview.totalExecutions||0,_.value=Math.round(e.overview.successRate||0),y.value=e.overview.avgDurationSeconds||0),e?.overview&&c.value>0&&(x.value=Math.round(c.value*(_.value/100)),C.value=c.value-x.value),e?.businessImpact&&(A.value=e.businessImpact.timeSavedHours||0),M?.data&&(g.value=M.data.sort((v,F)=>F.execution_count-v.execution_count).slice(0,3)),D.value=[{connectionId:"n8n",serviceName:"Business Automation Engine",usage:{executionsThisWeek:c.value},health:{status:{color:c.value>0?"green":"yellow"}}},{connectionId:"postgres",serviceName:"PostgreSQL Database",usage:{executionsThisWeek:i.value},health:{status:{color:"green"}}},{connectionId:"backend",serviceName:"API Backend Service",usage:{executionsThisWeek:c.value>0?Math.round(c.value*1.2):0},health:{status:{color:"green"}}},{connectionId:"frontend",serviceName:"Business Portal UI",usage:{executionsThisWeek:b.value},health:{status:{color:"green"}}},{connectionId:"stack-controller",serviceName:"Stack Controller",usage:{executionsThisWeek:1},health:{status:{color:"green"}}}],c.value>0&&(W.value.datasets[0].data=[x.value,C.value]),g.value.length>0&&(E.value.labels=g.value.slice(0,5).map(v=>v.process_name.length>15?v.process_name.substring(0,15)+"...":v.process_name),E.value.datasets[0].data=g.value.slice(0,5).map(v=>v.execution_count)),e?.trendData&&(T.value=e.trendData),O.value=new Date().toLocaleTimeString()}catch(p){console.error("Error loading data:",p)}finally{o.value=!1}};return Z(async()=>{await R();const p=setInterval(R,3e4);q(()=>{clearInterval(p),Q.stopAutoRefresh("insights")})}),(p,e)=>(f(),J(tt,null,{default:X(()=>[t("div",dt,[t("div",ut,[e[1]||(e[1]=t("h1",{class:"page-title"},"System Overview",-1)),t("div",pt,"Last update: "+n(O.value),1)]),t("div",vt,[t("div",ht,[u(d(h),{icon:"mdi:trending-up",class:"kpi-card-icon"}),t("div",ft,[t("div",gt,n(_.value)+"%",1),e[2]||(e[2]=t("div",{class:"kpi-card-label"},"SUCCESS RATE",-1)),e[3]||(e[3]=t("div",{class:"kpi-card-trend positive"},"â†‘ 5.2%",-1))])]),t("div",mt,[u(d(h),{icon:"mdi:rocket",class:"kpi-card-icon"}),t("div",bt,[t("div",_t,n(c.value.toLocaleString()),1),e[4]||(e[4]=t("div",{class:"kpi-card-label"},"TOTAL RUNS",-1))])]),t("div",yt,[u(d(h),{icon:"mdi:timer",class:"kpi-card-icon"}),t("div",kt,[t("div",St,n(y.value)+"s",1),e[5]||(e[5]=t("div",{class:"kpi-card-label"},"AVG DURATION",-1))])]),t("div",Ct,[u(d(h),{icon:"mdi:sitemap",class:"kpi-card-icon"}),t("div",Pt,[t("div",wt,n(b.value)+"/"+n(i.value),1),e[6]||(e[6]=t("div",{class:"kpi-card-label"},"ACTIVE WORKFLOWS",-1))])]),t("div",xt,[u(d(h),{icon:"mdi:clock-fast",class:"kpi-card-icon"}),t("div",Et,[t("div",It,n(A.value)+"h",1),e[7]||(e[7]=t("div",{class:"kpi-card-label"},"TIME SAVED",-1))])])]),g.value.length>0?(f(),m("div",At,[e[9]||(e[9]=t("h2",{class:"section-title"},"Top 3 Most Executed Processes",-1)),t("div",Ot,[t("table",null,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"Process Name"),t("th",null,"Success Rate"),t("th",null,"Executions"),t("th",null,"Avg Duration"),t("th",null,"Status")])],-1)),t("tbody",null,[(f(!0),m(B,null,L(g.value,r=>(f(),m("tr",{key:r.workflow_id},[t("td",null,n(r.process_name),1),t("td",null,[t("span",{class:P({"text-green":r.success_rate>=95,"text-yellow":r.success_rate>=80,"text-red":r.success_rate<80})},n(r.success_rate)+"% ",3)]),t("td",null,n(r.execution_count),1),t("td",null,n(Math.round(r.avg_duration_ms/1e3))+"s",1),t("td",null,[t("span",{class:P(["status-badge",r.is_active?"active":"inactive"])},n(r.is_active?"Active":"Inactive"),3)])]))),128))])])])])):N("",!0),t("div",Dt,[e[10]||(e[10]=t("h2",{class:"section-title"},"System Components",-1)),t("div",Tt,[(f(!0),m(B,null,L(D.value,r=>(f(),m("div",{key:r.connectionId,class:"integration-card"},[t("div",Wt,[t("span",{class:P(["status-dot",r.health?.status?.color||"gray"])},null,2),t("span",Rt,n(r.serviceName),1)]),t("div",Mt,[t("div",jt,[t("span",Nt,n(r.usage?.executionsThisWeek||0),1),t("span",Bt,n(r.connectionId==="postgres"?"workflows":"executions"),1)]),t("div",Lt,[t("span",{class:P(["status-text",r.health?.status?.color])},n(r.health?.status?.color==="green"?"Active":"Idle"),3)])])]))),128))])]),t("div",$t,[t("div",zt,[e[11]||(e[11]=t("h2",{class:"section-title"},"Success Rate Distribution",-1)),t("div",Ft,[u(d(w),{type:"doughnut",data:W.value,options:I.value},null,8,["data","options"])])]),t("div",Ut,[e[12]||(e[12]=t("h2",{class:"section-title"},"Workflow Activity",-1)),t("div",Vt,[u(d(w),{type:"bar",data:E.value,options:I.value},null,8,["data","options"])])]),t("div",Ht,[e[13]||(e[13]=t("h2",{class:"section-title"},"Execution Timeline",-1)),t("div",Kt,[u(d(w),{type:"line",data:T.value,options:I.value},null,8,["data","options"])])])]),t("div",Gt,[t("div",Zt,[t("div",qt,[u(d(h),{icon:"mdi:speedometer",class:"perf-icon"}),e[14]||(e[14]=t("span",{class:"perf-title"},"Performance Overview",-1))]),t("div",Qt,[t("div",Jt,[e[15]||(e[15]=t("span",{class:"perf-label"},"Fastest Process",-1)),t("span",Xt,n(y.value>0?Math.round(y.value*.5):1)+"s",1)]),t("div",Yt,[e[16]||(e[16]=t("span",{class:"perf-label"},"Slowest Process",-1)),t("span",te,n(Math.round(y.value*2.5))+"s",1)]),e[17]||(e[17]=t("div",{class:"perf-stat"},[t("span",{class:"perf-label"},"Peak Hour"),t("span",{class:"perf-value"},"09:00-10:00")],-1))])]),t("div",ee,[t("div",se,[u(d(h),{icon:"mdi:chart-timeline",class:"perf-icon"}),e[18]||(e[18]=t("span",{class:"perf-title"},"Execution Trends",-1))]),t("div",ae,[t("div",oe,[e[19]||(e[19]=t("span",{class:"perf-label"},"Today",-1)),t("span",ne,n(Math.round(c.value*.15)||0),1)]),t("div",ie,[e[20]||(e[20]=t("span",{class:"perf-label"},"This Week",-1)),t("span",re,n(Math.round(c.value*.4)||0),1)]),t("div",le,[e[21]||(e[21]=t("span",{class:"perf-label"},"This Month",-1)),t("span",ce,n(c.value),1)])])]),t("div",de,[t("div",ue,[u(d(h),{icon:"mdi:alert-circle-outline",class:"perf-icon"}),e[22]||(e[22]=t("span",{class:"perf-title"},"Error Analysis",-1))]),t("div",pe,[t("div",ve,[e[23]||(e[23]=t("span",{class:"perf-label"},"Error Rate",-1)),t("span",he,n(C.value>0?Math.round(C.value/c.value*100):0)+"%",1)]),e[24]||(e[24]=t("div",{class:"perf-stat"},[t("span",{class:"perf-label"},"Common Error"),t("span",{class:"perf-value"},"Timeout")],-1)),e[25]||(e[25]=t("div",{class:"perf-stat"},[t("span",{class:"perf-label"},"Last Error"),t("span",{class:"perf-value"},"2h ago")],-1))])])]),g.value.length===0?(f(),m("div",fe,[t("div",ge,[u(d(h),{icon:"mdi:information-outline",class:"empty-icon"}),e[26]||(e[26]=t("h3",null,"No Active Workflows",-1)),e[27]||(e[27]=t("p",null,"Start by creating and activating workflows to see execution data here.",-1)),t("button",{onClick:e[0]||(e[0]=r=>d(a).push("/workflows")),class:"primary-button"}," Go to Workflows ")])])):N("",!0)])]),_:1}))}}),Pe=Y(me,[["__scopeId","data-v-19425b2b"]]);export{Pe as default};
//# sourceMappingURL=InsightsPage-Ataa5v0m.js.map
