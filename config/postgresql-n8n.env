# PilotProOS PostgreSQL Configuration for n8n
# This file configures n8n to use PostgreSQL instead of SQLite

# ============================================================================
# DATABASE CONNECTION (Shared PostgreSQL)
# ============================================================================

# Database type (MUST be postgresdb for PostgreSQL)
DB_TYPE=postgresdb

# PostgreSQL connection parameters
DB_POSTGRESDB_HOST=localhost
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=pilotpros_db
DB_POSTGRESDB_USER=pilotpros_user
DB_POSTGRESDB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
DB_POSTGRESDB_SCHEMA=n8n

# Connection pool settings
DB_POSTGRESDB_POOL_SIZE=10
DB_POSTGRESDB_SSL_MODE=disable

# ============================================================================
# n8n SERVER CONFIGURATION
# ============================================================================

# Server binding (localhost only for security)
N8N_PORT=5678
N8N_HOST=127.0.0.1

# Basic authentication (admin access)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=REPLACE_WITH_SECURE_ADMIN_PASSWORD

# Webhook configuration
WEBHOOK_URL=https://REPLACE_WITH_CLIENT_DOMAIN
N8N_PAYLOAD_SIZE_MAX=16

# ============================================================================
# PERFORMANCE & OPTIMIZATION
# ============================================================================

# Execution settings
EXECUTIONS_TIMEOUT=300
EXECUTIONS_TIMEOUT_MAX=3600
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=none
EXECUTIONS_DATA_MAX_AGE=336

# Performance optimization
N8N_METRICS=true
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=file
N8N_LOG_FILE_LOCATION=/opt/pilotpros/logs/n8n.log

# ============================================================================
# SECURITY & PRIVACY
# ============================================================================

# Disable telemetry and external connections
N8N_DIAGNOSTICS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_ANONYMOUS_TELEMETRY=false
N8N_PERSONALIZATION_ENABLED=false

# Security headers
N8N_SECURE_COOKIE=true
N8N_COOKIE_SAME_SITE=strict

# ============================================================================
# BUSINESS PROCESS INTEGRATION
# ============================================================================

# Custom settings for PilotProOS integration
N8N_CUSTOM_EXTENSIONS=/opt/pilotpros/n8n/custom
N8N_EXTERNAL_HOOK_FILES=/opt/pilotpros/n8n/hooks

# Workflow execution mode
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
N8N_BINARY_DATA_TTL=24

# Editor settings (business-friendly)
N8N_HIDE_USAGE_PAGE=true
N8N_TEMPLATES_ENABLED=false